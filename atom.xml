<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ç…®é…’æ³›èˆŸçš„æŠ€æœ¯æ ˆ</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://lixhbs.gitee.io/blog/"/>
  <updated>2018-11-05T01:34:44.684Z</updated>
  <id>https://lixhbs.gitee.io/blog/</id>
  
  <author>
    <name>ç…®é…’æ³›èˆŸ</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ã€Œleetcodeã€åè½¬æ•´æ•°</title>
    <link href="https://lixhbs.gitee.io/blog/leetcode-002/"/>
    <id>https://lixhbs.gitee.io/blog/leetcode-002/</id>
    <published>2018-11-05T11:00:00.000Z</published>
    <updated>2018-11-05T01:34:44.684Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç»™å®šä¸€ä¸ª-32-ä½æœ‰ç¬¦å·æ•´æ•°ï¼Œå°†æ•´æ•°ä¸­çš„æ•°å­—è¿›è¡Œåè½¬ã€‚"><a href="#ç»™å®šä¸€ä¸ª-32-ä½æœ‰ç¬¦å·æ•´æ•°ï¼Œå°†æ•´æ•°ä¸­çš„æ•°å­—è¿›è¡Œåè½¬ã€‚" class="headerlink" title="ç»™å®šä¸€ä¸ª 32 ä½æœ‰ç¬¦å·æ•´æ•°ï¼Œå°†æ•´æ•°ä¸­çš„æ•°å­—è¿›è¡Œåè½¬ã€‚"></a>ç»™å®šä¸€ä¸ª 32 ä½æœ‰ç¬¦å·æ•´æ•°ï¼Œå°†æ•´æ•°ä¸­çš„æ•°å­—è¿›è¡Œåè½¬ã€‚</h3><a id="more"></a><p><strong>ç¤ºä¾‹ 1:</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: 123</span><br><span class="line">è¾“å‡º: 321</span><br></pre></td></tr></table></figure></p><p><strong>ç¤ºä¾‹ 2:</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: -123</span><br><span class="line">è¾“å‡º: -321</span><br></pre></td></tr></table></figure></p><p><strong>ç¤ºä¾‹ 1:</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: 120</span><br><span class="line">è¾“å‡º: 21</span><br></pre></td></tr></table></figure></p><p>æ³¨æ„:</p><p>å‡è®¾æˆ‘ä»¬çš„ç¯å¢ƒåªèƒ½å­˜å‚¨32ä½æœ‰ç¬¦å·æ•´æ•°ï¼Œå…¶æ•°å€¼èŒƒå›´æ˜¯ [âˆ’2<code>31</code>,  2<code>31</code>âˆ’1]ã€‚æ ¹æ®è¿™ä¸ªå‡è®¾ï¼Œå¦‚æœåè½¬åçš„æ•´æ•°æº¢å‡ºï¼Œåˆ™è¿”å› 0ã€‚   </p><h3 id="æ–¹æ³•ï¼šå¼¹å‡ºå’Œæ¨å…¥æ•°å­—-amp-æº¢å‡ºå‰è¿›è¡Œæ£€æŸ¥"><a href="#æ–¹æ³•ï¼šå¼¹å‡ºå’Œæ¨å…¥æ•°å­—-amp-æº¢å‡ºå‰è¿›è¡Œæ£€æŸ¥" class="headerlink" title="æ–¹æ³•ï¼šå¼¹å‡ºå’Œæ¨å…¥æ•°å­— &amp; æº¢å‡ºå‰è¿›è¡Œæ£€æŸ¥"></a>æ–¹æ³•ï¼šå¼¹å‡ºå’Œæ¨å…¥æ•°å­— &amp; æº¢å‡ºå‰è¿›è¡Œæ£€æŸ¥</h3><p><strong>æ€è·¯</strong></p><p>æˆ‘ä»¬å¯ä»¥ä¸€æ¬¡æ„å»ºåè½¬æ•´æ•°çš„ä¸€ä½æ•°å­—ã€‚åœ¨è¿™æ ·åšçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é¢„å…ˆæ£€æŸ¥å‘åŸæ•´æ•°é™„åŠ å¦ä¸€ä½æ•°å­—æ˜¯å¦ä¼šå¯¼è‡´æº¢å‡ºã€‚   </p><p><strong>ç®—æ³•</strong></p><p>åè½¬æ•´æ•°çš„æ–¹æ³•å¯ä»¥ä¸åè½¬å­—ç¬¦ä¸²è¿›è¡Œç±»æ¯”ã€‚   </p><p>æˆ‘ä»¬æƒ³é‡å¤â€œå¼¹å‡ºâ€ xx çš„æœ€åä¸€ä½æ•°å­—ï¼Œå¹¶å°†å®ƒâ€œæ¨å…¥â€åˆ° rev çš„åé¢ã€‚æœ€åï¼Œrev å°†ä¸ xç›¸åã€‚   </p><p>è¦åœ¨æ²¡æœ‰è¾…åŠ©å †æ ˆ/æ•°ç»„çš„å¸®åŠ©ä¸‹ â€œå¼¹å‡ºâ€ å’Œ â€œæ¨å…¥â€ æ•°å­—ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ•°å­¦æ–¹æ³•ã€‚   </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//pop operation:</span><br><span class="line">pop = x % 10;</span><br><span class="line">x /= 10;</span><br><span class="line"></span><br><span class="line">//push operation:</span><br><span class="line">temp = rev * 10 + pop;</span><br><span class="line">rev = temp;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œè¿™ç§æ–¹æ³•å¾ˆå±é™©ï¼Œå› ä¸ºå½“ <code>temp=revâ‹…10+pop</code> æ—¶ä¼šå¯¼è‡´æº¢å‡ºã€‚   </p><p>å¹¸è¿çš„æ˜¯ï¼Œäº‹å…ˆæ£€æŸ¥è¿™ä¸ªè¯­å¥æ˜¯å¦ä¼šå¯¼è‡´æº¢å‡ºå¾ˆå®¹æ˜“ã€‚   </p><p><img src="http://paz1myrij.bkt.clouddn.com/20181105091407.png" alt=""></p><p>å°†è¾“å…¥å€¼å–ä½™ä¸rev*10ç›¸åŠ ç¿»è½¬æ•°ï¼Œåˆ¤æ–­ç¿»è½¬çš„ğŸ“šæ˜¯å¦å¤§äºintçš„æœ€å¤§å€¼å’Œå°äºæœ€å°å€¼.<br>Integer.MIN_VALUE = -2147483648.<br>Integer.MAX_VALUE = 2147483647.<br>æ‰€ä»¥ å½“x &lt; (Integer.MIN_VALUE / 10 = -8) æ—¶å°±ä¼šæº¢å‡º.<br>æ‰€ä»¥ å½“x &gt; (Integer.MAX_VALUE / 10 = 7) æ—¶å°±ä¼šæº¢å‡º.   </p><pre><code> class Solution {    public int reverse(int x) {        int rev = 0;        while (x != 0) {            int pop = x % 10;            x /= 10;            if (rev &gt; Integer.MAX_VALUE/10 || (rev == Integer.MAX_VALUE / 10 &amp;&amp; pop &gt; 7)) return 0;            if (rev &lt; Integer.MIN_VALUE/10 || (rev == Integer.MIN_VALUE / 10 &amp;&amp; pop &lt; -8)) return 0;            rev = rev * 10 + pop;        }        return rev;    }}</code></pre><p><img src="http://paz1myrij.bkt.clouddn.com/20181105091537.png" alt=""></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;ç»™å®šä¸€ä¸ª-32-ä½æœ‰ç¬¦å·æ•´æ•°ï¼Œå°†æ•´æ•°ä¸­çš„æ•°å­—è¿›è¡Œåè½¬ã€‚&quot;&gt;&lt;a href=&quot;#ç»™å®šä¸€ä¸ª-32-ä½æœ‰ç¬¦å·æ•´æ•°ï¼Œå°†æ•´æ•°ä¸­çš„æ•°å­—è¿›è¡Œåè½¬ã€‚&quot; class=&quot;headerlink&quot; title=&quot;ç»™å®šä¸€ä¸ª 32 ä½æœ‰ç¬¦å·æ•´æ•°ï¼Œå°†æ•´æ•°ä¸­çš„æ•°å­—è¿›è¡Œåè½¬ã€‚&quot;&gt;&lt;/a&gt;ç»™å®šä¸€ä¸ª 32 ä½æœ‰ç¬¦å·æ•´æ•°ï¼Œå°†æ•´æ•°ä¸­çš„æ•°å­—è¿›è¡Œåè½¬ã€‚&lt;/h3&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>ã€Œleetcodeã€ä¸¤æ•°ä¹‹å’Œ</title>
    <link href="https://lixhbs.gitee.io/blog/leetcode-001/"/>
    <id>https://lixhbs.gitee.io/blog/leetcode-001/</id>
    <published>2018-10-31T02:04:19.000Z</published>
    <updated>2018-11-05T01:19:08.245Z</updated>
    
    <content type="html"><![CDATA[<p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„å’Œä¸€ä¸ªç›®æ ‡å€¼ï¼Œæ‰¾å‡ºæ•°ç»„ä¸­å’Œä¸ºç›®æ ‡å€¼çš„ä¸¤ä¸ªæ•°ã€‚    </p><p>ä½ å¯ä»¥å‡è®¾æ¯ä¸ªè¾“å…¥åªå¯¹åº”ä¸€ç§ç­”æ¡ˆï¼Œä¸”åŒæ ·çš„å…ƒç´ ä¸èƒ½è¢«é‡å¤åˆ©ç”¨ã€‚    </p><a id="more"></a><p><strong>ç¤ºä¾‹:</strong>    </p><blockquote><p>ç»™å®š nums = [2, 7, 11, 15], target = 9</p><p>å› ä¸º nums[0] + nums[1] = 2 + 7 = 9<br>æ‰€ä»¥è¿”å› [0, 1]</p></blockquote><p><strong>æˆ‘çš„è§£ç­”ï¼ˆæš´åŠ›ï¼‰</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] twoSum(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target) &#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.length;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> m = i + <span class="number">1</span>; m &lt; n; m++) &#123;</span><br><span class="line">                <span class="keyword">if</span> ( target - nums[m] == nums[i] ) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;i, m&#125;;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>é¢˜ç›®ç†è§£</strong></p><p>è®¡ç®—å‡ºè¿™ä¸ªæ•°ç»„ä¸­ä¸¤ä¸ªæ•°å­—ä¹‹å’Œä¸ºç›®æ ‡æ•°çš„ç´¢å¼•ï¼Œ<strong>æ•°ç»„ä¸­åŒæ ·çš„å…ƒç´ ä¸èƒ½å¤ç”¨</strong>ã€‚</p><p><strong>å®˜æ–¹ç­”æ¡ˆ</strong></p><blockquote><p>æ–¹æ³•ä¸€ï¼š</p></blockquote><p>æš´åŠ›è§£æ³•ï¼Œå¾ªç¯ä¸¤æ¬¡ï¼Œè€—æ—¶æ¯”è¾ƒé•¿ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public int[] twoSum(int[] nums, int target) &#123;</span><br><span class="line">   for (int i = 0; i &lt; nums.length; i++) &#123;</span><br><span class="line">       for (int j = i + 1; j &lt; nums.length; j++) &#123;</span><br><span class="line">           if (nums[j] == target - nums[i]) &#123;</span><br><span class="line">               return new int[] &#123; i, j &#125;;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   throw new IllegalArgumentException(&quot;No two sum solution&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><blockquote><p>æ–¹æ³•äºŒ</p></blockquote><p>å¯ä»¥ç”¨å“ˆå¸Œè¡¨å­˜å‚¨å…ƒç´ å’Œå¯¹åº”ç´¢å¼•çš„ä½ç½®ï¼Œç„¶åå¾ªç¯æ¯”å¯¹ã€‚ç”±äºå…ˆå°†æ‰€æœ‰çš„æ•°æ®éƒ½å­˜å…¥<code>HashMap</code>ï¼Œæ‰€ä»¥åé¢åˆ¤æ–­çš„æ—¶å€™éœ€è¦åˆ¤æ–­æ˜¯å¦é‡å¤ä½¿ç”¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">int</span>[] twoSum(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target) &#123;</span><br><span class="line">    Map&lt;Integer, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">        map.put(nums[i], i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> complement = target - nums[i];</span><br><span class="line">        <span class="keyword">if</span> (map.containsKey(complement) &amp;&amp; map.get(complement) != i) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[] &#123; i, map.get(complement) &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"No two sum solution"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ–¹æ³•ä¸‰</p></blockquote><p>å‚ç…§ç¬¬äºŒç§æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€æ¬¡å®Œæˆï¼Œå°†ç›®æ ‡å€¼å’Œå…ƒç´ çš„å·®åœ¨<code>HashMap</code>ä¸­æŸ¥æ‰¾ï¼Œå¦‚æœæ²¡æœ‰åˆ™æ”¾å…¥<code>HashMap</code>ä¸­ä¾›ä¸‹æ¬¡æŸ¥æ‰¾ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">int</span>[] twoSum(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target) &#123;</span><br><span class="line">    Map&lt;Integer, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> complement = target - nums[i];</span><br><span class="line">        <span class="keyword">if</span> (map.containsKey(complement)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[] &#123; map.get(complement), i &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">        map.put(nums[i], i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"No two sum solution"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„å’Œä¸€ä¸ªç›®æ ‡å€¼ï¼Œæ‰¾å‡ºæ•°ç»„ä¸­å’Œä¸ºç›®æ ‡å€¼çš„ä¸¤ä¸ªæ•°ã€‚    &lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥å‡è®¾æ¯ä¸ªè¾“å…¥åªå¯¹åº”ä¸€ç§ç­”æ¡ˆï¼Œä¸”åŒæ ·çš„å…ƒç´ ä¸èƒ½è¢«é‡å¤åˆ©ç”¨ã€‚    &lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>ã€Spring cloudã€‘ç¬¬äº”ç¯‡ Custom Zuul Filter | è‡ªå®šä¹‰è¿‡æ»¤å™¨</title>
    <link href="https://lixhbs.gitee.io/blog/sc-f-e-05/"/>
    <id>https://lixhbs.gitee.io/blog/sc-f-e-05/</id>
    <published>2018-10-30T10:00:00.000Z</published>
    <updated>2018-11-05T01:10:10.790Z</updated>
    
    <content type="html"><![CDATA[<p>Zuulå¯ä»¥åˆ†ä¸ºå››ç§è¿‡æ»¤ç±»å‹ï¼š<code>pre</code>ã€<code>route</code>ã€<code>post</code>å’Œ<code>error</code>ï¼Œå¯ä»¥æ ¹æ®é¡¹ç›®å®é™…æƒ…å†µé€‰æ‹©ä¸åŒçš„è¿‡æ»¤ç±»å‹ï¼Œä¹Ÿå¯ä»¥æŒ‰ç…§<code>filterOrder</code>æ’åºã€‚</p><a id="more"></a><p>æœ¬æ•™ç¨‹åœ¨<a href="https://github.com/lixhbs/SpringCloudEnglish/tree/master/sc-f-e-04" target="_blank" rel="noopener">ã€Spring cloudã€‘ç¬¬å››ç¯‡ Router and Filter | è·¯ç”±å’Œè¿‡æ»¤å™¨ - Zuul</a>çš„åŸºç¡€ä¸Šæ·»åŠ ä»£ç ã€‚</p><h3 id="Custom-Zuul-Filter-Examples"><a href="#Custom-Zuul-Filter-Examples" class="headerlink" title="Custom Zuul Filter Examples"></a>Custom Zuul Filter Examples</h3><p>æœ¬ç¯‡å°†è°ƒè¯•å››ç§è¿‡æ»¤ç±»å‹ã€‚</p><blockquote><p>to classify a filter by type. Standard types in Zuul are â€œpreâ€ for pre-routing filtering, â€œrouteâ€ for routing to an origin, â€œpostâ€ for post-routing filters, â€œerrorâ€ for error handling. We also support a â€œstaticâ€ type for static responses see  StaticResponseFilter. Any filterType made be created or added and run by calling FilterProcessor.runFilters(type)</p></blockquote><ul><li>pre - é¢„è·¯ç”±è¿‡æ»¤</li><li>route - è·¯ç”±ä¸­</li><li>post - è·¯ç”±å</li><li>error - é”™è¯¯å¤„ç†<br><img src="http://paz1myrij.bkt.clouddn.com/b4c1d2d1-547b-3ed5-a8da-5b8876c3a46b.png" alt="ï¼ˆå›¾ç‰‡æ¥æºäº’è”ç½‘ï¼‰"></li></ul><h3 id="How-to-Write-a-Pre-Filter"><a href="#How-to-Write-a-Pre-Filter" class="headerlink" title="How to Write a Pre Filter"></a>How to Write a Pre Filter</h3><blockquote><p>Pre filters set up data in the RequestContext for use in filters downstream. The main use case is to set information required for route filters</p></blockquote><p>é¢„è¿‡æ»¤å™¨åœ¨RequestContextä¸­è®¾ç½®æ•°æ®ï¼Œä»¥ä¾¿åœ¨ä¸‹æ¸¸è¿‡æ»¤å™¨ä¸­ä½¿ç”¨ã€‚ä¸»è¦ç”¨ä¾‹æ˜¯è®¾ç½®è·¯ç”±è¿‡æ»¤å™¨æ‰€éœ€çš„ä¿¡æ¯</p><p>åœ¨<code>server-zuul</code>å·¥ç¨‹ä¸­æ–°å»ºç±»<code>preZuulServer</code><br>å¯ä»¥åœ¨è®¿é—®è·¯æœ‰å‰æ ¡éªŒæ˜¯å¦æœ‰æƒé™è®¿é—®ç­‰æ“ä½œã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">public class preZuulFilter extends ZuulFilter &#123;</span><br><span class="line">   @Override</span><br><span class="line">   public String filterType() &#123;</span><br><span class="line">       return PRE_TYPE;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   @Override</span><br><span class="line">   public int filterOrder() &#123;</span><br><span class="line">       // è¿‡æ»¤é¡ºåº</span><br><span class="line">       return 0;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   @Override</span><br><span class="line">   public boolean shouldFilter() &#123;</span><br><span class="line">       // æ˜¯å¦è¿‡æ»¤</span><br><span class="line">       return true;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   @Override</span><br><span class="line">   public Object run() throws ZuulException &#123;</span><br><span class="line"></span><br><span class="line">       RequestContext requestContext = RequestContext.getCurrentContext();</span><br><span class="line">       HttpServletRequest request = requestContext.getRequest();</span><br><span class="line"></span><br><span class="line">       String name = request.getParameter(&quot;name&quot;);</span><br><span class="line"></span><br><span class="line">       if (StringUtils.isNotEmpty(name) &amp;&amp; name.equals(&quot;CHYIT&quot;)) &#123;</span><br><span class="line">           requestContext.setSendZuulResponse(true);</span><br><span class="line">       &#125; else &#123;</span><br><span class="line">           requestContext.setSendZuulResponse(false);</span><br><span class="line">           try &#123;</span><br><span class="line">               HttpServletResponse res = requestContext.getResponse();</span><br><span class="line">               res.setContentType(&quot;text/html;charset=UTF-8&quot;);</span><br><span class="line">               res.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><span class="line">               res.getWriter().write(&quot;ç”¨æˆ·æ ¡éªŒä¸é€šè¿‡ï¼ï¼ï¼&quot;);</span><br><span class="line">           &#125; catch (IOException e) &#123;</span><br><span class="line">               e.printStackTrace();</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       return null;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä¿®æ”¹<code>eureka-client</code> <code>EurekaClientApplication</code>ç±»</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class EurekaClientApplication &#123;</span><br><span class="line"></span><br><span class="line">   @RequestMapping(&quot;/hi&quot;)</span><br><span class="line">   public String home(String name) &#123;</span><br><span class="line">       return &quot;Hello world, by eureka-client. nameï¼š&quot; + name;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   public static void main(String[] args) &#123;</span><br><span class="line">       new SpringApplicationBuilder(EurekaClientApplication.class).web(true).run(args);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è®¿é—®ï¼š<a href="http://192.168.5.165:8084/ec/hi?name=name" target="_blank" rel="noopener">http://192.168.5.165:8084/ec/hi?name=name</a>    </p><blockquote><p>ç”¨æˆ·æ ¡éªŒä¸é€šè¿‡ï¼ï¼ï¼</p></blockquote><p>æ”¾é—®ï¼š<a href="http://192.168.5.165:8084/ec/hi?name=CHYIT" target="_blank" rel="noopener">http://192.168.5.165:8084/ec/hi?name=CHYIT</a></p><blockquote><p>Hello world, by eureka-client. nameï¼šCHYIT</p></blockquote><p>ç„¶ååˆ›å»ºå¦å¤–ä¸‰ä¸ªç±»å‹çš„è¿‡æ»¤ç±»   </p><p><img src="http://paz1myrij.bkt.clouddn.com/20181101182224.png" alt=""></p><p>å¯åŠ¨é¡ºåº<code>eureka-server</code> &gt; <code>server-zuul</code></p><p>æ”¾é—®ï¼š<a href="http://192.168.5.165:8084/ec/hi?name=CHYIT" target="_blank" rel="noopener">http://192.168.5.165:8084/ec/hi?name=CHYIT</a>   </p><blockquote><p>GET &gt;&gt;&gt; run by PRE_TYPE<br>GET &gt;&gt;&gt; run by ROUTE_TYPE<br>GET &gt;&gt;&gt; run by ERROR_TYPE   </p></blockquote><p>ç„¶åå¯åŠ¨<code>eureka-client</code></p><blockquote><p>GET &gt;&gt;&gt; run by PRE_TYPE<br>GET &gt;&gt;&gt; run by ROUTE_TYPE<br>GET &gt;&gt;&gt; run by POST_TYPE   </p></blockquote><hr><p>æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼Œè·Ÿæˆ‘ç•™è¨€ã€‚<br><img src="http://paz1myrij.bkt.clouddn.com/qrcode_for_gh_22df58e4959f_258.jpg" alt=""></p><p>åšå®¢åœ°å€ï¼š<a href="https://blog.aprcode.com/sc-f-e-05/" target="_blank" rel="noopener">https://blog.aprcode.com/sc-f-e-05/</a><br>æ•™ç¨‹æºç Githubåœ°å€ï¼š<a href="https://github.com/lixhbs/SpringCloudEnglish/tree/master/sc-f-e-05" target="_blank" rel="noopener">sc-f-e-05</a><br>æ•™ç¨‹æºç Giteeåœ°å€ï¼š<a href="https://gitee.com/Lixhbs/SpringCloudEnglish/tree/master/sc-f-e-05" target="_blank" rel="noopener">sc-f-e-05</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Zuulå¯ä»¥åˆ†ä¸ºå››ç§è¿‡æ»¤ç±»å‹ï¼š&lt;code&gt;pre&lt;/code&gt;ã€&lt;code&gt;route&lt;/code&gt;ã€&lt;code&gt;post&lt;/code&gt;å’Œ&lt;code&gt;error&lt;/code&gt;ï¼Œå¯ä»¥æ ¹æ®é¡¹ç›®å®é™…æƒ…å†µé€‰æ‹©ä¸åŒçš„è¿‡æ»¤ç±»å‹ï¼Œä¹Ÿå¯ä»¥æŒ‰ç…§&lt;code&gt;filterOrder&lt;/code&gt;æ’åºã€‚&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>ã€Spring cloudã€‘ç¬¬å››ç¯‡ Router and Filter | è·¯ç”±å’Œè¿‡æ»¤å™¨ - Zuul</title>
    <link href="https://lixhbs.gitee.io/blog/sc-f-e-04/"/>
    <id>https://lixhbs.gitee.io/blog/sc-f-e-04/</id>
    <published>2018-10-29T07:00:01.000Z</published>
    <updated>2018-10-31T09:09:06.529Z</updated>
    
    <content type="html"><![CDATA[<p>è·¯ç”±æ˜¯å¾®æœåŠ¡æ¶æ„ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œ<code>/</code>å¯ä»¥æ˜ å°„åˆ°æ‚¨çš„Webåº”ç”¨ç¨‹åºï¼Œ<code>/api/users</code>æ˜ å°„åˆ°ç”¨æˆ·æœåŠ¡ï¼Œ<code>/api/shop</code>æ˜ å°„åˆ°å•†åº—æœåŠ¡ã€‚ <code>Zuul</code>æ˜¯<code>Netflix</code>çš„åŸºäº<code>JVM</code>çš„è·¯ç”±å™¨å’ŒæœåŠ¡å™¨ç«¯è´Ÿè½½å‡è¡¡å™¨</p><blockquote><p>Routing is an integral part of a microservice architecture. For example, / may be mapped to your web application, /api/users is mapped to the user service and /api/shop is mapped to the shop service. Zuul is a JVM-based router and server-side load balancer from Netflix.</p></blockquote><a id="more"></a><p>æœ¬æ•™ç¨‹åœ¨<a href="https://github.com/lixhbs/SpringCloudEnglish/tree/master/sc-f-e-03" target="_blank" rel="noopener">ã€Spring Cloudã€‘ç¬¬ä¸‰ç¯‡ Client Side Load Balancer | è´Ÿè½½å‡è¡¡ - Ribbon</a>çš„åŸºç¡€ä¸Šæ·»åŠ ä»£ç ã€‚</p><h3 id="How-to-Include-Zuul-é¡¹ç›®ä¸­å¦‚ä½•åŒ…å«-Zuul"><a href="#How-to-Include-Zuul-é¡¹ç›®ä¸­å¦‚ä½•åŒ…å«-Zuul" class="headerlink" title="How to Include Zuul | é¡¹ç›®ä¸­å¦‚ä½•åŒ…å« Zuul"></a>How to Include Zuul | é¡¹ç›®ä¸­å¦‚ä½•åŒ…å« <code>Zuul</code></h3><blockquote><p>To include Zuul in your project, use the starter with a group ID of <code>org.springframework.cloud</code> and an artifact ID of <code>spring-cloud-starter-netflix-zuul</code>. See the <a href="http://projects.spring.io/spring-cloud/" target="_blank" rel="noopener">Spring Cloud Project page</a> for details on setting up your build system with the current Spring Cloud Release Train.</p></blockquote><p>æ·»åŠ <code>group ID</code>åˆ° <code>pom.xml</code>ï¼Œæ³¨æ„è‡ªå·±çš„ç‰ˆæœ¬ã€‚</p><h4 id="Zuulæœ‰å‡ ç§é…ç½®çš„æ–¹å¼"><a href="#Zuulæœ‰å‡ ç§é…ç½®çš„æ–¹å¼" class="headerlink" title="Zuulæœ‰å‡ ç§é…ç½®çš„æ–¹å¼"></a>Zuulæœ‰å‡ ç§é…ç½®çš„æ–¹å¼</h4><p>è·³è¿‡è‡ªåŠ¨æ·»åŠ æœåŠ¡ï¼Œå°†<code>zuul.ignored-services</code> è®¾ç½®æœåŠ¡<code>id</code>åˆ—è¡¨çš„æ¨¡å¼ï¼Œå¦‚<code>zuul.ignored-services = server-consume</code>æˆ–<code>zuul.ignored-services = *</code> å°†å¿½ç•¥æ‰æŒ‡å®šæˆ–æ‰€æœ‰çš„æœåŠ¡ï¼Œä½†æ˜¯å¦‚æœåœ¨è·¯ç”±åˆ—è¡¨ä¸­æ·»åŠ äº†æŒ‡å®šçš„è·¯ç”±ï¼Œå°†ä¸ä¼šè¢«å¿½ç•¥ï¼Œå¦‚ä¸‹æ‰€ç¤º,é™¤<code>users</code>å¤–å°†å¿½ç•¥æ‰€æœ‰æœåŠ¡ã€‚ </p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">zuul:</span></span><br><span class="line"><span class="attr">  ignoredServices:</span> <span class="string">'*'</span></span><br><span class="line"><span class="attr">  routes:</span></span><br><span class="line"><span class="attr">    users:</span> <span class="string">/myusers/**</span></span><br></pre></td></tr></table></figure><p>è¦å¢åŠ æˆ–è€…ä¿®æ”¹è·¯ç”±å™¨è§„åˆ™ï¼Œå¯ä»¥æ·»åŠ å¦‚ä¸‹é…ç½®ï¼Œæµè§ˆå™¨è®¿é—®<code>/myusers</code>ä¼šè½¬å‘åˆ°<code>users</code>æœåŠ¡ï¼Œå¦‚ï¼š<code>/myusers/101</code>è½¬å‘åˆ°<code>/101</code>ï¼‰ã€‚<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">zuul:</span></span><br><span class="line"><span class="attr">  routes:</span></span><br><span class="line"><span class="attr">    users:</span> <span class="string">/myusers/**</span></span><br></pre></td></tr></table></figure></p><p>è¦å¯¹è·¯ç”±å™¨è¿›è¡Œæ›´ç²¾ç»†çš„æ“ä½œï¼Œå¯ä»¥æŒ‡å®šç‹¬ç«‹çš„è·¯å¾„å’ŒServerIDï¼ˆEureka æœåŠ¡å‘ç°ï¼‰ï¼Œå¦‚ä¸‹é…ç½®ï¼š<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">zuul:</span></span><br><span class="line"><span class="attr">  routes:</span></span><br><span class="line"><span class="attr">    users:</span></span><br><span class="line"><span class="attr">      path:</span> <span class="string">/myusers/**</span></span><br><span class="line"><span class="attr">      serviceId:</span> <span class="string">users_service</span></span><br></pre></td></tr></table></figure></p><p>ä¹Ÿå¯ä»¥ç›´æ¥é…ç½®httpè·¯å¾„çš„ç‰©ç†ä½ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">zuul:</span></span><br><span class="line"><span class="attr"> routes:</span></span><br><span class="line"><span class="attr">   users:</span></span><br><span class="line"><span class="attr">     path:</span> <span class="string">/myusers/**</span></span><br><span class="line"><span class="attr">     url:</span> <span class="attr">http://example.com/users_service</span></span><br></pre></td></tr></table></figure><h3 id="å®é™…æ“ä½œ"><a href="#å®é™…æ“ä½œ" class="headerlink" title="å®é™…æ“ä½œ"></a>å®é™…æ“ä½œ</h3><p>åˆ›å»º<code>server-zuul</code>å·¥ç¨‹<br><img src="http://paz1myrij.bkt.clouddn.com/20181029161740.png" alt=""></p><p>å®Œæ•´<code>pom.xml</code><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.cyinfotech<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>server-zuul<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>server-zuul<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.cyinfotech<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sc-f-e-04<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-zuul<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--Eureka-Client--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>ä¿®æ”¹çˆ¶å·¥ç¨‹<code>pom.xml</code>ï¼Œåœ¨<code>modules</code>æ·»åŠ <code>server-ribbon</code> </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">module</span>&gt;</span>server-zuul<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¿®æ”¹<code>ServerZuulApplication</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">package com.cyinfotech.serverzuul;</span><br><span class="line">   </span><br><span class="line">   import org.springframework.boot.SpringApplication;</span><br><span class="line">   import org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line">   import org.springframework.cloud.client.discovery.EnableDiscoveryClient;</span><br><span class="line">   import org.springframework.cloud.netflix.zuul.EnableZuulProxy;</span><br><span class="line">   </span><br><span class="line">   @SpringBootApplication</span><br><span class="line">   @EnableDiscoveryClient</span><br><span class="line">   @EnableZuulProxy</span><br><span class="line">   public class ServerZuulApplication &#123;</span><br><span class="line">   </span><br><span class="line">       public static void main(String[] args) &#123;</span><br><span class="line">           SpringApplication.run(ServerZuulApplication.class, args);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p><p>åœ¨<code>application.yml</code>ä¸­æ·»åŠ è·¯ç”±è§„åˆ™</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  application:</span></span><br><span class="line"><span class="attr">    name:</span> <span class="string">server-zuul</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">8084</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line"><span class="attr">  client:</span></span><br><span class="line"><span class="attr">    serviceUrl:</span></span><br><span class="line"><span class="attr">      defaultZone:</span> <span class="attr">http://localhost:8761/eureka/</span></span><br><span class="line"><span class="attr">zuul:</span></span><br><span class="line"><span class="attr">  routes:</span></span><br><span class="line"><span class="attr">    aa:</span></span><br><span class="line"><span class="attr">      path:</span> <span class="string">/hy/**</span></span><br><span class="line"><span class="attr">      serviceId:</span> <span class="string">server-hystrix</span></span><br><span class="line"><span class="attr">    bb:</span></span><br><span class="line"><span class="attr">      path:</span> <span class="string">/ec/**</span></span><br><span class="line"><span class="attr">      serviceId:</span> <span class="string">eureka-client</span></span><br></pre></td></tr></table></figure><p>åˆ†åˆ«åœ¨<code>server-hystrix</code>å’Œ<code>eureka-client</code>ä¸­æ·»åŠ <code>hi</code>æœåŠ¡è·¯å¾„</p><p><strong>ServerHystrixApplication</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">package com.cyinfotech.serverhystrix;</span><br><span class="line"></span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.beans.factory.annotation.Value;</span><br><span class="line">import org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line">import org.springframework.boot.builder.SpringApplicationBuilder;</span><br><span class="line">import org.springframework.cloud.client.circuitbreaker.EnableCircuitBreaker;</span><br><span class="line">import org.springframework.cloud.client.discovery.EnableDiscoveryClient;</span><br><span class="line">import org.springframework.context.annotation.Configuration;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line">import org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line">import java.util.Map;</span><br><span class="line"></span><br><span class="line">@SpringBootApplication</span><br><span class="line">@EnableCircuitBreaker</span><br><span class="line">@EnableDiscoveryClient</span><br><span class="line">@RestController</span><br><span class="line">public class ServerHystrixApplication &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        new SpringApplicationBuilder(ServerHystrixApplication.class).web(true).run(args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    StoreIntegration storeIntegration;</span><br><span class="line"></span><br><span class="line">    @Value(&quot;$&#123;server.port&#125;&quot;)</span><br><span class="line">    String port;</span><br><span class="line"></span><br><span class="line">    @RequestMapping(&quot;/&quot;)</span><br><span class="line">    public Object getHi (@RequestParam String name)&#123;</span><br><span class="line"></span><br><span class="line">        return &quot;HI - &quot; + name + &quot;ï¼Œ port:&quot; + port + &quot;, By server-hystrix.&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @RequestMapping(&quot;/hi&quot;)</span><br><span class="line">    public Object hi ()&#123;</span><br><span class="line"></span><br><span class="line">        return &quot;HI, By server-hystrix.&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>EurekaClientApplication</strong></p><pre><code>package com.cyinfotech.eurekaclient;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.boot.builder.SpringApplicationBuilder;import org.springframework.cloud.client.circuitbreaker.EnableCircuitBreaker;import org.springframework.cloud.client.discovery.EnableDiscoveryClient;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;@SpringBootApplication@EnableDiscoveryClient@RestControllerpublic class EurekaClientApplication {    @RequestMapping(&quot;/hi&quot;)    public String home() {        return &quot;Hello world, by eureka-client.&quot;;    }    public static void main(String[] args) {        new SpringApplicationBuilder(EurekaClientApplication.class).web(true).run(args);    }}</code></pre><p>è®¿é—®è·¯ç”±è·¯å¾„:<code>http://localhost:8084/ec/hi</code></p><blockquote><p>Hello world, by eureka-client.</p></blockquote><p>è®¿é—®è·¯ç”±è·¯å¾„:<code>http://localhost:8084/hy/hi</code></p><blockquote><p>HI, By server-hystrix.</p></blockquote><p>æœ¬ç¯‡æ•™ç¨‹å°±åˆ°è¿™ï¼Œè‡³äºæ›´æ·±çš„æ•™ç¨‹æˆ‘ä¼šåŠ ç´§å­¦ä¹ ç„¶åå†™å‡ºæ¥ã€‚</p><hr><p>æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼Œè·Ÿæˆ‘ç•™è¨€ã€‚<br><img src="http://paz1myrij.bkt.clouddn.com/qrcode_for_gh_22df58e4959f_258.jpg" alt=""></p><p>åšå®¢åœ°å€ï¼š<a href="https://blog.aprcode.com/sc-f-e-04/" target="_blank" rel="noopener">https://blog.aprcode.com/sc-f-e-04/</a><br>æ•™ç¨‹æºç Githubåœ°å€ï¼š<a href="https://github.com/lixhbs/SpringCloudEnglish/tree/master/sc-f-e-04" target="_blank" rel="noopener">sc-f-e-04</a><br>æ•™ç¨‹æºç Giteeåœ°å€ï¼š<a href="https://gitee.com/Lixhbs/SpringCloudEnglish/tree/master/sc-f-e-04" target="_blank" rel="noopener">sc-f-e-04</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è·¯ç”±æ˜¯å¾®æœåŠ¡æ¶æ„ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œ&lt;code&gt;/&lt;/code&gt;å¯ä»¥æ˜ å°„åˆ°æ‚¨çš„Webåº”ç”¨ç¨‹åºï¼Œ&lt;code&gt;/api/users&lt;/code&gt;æ˜ å°„åˆ°ç”¨æˆ·æœåŠ¡ï¼Œ&lt;code&gt;/api/shop&lt;/code&gt;æ˜ å°„åˆ°å•†åº—æœåŠ¡ã€‚ &lt;code&gt;Zuul&lt;/code&gt;æ˜¯&lt;code&gt;Netflix&lt;/code&gt;çš„åŸºäº&lt;code&gt;JVM&lt;/code&gt;çš„è·¯ç”±å™¨å’ŒæœåŠ¡å™¨ç«¯è´Ÿè½½å‡è¡¡å™¨&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Routing is an integral part of a microservice architecture. For example, / may be mapped to your web application, /api/users is mapped to the user service and /api/shop is mapped to the shop service. Zuul is a JVM-based router and server-side load balancer from Netflix.&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>ã€Spring Cloudã€‘ç¬¬ä¸‰ç¯‡ Client Side Load Balancer | è´Ÿè½½å‡è¡¡ - Ribbon</title>
    <link href="https://lixhbs.gitee.io/blog/sc-f-e-03/"/>
    <id>https://lixhbs.gitee.io/blog/sc-f-e-03/</id>
    <published>2018-10-28T03:01:13.588Z</published>
    <updated>2018-10-28T03:01:13.588Z</updated>
    
    <content type="html"><![CDATA[<p>Ribbonæ˜¯ä¸€ä¸ªè´Ÿè½½å‡è¡¡çš„å®¢æˆ·ç«¯ï¼Œç”¨æ¥æé«˜ç³»ç»Ÿçš„å¤„ç†èƒ½åŠ›ï¼Œåœ¨ä¹‹åçš„ç« èŠ‚ä¼šè®²åˆ°<code>Feign</code>å®ƒå·²ç»åŒ…å«<code>Ribbon</code>ã€‚</p><a id="more"></a>  <p>æœ¬æ•™ç¨‹åœ¨<a href="https://github.com/lixhbs/SpringCloudEnglish/tree/master/sc-f-e-02" target="_blank" rel="noopener">ã€Spring Cloudã€‘ç¬¬äºŒç¯‡ Circuit Breaker | æ–­è·¯å™¨ - Hystrix</a>çš„åŸºç¡€ä¸Šæ·»åŠ ä»£ç ã€‚</p><h1 id="word-amp-phrase"><a href="#word-amp-phrase" class="headerlink" title="word &amp; phrase"></a>word &amp; phrase</h1><ul><li>load balancer è´Ÿè½½å‡è¡¡å™¨</li><li>section ç« èŠ‚</li><li>A central concept æ ¸å¿ƒæƒ³æ³•</li></ul><h3 id="åˆ›å»ºå·¥ç¨‹-server-ribbon"><a href="#åˆ›å»ºå·¥ç¨‹-server-ribbon" class="headerlink" title="åˆ›å»ºå·¥ç¨‹ server-ribbon"></a>åˆ›å»ºå·¥ç¨‹ <code>server-ribbon</code></h3><p><img src="http://paz1myrij.bkt.clouddn.com/20181028090945.png" alt=""></p><h3 id="How-to-Include-Ribbon-é¡¹ç›®ä¸­å¦‚ä½•åŒ…å«-Ribbon"><a href="#How-to-Include-Ribbon-é¡¹ç›®ä¸­å¦‚ä½•åŒ…å«-Ribbon" class="headerlink" title="How to Include Ribbon | é¡¹ç›®ä¸­å¦‚ä½•åŒ…å« Ribbon"></a>How to Include Ribbon | é¡¹ç›®ä¸­å¦‚ä½•åŒ…å« <code>Ribbon</code></h3><blockquote><p>To include Ribbon in your project, use the starter with a group ID of <code>org.springframework.cloud</code> and an artifact ID of <code>spring-cloud-starter-netflix-ribbon</code>. See the <a href="http://projects.spring.io/spring-cloud/" target="_blank" rel="noopener">Spring Cloud Project page</a> for details on setting up your build system with the current Spring Cloud Release Train.</p></blockquote><p>æ·»åŠ <code>group ID</code>åˆ° <code>pom.xml</code>ï¼Œæ³¨æ„è‡ªå·±çš„ç‰ˆæœ¬ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.cyinfotech<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>server-ribbon<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>server-ribbon<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.cyinfotech<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sc-f-e-03<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-ribbon<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¿®æ”¹çˆ¶å·¥ç¨‹<code>pom.xml</code>ï¼Œåœ¨<code>modules</code>æ·»åŠ <code>server-ribbon</code> </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">module</span>&gt;</span>server-ribbon<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ <code>application.yml</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">8783</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line"><span class="attr">  client:</span></span><br><span class="line"><span class="attr">    serviceUrl:</span></span><br><span class="line"><span class="attr">      defaultZone:</span> <span class="attr">http://localhost:8761/eureka/</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  application:</span></span><br><span class="line"><span class="attr">    name:</span> <span class="string">server-ribbon</span></span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹å¯åŠ¨ç±»<code>ServerRibbonApplication</code>ï¼Œæ·»åŠ <code>RestTemplate</code>    </p></li></ul><p><code>@LoadBalanced</code>çš„ä½œç”¨æ˜¯è®©è¿™ä¸ªè¯·æ±‚æœ‰è´Ÿè½½å‡è¡¡çš„èƒ½åŠ›ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cyinfotech.serverribbon;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.client.discovery.EnableDiscoveryClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.client.loadbalancer.LoadBalanced;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.client.RestTemplate;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServerRibbonApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(ServerRibbonApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@LoadBalanced</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RestTemplate <span class="title">restTemplate</span> <span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> RestTemplate();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>æ·»åŠ <code>HelloCyInfo</code>æœåŠ¡ç±»ï¼Œè°ƒç”¨å…¶ä»–å®ä¾‹ï¼Œå®ç°è´Ÿè½½å‡è¡¡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">package com.cyinfotech.serverribbon;</span><br><span class="line"></span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.stereotype.Service;</span><br><span class="line">import org.springframework.web.client.RestTemplate;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @author ç…®é…’æ³›èˆŸ.</span><br><span class="line"> * @title</span><br><span class="line"> * @program sc-f-e-03</span><br><span class="line"> * @description</span><br><span class="line"> * @createtime 2018-10-28 09:38</span><br><span class="line"> */</span><br><span class="line">@Service</span><br><span class="line">public class HelloCyInfo &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line">    public String helloCYIT(String name) &#123;</span><br><span class="line">        return restTemplate.getForObject(&quot;http://server-hystrix/?name=&quot;+name,String.class);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ <code>RibbonController</code>ç±»ï¼Œè°ƒç”¨<code>service</code></p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">package com.cyinfotech.serverribbon;</span><br><span class="line"></span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line">import org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @author ç…®é…’æ³›èˆŸ.</span><br><span class="line"> * @title</span><br><span class="line"> * @program sc-f-e-03</span><br><span class="line"> * @description</span><br><span class="line"> * @createtime 2018-10-28 09:44</span><br><span class="line"> */</span><br><span class="line">@RestController</span><br><span class="line">public class RibbonController &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    HelloCyInfo helloCyInfo;</span><br><span class="line"></span><br><span class="line">    @RequestMapping(&quot;/&quot;)</span><br><span class="line">    public String hiCYIT ( @RequestParam String name) &#123;</span><br><span class="line"></span><br><span class="line">        return helloCyInfo.helloCYIT(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>ä¸ºäº†æ•ˆæœæ˜æ˜¾æˆ‘ä»¬ä¿®æ”¹ä¸‹<code>server-hystrix</code>çš„ä»£ç ï¼Œå°†å®ä¾‹çš„ç«¯å£æ‰“å°å‡ºæ¥ï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cyinfotech.serverhystrix;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.builder.SpringApplicationBuilder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.client.circuitbreaker.EnableCircuitBreaker;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.client.discovery.EnableDiscoveryClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableCircuitBreaker</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServerHystrixApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> SpringApplicationBuilder(ServerHystrixApplication.class).web(<span class="keyword">true</span>).run(args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    StoreIntegration storeIntegration;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;server.port&#125;"</span>)</span><br><span class="line">    String port;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getHi</span> <span class="params">(@RequestParam String name)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"HI - "</span> + name + <span class="string">"ï¼Œ port:"</span> + port + <span class="string">", By server-hystrix."</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å…ˆå¯åŠ¨ <code>eureka-server</code>ï¼Œå†å¯åŠ¨ <code>server-hystrix</code>, ç„¶åå¯åŠ¨ <code>server-ribbon</code> è®¿é—®æµè§ˆå™¨ <code>http://localhost:8783/?name=cyit</code></p><blockquote><p>HI - cyitï¼Œ port:8782, By server-hystrix.</p></blockquote></li><li><p>ä¿®æ”¹å®ä¾‹<code>server-hystrix</code>çš„ç«¯å£ç„¶åå¯åŠ¨ï¼Œå¦‚æœå¯åŠ¨ä¸äº†éœ€è¦åœ¨<code>Configurations</code>å»æ‰<code>Single instance only</code>.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">8786</span></span><br></pre></td></tr></table></figure></li></ul><p>`</p><ul><li>å¤šæ¬¡è®¿é—®<code>http://localhost:8783/?name=cyit</code> ï¼Œ é¡µé¢ä¼šäº¤æ›¿æ˜¾ç¤ºç«¯å£å·ã€‚<blockquote><p>HI - cyitï¼Œ port:8782, By server-hystrix.<br>HI - cyitï¼Œ port:8786, By server-hystrix.</p></blockquote></li></ul><p>æœ¬ç¯‡æ•™ç¨‹å°±åˆ°è¿™ï¼Œè‡³äºæ›´æ·±çš„æ•™ç¨‹æˆ‘ä¼šåŠ ç´§å­¦ä¹ ç„¶åå†™å‡ºæ¥ã€‚</p><p>æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼Œè·Ÿæˆ‘ç•™è¨€ã€‚<br><img src="http://paz1myrij.bkt.clouddn.com/qrcode_for_gh_22df58e4959f_258.jpg" alt=""></p><hr><p>åšå®¢åœ°å€ï¼š<a href="https://blog.aprcode.com/sc-f-e-03/" target="_blank" rel="noopener">https://blog.aprcode.com/sc-f-e-03/</a><br>æ•™ç¨‹æºç Githubåœ°å€ï¼š<a href="https://github.com/lixhbs/SpringCloudEnglish/tree/master/sc-f-e-03" target="_blank" rel="noopener">sc-f-e-03</a><br>æ•™ç¨‹æºç Giteeåœ°å€ï¼š<a href="https://gitee.com/Lixhbs/SpringCloudEnglish/tree/master/sc-f-e-03" target="_blank" rel="noopener">sc-f-e-03</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Ribbonæ˜¯ä¸€ä¸ªè´Ÿè½½å‡è¡¡çš„å®¢æˆ·ç«¯ï¼Œç”¨æ¥æé«˜ç³»ç»Ÿçš„å¤„ç†èƒ½åŠ›ï¼Œåœ¨ä¹‹åçš„ç« èŠ‚ä¼šè®²åˆ°&lt;code&gt;Feign&lt;/code&gt;å®ƒå·²ç»åŒ…å«&lt;code&gt;Ribbon&lt;/code&gt;ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Spring Cloud" scheme="https://lixhbs.gitee.io/blog/categories/Spring-Cloud/"/>
    
      <category term="Ribbon" scheme="https://lixhbs.gitee.io/blog/categories/Spring-Cloud/Ribbon/"/>
    
    
      <category term="Spring Cloud" scheme="https://lixhbs.gitee.io/blog/tags/Spring-Cloud/"/>
    
  </entry>
  
  <entry>
    <title>ã€Spring Cloudã€‘ç¬¬äºŒç¯‡ Circuit Breaker | æ–­è·¯å™¨ - Hystrix</title>
    <link href="https://lixhbs.gitee.io/blog/sc-f-e-02/"/>
    <id>https://lixhbs.gitee.io/blog/sc-f-e-02/</id>
    <published>2018-10-28T02:42:57.770Z</published>
    <updated>2018-10-28T02:42:57.770Z</updated>
    
    <content type="html"><![CDATA[<p>æœåŠ¡æ„å¤–è·ªæ‰åçš„å¤„ç†æ–¹å¼ï¼Œä¸è‡³äºæ‰€æœ‰çš„åŠŸèƒ½å¤±æ•ˆã€‚</p><a id="more"></a>  <p>å®˜æ–¹ç½‘ç«™çš„è¿™ä¸ªå›¾å¾ˆå½¢è±¡,å½“æœåŠ¡è·ªæ‰åæœ‰ä¸€ä¸ªfallbackè¿”å›ã€‚<br><img src="http://paz1myrij.bkt.clouddn.com/HystrixFallback.png" alt=""></p><p>æœ¬æ•™ç¨‹åœ¨<a href="https://github.com/lixhbs/SpringCloudEnglish/tree/master/sc-f-e-01" target="_blank" rel="noopener">ã€å‚ç…§å®˜æ–¹è‹±æ–‡æ–‡æ¡£å­¦Spring Cloudã€‘ç¬¬ä¸€ç¯‡ Service Discovery | æœåŠ¡å‘ç° - Eureka</a>çš„åŸºç¡€ä¸Šæ·»åŠ ä»£ç ã€‚</p><h1 id="word-amp-phrase"><a href="#word-amp-phrase" class="headerlink" title="word &amp; phrase"></a>word &amp; phrase</h1><ul><li>Circuit Breaker ä¸­æ–­å›è·¯</li></ul><h3 id="åˆ›å»ºå·¥ç¨‹-server-hystrix"><a href="#åˆ›å»ºå·¥ç¨‹-server-hystrix" class="headerlink" title="åˆ›å»ºå·¥ç¨‹ server-hystrix"></a>åˆ›å»ºå·¥ç¨‹ <code>server-hystrix</code></h3><p><img src="http://paz1myrij.bkt.clouddn.com/20181024090732.png" alt=""></p><h3 id="How-to-Include-Hystrix-é¡¹ç›®ä¸­å¦‚ä½•åŒ…å«-Hystrix"><a href="#How-to-Include-Hystrix-é¡¹ç›®ä¸­å¦‚ä½•åŒ…å«-Hystrix" class="headerlink" title="How to Include Hystrix | é¡¹ç›®ä¸­å¦‚ä½•åŒ…å« Hystrix"></a>How to Include Hystrix | é¡¹ç›®ä¸­å¦‚ä½•åŒ…å« <code>Hystrix</code></h3><blockquote><p>To include Hystrix in your project, use the starter with a group ID of <code>org.springframework.cloud</code> and a artifact ID of <code>spring-cloud-starter-netflix-hystrix</code>. See the Spring Cloud Project page for details on setting up your build system with the current Spring Cloud Release Train.</p></blockquote><p>å¦‚ä½•åŒ…å«ï¼Ÿç¬¬ä¸€æ­¥éƒ½ä¸€æ ·ï¼Œæ·»åŠ <code>group ID</code>åˆ° <code>pom.xml</code>ï¼Œæ³¨æ„è‡ªå·±çš„ç‰ˆæœ¬ï¼Œæˆ‘å°±ä¸åœ¨ç¿»è¯‘äº†ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.cyinfotech<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>server-hystrix<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>server-hystrix<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.cyinfotech<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sc-f-e-02<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-hystrix<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!--Eureka-Client--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¿®æ”¹çˆ¶å·¥ç¨‹<code>pom.xml</code>ï¼Œåœ¨<code>modules</code>æ·»åŠ <code>server-hystrix</code> </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">module</span>&gt;</span>server-hystrix<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>The <code>@HystrixCommand</code> is provided by a Netflix contrib library called â€œjavanicaâ€. Spring Cloud automatically wraps Spring beans with that annotation in a proxy that is connected to the Hystrix circuit breaker. The circuit breaker calculates when to open and close the circuit and what to do in case of a failure.</p></blockquote><p>å®˜æ–¹ç»™çš„ä¾‹å­å¾ˆç›´è§‚ï¼Œæ·»åŠ <code>@HystrixCommand</code>æ³¨è§£ï¼Œå½“æœåŠ¡è°ƒç”¨å¤±è´¥çš„æ—¶å€™ä¼šè°ƒç”¨<code>fallbackMethod</code>çš„æœåŠ¡ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">public class StoreIntegration &#123;</span><br><span class="line"></span><br><span class="line">    @HystrixCommand(fallbackMethod = &quot;defaultStores&quot;)</span><br><span class="line">    public Object getStores(Map&lt;String, Object&gt; parameters) &#123;</span><br><span class="line">        //do stuff that might fail</span><br><span class="line">        // åšé‚£äº›å¯èƒ½å¤±è´¥çš„äº‹æƒ…</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Object defaultStores(Map&lt;String, Object&gt; parameters) &#123;</span><br><span class="line">        return /* something useful */;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä¿®æ”¹ä¸‹å®˜æ–¹<code>example</code>   </p><ul><li><p>æ–°å»ºç±»<code>StoreIntegration</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">package com.cyinfotech.serverhystrix;</span><br><span class="line"></span><br><span class="line">import com.netflix.hystrix.contrib.javanica.annotation.HystrixCommand;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">import java.util.Map;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @author ç…®é…’æ³›èˆŸ.</span><br><span class="line"> * @title Component</span><br><span class="line"> * @program sc-f-e-02</span><br><span class="line"> * @description</span><br><span class="line"> * @createtime 2018-10-24 09:28</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">@Component</span><br><span class="line">public class StoreIntegration &#123;</span><br><span class="line"></span><br><span class="line">    @HystrixCommand(fallbackMethod = &quot;defaultStores&quot;)</span><br><span class="line">    public Object getStores(Map&lt;String, Object&gt; parameters) &#123;</span><br><span class="line"></span><br><span class="line">        //do stuff that might fail</span><br><span class="line">        throw new RuntimeException(&quot;call service fail.&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Object defaultStores(Map&lt;String, Object&gt; parameters) &#123;</span><br><span class="line"></span><br><span class="line">        /* something useful */</span><br><span class="line">        return &quot;Sorry, error!!! fallback defaultStores serviceï¼&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹å¯åŠ¨ç±»<code>ServerHystrixApplication</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cyinfotech.serverhystrix;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.builder.SpringApplicationBuilder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.client.circuitbreaker.EnableCircuitBreaker;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableCircuitBreaker</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServerHystrixApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> SpringApplicationBuilder(ServerHystrixApplication.class).web(<span class="keyword">true</span>).run(args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    StoreIntegration storeIntegration;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getHi</span> <span class="params">(Map&lt;String, Object&gt; parameters)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> storeIntegration.getStores(parameters);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ <code>application.yml</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">8782</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line"><span class="attr">  client:</span></span><br><span class="line"><span class="attr">    serviceUrl:</span></span><br><span class="line"><span class="attr">      defaultZone:</span> <span class="attr">http://localhost:8761/eureka/</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  application:</span></span><br><span class="line"><span class="attr">    name:</span> <span class="string">server-hystrix</span></span><br></pre></td></tr></table></figure></li><li><p>å…ˆå¯åŠ¨ <code>eureka-server</code>ï¼Œå†å¯åŠ¨ <code>server-hystrix</code>, è®¿é—®æµè§ˆå™¨ <code>http://localhost:8782/</code>ï¼Œæ˜¾ç¤ºçš„æ˜¯è°ƒç”¨<code>defaultStores</code>æœåŠ¡çš„è¿”å›å€¼.</p><blockquote><p>Sorry, error!!! fallback defaultStores serviceï¼</p></blockquote></li></ul><p>æœ¬ç¯‡æ•™ç¨‹å°±åˆ°è¿™ï¼Œè‡³äºæ›´æ·±çš„æ•™ç¨‹æˆ‘ä¼šåŠ ç´§å­¦ä¹ ç„¶åå†™å‡ºæ¥ã€‚</p><p>æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼Œè·Ÿæˆ‘ç•™è¨€ã€‚<br><img src="http://paz1myrij.bkt.clouddn.com/qrcode_for_gh_22df58e4959f_258.jpg" alt=""></p><hr><p>åšå®¢åœ°å€ï¼š<a href="https://blog.aprcode.com/sc-f-e-02/" target="_blank" rel="noopener">https://blog.aprcode.com/sc-f-e-02/</a><br>æ•™ç¨‹æºç Githubåœ°å€ï¼š<a href="https://github.com/lixhbs/SpringCloudEnglish/tree/master/sc-f-e-02" target="_blank" rel="noopener">sc-f-e-02</a><br>æ•™ç¨‹æºç Giteeåœ°å€ï¼š<a href="https://gitee.com/Lixhbs/SpringCloudEnglish/tree/master/sc-f-e-02" target="_blank" rel="noopener">sc-f-e-02</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœåŠ¡æ„å¤–è·ªæ‰åçš„å¤„ç†æ–¹å¼ï¼Œä¸è‡³äºæ‰€æœ‰çš„åŠŸèƒ½å¤±æ•ˆã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Spring Cloud" scheme="https://lixhbs.gitee.io/blog/categories/Spring-Cloud/"/>
    
    
      <category term="Spring Cloud" scheme="https://lixhbs.gitee.io/blog/tags/Spring-Cloud/"/>
    
  </entry>
  
  <entry>
    <title>ã€Spring Cloudã€‘ç¬¬ä¸€ç¯‡ Service Discovery | æœåŠ¡å‘ç° - Eureka</title>
    <link href="https://lixhbs.gitee.io/blog/sc-f-e-01/"/>
    <id>https://lixhbs.gitee.io/blog/sc-f-e-01/</id>
    <published>2018-10-22T10:41:43.000Z</published>
    <updated>2018-10-30T10:01:32.331Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Eureka æä¾›æœåŠ¡çš„æ³¨å†Œï¼ŒæœåŠ¡å¯ä»¥é€šè¿‡æ³¨å†Œåˆ°<code>Eureka</code>ç„¶åè¢«å…¶ä»–åº”ç”¨è°ƒç”¨ã€‚</p></blockquote><a id="more"></a><p>çœ‹åˆ°Spring Cloud çš„æ–‡æ¡£é‡Œé¢æ˜¯å…ˆè®²çš„æ˜¯<code>Spring Cloud Config</code> ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œæˆ–è€…è¯´å‚è€ƒå…¶ä»–å¤§ä½¬çš„æ•™ç¨‹ï¼Œæˆ‘ä¹Ÿä¼šæŠŠConfigæ”¾åˆ°åé¢å†™ã€‚</p><h1 id="word-amp-phrase"><a href="#word-amp-phrase" class="headerlink" title="word &amp; phrase"></a>word &amp; phrase</h1><ul><li>include       ç¡®å®æ˜¯åŒ…å«çš„æ„æ€ï¼Œä½†æ˜¯æˆ‘è§‰å¾—ç¿»è¯‘ï¼ˆæ ¹æ®è¯­å¢ƒå»ç¿»è¯‘ï¼‰æˆä½¿ç”¨æ˜¯ä¸æ˜¯æ›´èˆ’æœäº›</li><li>setting up    é…ç½®</li><li>provides      æä¾›</li><li>meta-data     å…ƒæ•°æ®</li><li>such as       ä¾‹å¦‚</li><li>Note          æ³¨æ„</li></ul><h1 id="Spring-Cloud-Netflix"><a href="#Spring-Cloud-Netflix" class="headerlink" title="Spring Cloud Netflix"></a>Spring Cloud Netflix</h1><p><a href="https://en.wikipedia.org/wiki/Netflix" target="_blank" rel="noopener">Netflix</a> æ˜¯ä¸€å®¶åª’ä½“æä¾›å•†ï¼Œåº”è¯¥å¾ˆå‰å®³ï¼</p><p>å®˜ç½‘æ–‡æ¡£ä¸­å…ˆåˆ—å‡ºçš„æ˜¯Eurekaå®¢æˆ·ç«¯ï¼Œæˆ‘å°è¯•å…ˆå†™<code>Eureka Client</code> å‘ç°ä¼šæç¤ºä»¥ä¸‹é”™è¯¯ï¼Œåº”è¯¥æ˜¯åœ¨è¯·æ±‚ <code>Eureka server</code>çš„æ—¶å€™æŠ¥é”™ï¼Œ å› ä¸ºæˆ‘ä»¬æ ¹æœ¬æ²¡æœ‰åˆ›å»ºã€‚æ‰€ä»¥æˆ‘å…ˆçœ‹<code>Eureka server</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NFO 25402 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server</span><br><span class="line">ERROR 25402 --- [main] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error</span><br></pre></td></tr></table></figure></p><h3 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h3><p><strong>å®˜æ–¹è¯´æ˜ Finchleyçš„æ„å»ºå’Œå·¥ä½œç¯å¢ƒåº”è¯¥æ˜¯ <code>Spring Boot 2.0.x</code>, é¢„è®¡ä¸ä¼šåœ¨<code>Spring Boot 1.5.x</code> ä¸­ä½¿ç”¨ã€‚</strong></p><blockquote><p>Finchley builds and works with Spring Boot 2.0.x, and is not expected to work with Spring Boot 1.5.x.       </p></blockquote><p><strong>Spring Cloud éœ€è¦ä½¿ç”¨Spring Bootï¼Œå¦‚æœä¸ä¼šåˆ›å»ºSpring Booté¡¹ç›®çš„çœ‹è¿™é‡Œã€Š<a href="../Spring-Boot-SI">Spring Boot | ä½¿ç”¨Spring Initializrå¿«é€Ÿåˆ›å»º</a>ã€‹ï¼</strong></p><h3 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h3><ul><li><p>æ–°å»ºå¥½Spring Bootåï¼Œåˆ é™¤srcæ–‡ä»¶<br><img src="http://paz1myrij.bkt.clouddn.com/20181016165813.png" alt=""></p></li><li><p>åœ¨<code>pom.xml</code> ä¸­æ·»åŠ  <code>Spring Cloud</code> é…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.cyinfotech<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sc-f-e-01<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>sc-f-e-01<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.reporting.outputEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">         <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Spring Cloud --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>Finchley.SR1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="Service-Discovery-Eureka-Server-æœåŠ¡å‘ç°ï¼šEurekaæœåŠ¡ç«¯"><a href="#Service-Discovery-Eureka-Server-æœåŠ¡å‘ç°ï¼šEurekaæœåŠ¡ç«¯" class="headerlink" title="Service Discovery: Eureka Server | æœåŠ¡å‘ç°ï¼šEurekaæœåŠ¡ç«¯"></a>Service Discovery: Eureka Server | æœåŠ¡å‘ç°ï¼šEurekaæœåŠ¡ç«¯</h2><h3 id="How-to-Include-Eureka-Server-é¡¹ç›®ä¸­å¦‚ä½•åŒ…å«-Eureka-Server"><a href="#How-to-Include-Eureka-Server-é¡¹ç›®ä¸­å¦‚ä½•åŒ…å«-Eureka-Server" class="headerlink" title="How to Include Eureka Server | é¡¹ç›®ä¸­å¦‚ä½•åŒ…å« Eureka Server"></a>How to Include Eureka Server | é¡¹ç›®ä¸­å¦‚ä½•åŒ…å« <code>Eureka Server</code></h3><ul><li><p>å³é”®é¡¹ç›® &gt; New &gt; Module æ–°å»º <code>eureka-server</code> å­å·¥ç¨‹<br><img src="http://paz1myrij.bkt.clouddn.com/20181016170056.png" alt=""><br><img src="http://paz1myrij.bkt.clouddn.com/20181016171250.png" alt=""></p></li><li><p>ä¿®æ”¹çˆ¶å·¥ç¨‹<code>pom.xml</code>æ–‡ä»¶, æ·»åŠ å­å·¥ç¨‹ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span>&gt;</span>eureka-server<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><blockquote><p>To include Eureka Server in your project, use the starter with a group ID of <code>org.springframework.cloud</code> and an <code>artifact ID of spring-cloud-starter-netflix-eureka-server</code>. See the <a href="http://projects.spring.io/spring-cloud/" target="_blank" rel="noopener">Spring Cloud Project page</a> for details on setting up your build system with the current Spring Cloud Release Train.   </p></blockquote><p>åœ¨é¡¹ç›®ä¸­ä½¿ç”¨<code>Eureka Server</code>ï¼Œéœ€è¦é…ç½® <code>pom.xml</code>, æ ¹æ®ä½ å½“å‰çš„Spring Cloud ç‰ˆæœ¬åœ¨<a href="http://projects.spring.io/spring-cloud/" target="_blank" rel="noopener">Spring Cloud Project page</a>ä¸­å¯ä»¥æŸ¥çœ‹è¯¦ç»†è¯´æ˜ã€‚</p><p><code>eureka-server</code> çš„ <code>pom.xml</code><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.cyinfotech<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>eureka-server<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.cyinfotech<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sc-f-e-01<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!--Eureka-Server--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h3 id="How-to-Run-a-Eureka-Server-å¦‚ä½•å¯åŠ¨-Eureka-Server"><a href="#How-to-Run-a-Eureka-Server-å¦‚ä½•å¯åŠ¨-Eureka-Server" class="headerlink" title="How to Run a Eureka Server | å¦‚ä½•å¯åŠ¨ Eureka Server"></a>How to Run a Eureka Server | å¦‚ä½•å¯åŠ¨ <code>Eureka Server</code></h3><p>åœ¨å¯åŠ¨ç±»æ·»åŠ  æ³¨è§£ <code>@EnableEurekaServer</code></p><ul><li>Modify <code>EurekaServerApplication</code> </li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cyinfotech.eurekaserver;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.builder.SpringApplicationBuilder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaServer</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EurekaServerApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> SpringApplicationBuilder(EurekaServerApplication.class).web(<span class="keyword">true</span>).run(args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Standalone-Mode-å•æœºæ¨¡å¼"><a href="#Standalone-Mode-å•æœºæ¨¡å¼" class="headerlink" title="Standalone Mode | å•æœºæ¨¡å¼"></a>Standalone Mode | å•æœºæ¨¡å¼</h3><ul><li>Add <code>application.yml</code> </li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">server:</span><br><span class="line">  port: 8761 # ç«¯å£</span><br><span class="line"></span><br><span class="line">eureka:</span><br><span class="line">  instance:</span><br><span class="line">    hostname: localhost # ä¸»æœº</span><br><span class="line">  client:</span><br><span class="line">    registerWithEureka: false #æ˜¯å¦æ³¨å†Œè‡ªå·±</span><br><span class="line">    fetchRegistry: false #æ˜¯å¦æ³¨å†Œè‡ªå·±</span><br><span class="line">    serviceUrl:</span><br><span class="line">      defaultZone: http://$&#123;eureka.instance.hostname&#125;:$&#123;server.port&#125;/eureka/ # æœåŠ¡åœ°å€</span><br></pre></td></tr></table></figure><ul><li><p>Start<br><img src="http://paz1myrij.bkt.clouddn.com/20181018110257.png" alt=""></p></li><li><p>Open <code>http://127.0.0.1:8761/</code> in your browser<br><img src="http://paz1myrij.bkt.clouddn.com/20181018110319.png" alt=""></p></li></ul><p>Instances currently registered with Eureka æ˜¯ç©ºçš„ï¼Œ å› ä¸ºæœ‰æ²¡æœ‰æœåŠ¡æ³¨å†Œ!</p><h2 id="Service-Discovery-Eureka-Clients-æœåŠ¡å‘ç°ï¼šEurekaå®¢æˆ·ç«¯"><a href="#Service-Discovery-Eureka-Clients-æœåŠ¡å‘ç°ï¼šEurekaå®¢æˆ·ç«¯" class="headerlink" title="Service Discovery: Eureka Clients | æœåŠ¡å‘ç°ï¼šEurekaå®¢æˆ·ç«¯"></a>Service Discovery: Eureka Clients | æœåŠ¡å‘ç°ï¼šEurekaå®¢æˆ·ç«¯</h2><p>Eurekaå®¢æˆ·ç«¯å¯ä»¥ç†è§£ä¸ºæœåŠ¡æ³¨å†Œå®é™…é¡¹ç›®ä¸­éœ€è¦æ›å…‰çš„æœåŠ¡ã€‚</p><h3 id="How-to-Include-Eureka-Client-å¦‚ä½•ä½¿ç”¨Eurekaå®¢æˆ·ç«¯"><a href="#How-to-Include-Eureka-Client-å¦‚ä½•ä½¿ç”¨Eurekaå®¢æˆ·ç«¯" class="headerlink" title="How to Include Eureka Client | å¦‚ä½•ä½¿ç”¨Eurekaå®¢æˆ·ç«¯"></a>How to Include Eureka Client | å¦‚ä½•ä½¿ç”¨Eurekaå®¢æˆ·ç«¯</h3><ul><li><p>å³é”®é¡¹ç›® &gt; New &gt; Module æ–°å»º <code>eureka-client</code> å­å·¥ç¨‹ï¼Œå’Œæ·»åŠ  server ä¸€æ ·</p></li><li><p>ä¿®æ”¹çˆ¶å·¥ç¨‹<code>pom.xml</code>æ–‡ä»¶, æ·»åŠ å­å·¥ç¨‹ã€‚   </p></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">module</span>&gt;</span>eureka-client<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>To include the Eureka Client in your project, use the starter with a group ID of <code>org.springframework.cloud</code> and an artifact ID of <code>spring-cloud-starter-netflix-eureka-client</code>. See the <a href="http://projects.spring.io/spring-cloud/" target="_blank" rel="noopener">Spring Cloud Project page</a>  for details on setting up your build system with the current Spring Cloud Release Train.</p></blockquote><p>è¦ä½¿ç”¨<code>Eureka Client</code> å°±è¦æ·»åŠ é…ç½®æ–‡ä»¶ï¼Œå®Œæ•´<code>pom.xml</code>é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.cyinfotech<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>eureka-client<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.cyinfotech<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sc-f-e-01<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.reporting.outputEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--Eureka-Client--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Registering-with-Eureka-æ³¨å†Œ-Eureka"><a href="#Registering-with-Eureka-æ³¨å†Œ-Eureka" class="headerlink" title="Registering with Eureka | æ³¨å†Œ Eureka"></a>Registering with Eureka | æ³¨å†Œ Eureka</h3><blockquote><p>When a client registers with Eureka, it provides meta-data about itselfâ€‰â€”â€‰such as host, port, health indicator URL, home page, and other details. Eureka receives heartbeat messages from each instance belonging to a service. If the heartbeat fails over a configurable timetable, the instance is normally removed from the registry.</p></blockquote><p>å½“æ³¨å†ŒEurekaæ—¶ï¼Œå®ƒæä¾›ä¸€äº›åŒ…æ‹¬è‡ªå·±çš„æºæ•°æ®ï¼Œä¾‹å¦‚ï¼šä¸»æœºã€ç«¯å£ã€ç›‘å¬(å¿ƒè·³)åœ°å€ã€ä¸»é¡µå’Œå…¶å®ƒè¯¦ç»†ä¿¡æ¯ã€‚Eureka é€šè¿‡æ¯ä¸ªå®ä¾‹çš„æœåŠ¡æ¥å—å¿ƒè·³æ¶ˆæ¯ã€‚ å¦‚æœå¿ƒè·³åœ¨é…ç½®çš„æ—¶é—´å¤±è´¥ç»“æŸï¼Œé‚£è¿™ä¸ªå®ä¾‹é€šå¸¸ä¼šåˆ é™¤æ³¨å†Œã€‚</p><p>ä¿®æ”¹å¯åŠ¨<code>Eureka Client</code> å¯åŠ¨ç±»<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cyinfotech.eurekaclient;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.builder.SpringApplicationBuilder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EurekaClientApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">home</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hello world"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> SpringApplicationBuilder(EurekaClientApplication.class).web(<span class="keyword">true</span>).run(args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><blockquote><p>Note that the preceding example shows a normal Spring Boot application. By having <code>spring-cloud-starter-netflix-eureka-client</code> on the classpath, your application automatically registers with the Eureka Server. Configuration is required to locate the Eureka server, as shown in the following example:</p></blockquote><p>æ³¨æ„å‰é¢çš„æ­£å¸¸çš„ <code>Spring boot</code> ç¨‹åºï¼Œ ä½ çš„åº”ç”¨ç¨‹åºä¸­æ·»åŠ <code>spring-cloud-starter-netflix-eureka-client</code>åå°†è‡ªåŠ¨æ³¨å†Œåˆ°<code>Eureka Server</code>, å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">8781</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line"><span class="attr">  client:</span></span><br><span class="line"><span class="attr">    serviceUrl:</span></span><br><span class="line"><span class="attr">      defaultZone:</span> <span class="attr">http://localhost:8761/eureka/</span></span><br></pre></td></tr></table></figure><p>å¯åŠ¨æ­¥éª¤ï¼š<br>    1.EurekaServerApplication<br>    2.EurekaClientApplication</p><p><a href="http://localhost:8761/" target="_blank" rel="noopener">http://localhost:8761/</a><br><img src="http://paz1myrij.bkt.clouddn.com/20181022174105.png" alt=""></p><p><a href="http://192.168.5.165:8781/" target="_blank" rel="noopener">http://192.168.5.165:8781/</a><br><img src="http://paz1myrij.bkt.clouddn.com/20181022174136.png" alt=""></p><p>ä»¥ä¸Š Eureka çš„æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ï¼ˆæ³¨å†Œä¸å‘ç°ï¼‰å°±è®²å®Œäº†ï¼Œæˆ‘ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡è¿™ä¹ˆè®¤çœŸçœ‹å®˜æ–¹æ–‡æ¡£ï¼Œå…¶å®çœ‹ä¸‹æ¥å‘ç°ä¹Ÿä¸éš¾ï¼Œå…¶ä»–äººçš„æ–‡æ¡£é‡Œé¢ä¹Ÿæ— éå°±ç›´è¯‘äº†å®˜æ–¹æ–‡æ¡£ï¼Œä½†æ˜¯æ¯ä¸ªäººçš„ç†è§£ä¸ä¸€æ ·ï¼Œæ‰€ä»¥è¿˜æ˜¯æ¨èè‡ªå·±å»çœ‹åŸç‰ˆæ–‡æ¡£ï¼Œ æ²¡æœ‰æƒ³è±¡çš„é‚£ä¹ˆéš¾ã€‚</p><p>æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼Œè·Ÿæˆ‘ç•™è¨€ã€‚<br><img src="http://paz1myrij.bkt.clouddn.com/qrcode_for_gh_22df58e4959f_258.jpg" alt=""></p><hr><p>åšå®¢åœ°å€ï¼š<a href="https://blog.aprcode.com/sc-f-e-01/" target="_blank" rel="noopener">https://blog.aprcode.com/sc-f-e-01/</a><br>æ•™ç¨‹æºç Githubåœ°å€ï¼š<a href="https://github.com/lixhbs/SpringCloudEnglish/tree/master/sc-f-e-01" target="_blank" rel="noopener">sc-f-e-01</a><br>æ•™ç¨‹æºç Giteeåœ°å€ï¼š<a href="https://gitee.com/Lixhbs/SpringCloudEnglish/tree/master/sc-f-e-01" target="_blank" rel="noopener">sc-f-e-01</a></p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;Eureka æä¾›æœåŠ¡çš„æ³¨å†Œï¼ŒæœåŠ¡å¯ä»¥é€šè¿‡æ³¨å†Œåˆ°&lt;code&gt;Eureka&lt;/code&gt;ç„¶åè¢«å…¶ä»–åº”ç”¨è°ƒç”¨ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Spring Cloud" scheme="https://lixhbs.gitee.io/blog/categories/Spring-Cloud/"/>
    
    
      <category term="Spring Cloud" scheme="https://lixhbs.gitee.io/blog/tags/Spring-Cloud/"/>
    
  </entry>
  
  <entry>
    <title>ã€Spring Cloudã€‘ç›®å½•ç¯‡ - æˆ‘æ˜¯ã€Œç…®é…’æ³›èˆŸã€</title>
    <link href="https://lixhbs.gitee.io/blog/sc-f-e-00/"/>
    <id>https://lixhbs.gitee.io/blog/sc-f-e-00/</id>
    <published>2018-10-21T13:32:27.000Z</published>
    <updated>2018-10-31T09:08:55.090Z</updated>
    
    <content type="html"><![CDATA[<p>æŒ‰ç…§å®˜æ–¹çš„æ–‡æ¡£å­¦ä¹ <code>Spring Cloud</code>ï¼Œå®˜æ–¹çš„ä¸€èˆ¬éƒ½ä¼šæ¯”è¾ƒç®€å•ï¼Œä¸æ˜¯å¾ˆé€‚åˆåˆå­¦è€…ï¼Œæˆ‘åœ¨å­¦ä¹ çš„æ—¶å€™ä¹Ÿä¼šå‚è€ƒåˆ«äººçš„æ–‡ç« ï¼Œä½†æ˜¯ä¹Ÿå¸Œæœ›è‡ªå·±èƒ½ç‹¬ç«‹çš„é˜…è¯»å®˜æ–¹æ–‡æ¡£å­¦ä¹ æœ€æ–°çš„çŸ¥è¯†ã€‚<br>ä¹Ÿå¸Œæœ›æœ‰å¤§ä½¬èƒ½å‘Šè¯‰å­¦ä¹ è‹±æ–‡çš„æ–¹å¼ï¼ï¼ï¼</p><a id="more"></a><p>æ•™ç¨‹æºç Githubåœ°å€ï¼š<a href="https://github.com/lixhubei/SpringCloudEnglish" target="_blank" rel="noopener">https://github.com/lixhubei/SpringCloudEnglish</a><br>æ•™ç¨‹æºç Giteeåœ°å€ï¼š<a href="https://gitee.com/Lixhbs/SpringCloudEnglish" target="_blank" rel="noopener">https://gitee.com/Lixhbs/SpringCloudEnglish</a></p><h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><ul><li>Spring Boot: v2.0.4</li><li>Spring Cloud: Finchley SR1</li><li>IDEA</li><li>JDK 1.8</li></ul><h2 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h2><p>ç›®å‰ç½‘ä¸Š<code>Spring Cloud</code>ç³»åˆ—æ•™ç¨‹è¿˜æ˜¯æ¯”è¾ƒä¸°å¯Œçš„ï¼Œä¾‹å¦‚ï¼š<a href="http://blog.didispace.com/Spring-Cloud%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/" target="_blank" rel="noopener">ç¨‹åºå‘˜DD - Spring CloudåŸºç¡€æ•™ç¨‹</a>ã€<a href="https://blog.csdn.net/forezp/article/details/70148833" target="_blank" rel="noopener">æ–¹å¿—æœ‹ - å²ä¸Šæœ€ç®€å•çš„ SpringCloud æ•™ç¨‹</a>ç­‰å¤§ä½¬çš„ç³»åˆ—æ–‡ç« ã€‚</p><p>ä¸Šé¢ä¸¤ä½å¤§ä½¬çš„æ•™ç¨‹è®©æˆ‘é€æ¸çš„äº†è§£å¹¶è®¤è¯†äº†<code>Spring Cloud</code>ï¼Œå­¦ä¹ ä»»ä½•ä¸€é¡¹æŠ€èƒ½è¿˜æ˜¯å¸Œæœ›èƒ½ç†è§£çš„é€é€çš„ï¼Œæ‰€ä»¥æ ¹æ®<a href="https://www.google.com.ph/search?newwindow=1&amp;safe=active&amp;hl=zh-CN&amp;ei=v3yYW4apBcjY0gKSsLHIBQ&amp;q=%E8%B4%B9%E6%9B%BC%E6%8A%80%E5%B7%A7&amp;oq=%E8%B4%B9%E6%9B%BC%E6%8A%80%E5%B7%A7&amp;gs_l=psy-ab.3...7422.7422.0.7971.1.1.0.0.0.0.366.366.3-1.1.0....0...1c.2.64.psy-ab..0.0.0....0.I32RkqLOV84" target="_blank" rel="noopener">ç»ˆæå­¦ä¹ æ³•â€”â€”è´¹æ›¼æŠ€å·§</a>æˆ‘å°†æˆ‘æ‰€äº†è§£çš„<code>Spring Cloud</code>å†™ä¸‹æ¥ã€‚</p><p>ç”±äºè‹±è¯­å¯¹ç¨‹åºå‘˜æ˜¯éå¸¸é‡è¦çš„,å¯ä»¥çœ‹ä¸‹è¿™ä½å¤§ä½¬çš„æ–‡ç« <a href="http://blog.jobbole.com/45296/#comment-158686" target="_blank" rel="noopener">è€ç å†œæ•™ä½ å­¦è‹±è¯­</a>ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä¹Ÿå¼€å§‹æˆ‘é˜…è¯»è‹±æ–‡æ–‡æ¡£çš„ç¬¬ä¸€æ­¥ï¼Œå¦‚æœå¤§å®¶æœ‰å¥½çš„å­¦ä¹ æ–¹æ³•å¯ä»¥å’Œæˆ‘äº¤æµã€‚ä»¥å‰ä¹Ÿæœ‰æ— æ•°æ¬¡å­¦ä¹ è‹±è¯­çš„å†²åŠ¨ï¼Œæ¯æ¬¡éƒ½æ‹¿èµ·å„ç§èƒŒå•è¯çš„APPè‹¦å­¦ä¸€ä¸¤å‘¨ï¼Œç„¶å¹¶åµï¼Œ<code>Spring Cloud</code>ç³»åˆ—æ•™ç¨‹ï¼Œæˆ‘ä¼šä»¥å®˜æ–¹è‹±æ–‡æ–‡æ¡£ä¸ºä¸»ï¼Œå’Œå¤§å®¶ä¸€èµ·å»æ­å»º<code>Spring Cloudæ¡†æ¶</code>ã€‚</p><h2 id="Spring-Cloud-ç®€ä»‹"><a href="#Spring-Cloud-ç®€ä»‹" class="headerlink" title="Spring Cloud ç®€ä»‹"></a>Spring Cloud ç®€ä»‹</h2><p>ä¸ªäººç†è§£ä¸ºå¤šä¸ªåŠŸèƒ½ç»„æˆçš„ä¸€ä¸ªå¾®æœåŠ¡è§£å†³æ–¹æ¡ˆçš„ä½“ç³»ï¼Œé‡Œé¢åŒ…æ‹¬æœåŠ¡å‘ç°ã€æœåŠ¡æ¶ˆè´¹ã€è·¯ç”±ã€æ–­è·¯å™¨ç­‰ç­‰å·¥å…·ï¼Œçœ‹å‘å¸ƒçš„ç‰ˆæœ¬å°±èƒ½çœ‹å‡ºï¼ŒSpring Cloud ä¸æ˜¯æŸä¸€ç§æŠ€æœ¯ï¼Œè€Œæ˜¯é›†å¾ˆå¤šä¸œè¥¿ä¸ºä¸€ä½“çš„ï¼Œå½“æŸäº›åŠŸèƒ½å‘å¸ƒäº†ç‰ˆæœ¬åï¼ŒSpring Cloudæ‰ä¼šè·Ÿç€å‘å¸ƒç‰ˆæœ¬ã€‚</p><h2 id="ä¸ºä»€ä¹ˆå»çœ‹è‹±æ–‡æ–‡æ¡£"><a href="#ä¸ºä»€ä¹ˆå»çœ‹è‹±æ–‡æ–‡æ¡£" class="headerlink" title="ä¸ºä»€ä¹ˆå»çœ‹è‹±æ–‡æ–‡æ¡£"></a>ä¸ºä»€ä¹ˆå»çœ‹è‹±æ–‡æ–‡æ¡£</h2><p>ä¸ºä»€ä¹ˆå»çœ‹è‹±æ–‡æ–‡æ¡£ï¼Œå°±åªæœ‰ä¸€ä¸ªåŸå› ï¼Œå› ä¸ºæœ€æ–°çš„æŠ€æœ¯éƒ½æ˜¯è‹±æ–‡ç‰ˆçš„ã€‚<br>æ€ä¹ˆå»å­¦ï¼Œæˆ‘ä¹‹å‰æœ‰çœ‹è¿‡ä¸€ä¸ªäººçš„ï¼ˆçªç„¶å¿˜è®°åå­—äº†ï¼Œæƒ³èµ·æ¥å†ä¸ä¸Šæ¥ï¼‰æœ‰ä¸ªé€ææ³•ï¼Œä½†æ˜¯è¦æœ‰ä¸€å®šçš„è‹±è¯­åŸºç¡€ï¼Œç”±äºæˆ‘ç®—æ˜¯æ²¡æœ‰åŸºç¡€çš„æ‰€ä»¥æˆ‘æƒ³ç»“åˆè¿™ä¸ªé€ææ³•ï¼Œç„¶åè‡ªå·±ç¢ç£¨ä¸‹å¦‚ä½•å»å­¦ï¼Œå› ä¸ºæŠ€æœ¯æ–‡ç« å’Œå…¶ä»–çš„æ–‡ç« æœ‰ç‚¹ä¸ä¸€æ ·ï¼ŒæŠ€æœ¯æ–‡ç« é‡Œé¢æœ‰å¾ˆå¤šçš„ä¸“ä¸šæœ¯è¯­,ä½†æ˜¯è¿™äº›æœ¯è¯­æ˜¯æœ‰é™çš„ï¼Œæ‰€ä»¥çœ‹å¾—å¤šäº†å°±åº”è¯¥å°±ä¼šäº†ã€‚æˆ‘ä»¬è¿™ç§åº”è¯¥å±äºå“‘å·´è‹±è¯­ï¼</p><h2 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h2><ul><li><a href="../sc-f-e-00">ã€Spring Cloudã€‘ç›®å½•ç¯‡ æˆ‘æ˜¯ã€Œç…®é…’æ³›èˆŸã€</a></li><li><a href="../sc-f-e-01">ã€Spring Cloudã€‘ç¬¬ä¸€ç¯‡ Service Discovery | æœåŠ¡å‘ç° - Eureka</a></li><li><a href="../sc-f-e-02">ã€Spring Cloudã€‘ç¬¬äºŒç¯‡ Circuit Breaker | æ–­è·¯å™¨ - Hystrix</a></li><li><a href="../sc-f-e-03">ã€Spring Cloudã€‘ç¬¬ä¸‰ç¯‡ Client Side Load Balancer | è´Ÿè½½å‡è¡¡ - Ribbon</a>  </li><li><a href="../sc-f-e-04">ã€Spring cloudã€‘ç¬¬å››ç¯‡ Router and Filter | è·¯ç”±å’Œè¿‡æ»¤å™¨ - Zuul</a></li></ul><p>æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼Œè·Ÿæˆ‘ç•™è¨€ã€‚<br><img src="http://paz1myrij.bkt.clouddn.com/qrcode_for_gh_22df58e4959f_258.jpg" alt=""></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æŒ‰ç…§å®˜æ–¹çš„æ–‡æ¡£å­¦ä¹ &lt;code&gt;Spring Cloud&lt;/code&gt;ï¼Œå®˜æ–¹çš„ä¸€èˆ¬éƒ½ä¼šæ¯”è¾ƒç®€å•ï¼Œä¸æ˜¯å¾ˆé€‚åˆåˆå­¦è€…ï¼Œæˆ‘åœ¨å­¦ä¹ çš„æ—¶å€™ä¹Ÿä¼šå‚è€ƒåˆ«äººçš„æ–‡ç« ï¼Œä½†æ˜¯ä¹Ÿå¸Œæœ›è‡ªå·±èƒ½ç‹¬ç«‹çš„é˜…è¯»å®˜æ–¹æ–‡æ¡£å­¦ä¹ æœ€æ–°çš„çŸ¥è¯†ã€‚&lt;br&gt;ä¹Ÿå¸Œæœ›æœ‰å¤§ä½¬èƒ½å‘Šè¯‰å­¦ä¹ è‹±æ–‡çš„æ–¹å¼ï¼ï¼ï¼&lt;/p&gt;
    
    </summary>
    
      <category term="Spring Cloud" scheme="https://lixhbs.gitee.io/blog/categories/Spring-Cloud/"/>
    
    
      <category term="Spring Cloud" scheme="https://lixhbs.gitee.io/blog/tags/Spring-Cloud/"/>
    
  </entry>
  
  <entry>
    <title>Spring Boot | ä½¿ç”¨Spring Initializrå¿«é€Ÿåˆ›å»º</title>
    <link href="https://lixhbs.gitee.io/blog/Spring-Boot-SI/"/>
    <id>https://lixhbs.gitee.io/blog/Spring-Boot-SI/</id>
    <published>2018-10-16T03:23:08.000Z</published>
    <updated>2018-10-23T06:30:20.398Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ç®€å•å¿«é€Ÿæ­å»ºå¯åŠ¨Spring Booté¡¹ç›®</p></blockquote><a id="more"></a><p><a href="https://github.com/lixhbs/SpringBoot/tree/master/spring-boot-si" target="_blank" rel="noopener">æ•™ç¨‹æºç Githubåœ°å€</a><br><a href="https://gitee.com/Lixhbs/SpringBoot/tree/master/spring-boot-si" target="_blank" rel="noopener">æ•™ç¨‹æºç Giteeåœ°å€</a></p><ul><li><p>Create New Prject | åˆ›å»ºæ–°é¡¹ç›®<br><img src="http://paz1myrij.bkt.clouddn.com/20181016113451.png" alt=""></p></li><li><p>é€‰æ‹© Spring Initializr<br><img src="http://paz1myrij.bkt.clouddn.com/20181016113609.png" alt=""></p></li><li><p>å¡«å¥½ä¿¡æ¯é€‰æ‹©ä¸‹ä¸€æ­¥<br><img src="http://paz1myrij.bkt.clouddn.com/20181016114713.png" alt=""></p></li><li><p>å¯ä»¥é€‰æ‹©ä¸€äº›å·¥å…·<br><img src="http://paz1myrij.bkt.clouddn.com/20181016114810.png" alt=""></p></li><li><p>åˆ›å»ºå¥½åé¡¹ç›®ä¼šå¼€å§‹åˆå§‹åŒ–ï¼Œç­‰å¾…ä¸€ä¸‹<br><img src="http://paz1myrij.bkt.clouddn.com/20181016115115.png" alt=""></p></li><li><p>ä¿®æ”¹å¯åŠ¨ç±» <code>SpringBootSiApplication</code></p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cyinfotech.springbootsi;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBootSiApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(SpringBootSiApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getIndex</span> <span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hello Spring Boot"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>åˆå§‹åŒ–å®Œæˆåå³ä¸Šè§’å¯åŠ¨|è°ƒè¯•é¡¹ç›®<br><img src="http://paz1myrij.bkt.clouddn.com/20181016115258.png" alt=""></p></li><li><p>å¯åŠ¨ä¿¡æ¯<br><img src="http://paz1myrij.bkt.clouddn.com/20181016115339.png" alt=""></p></li><li><p>é¡µé¢è®¿é—® â€˜<a href="http://localhost:8080/&#39;" target="_blank" rel="noopener">http://localhost:8080/&#39;</a></p></li></ul><p><img src="http://paz1myrij.bkt.clouddn.com/20181016133457.png" alt=""></p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;ç®€å•å¿«é€Ÿæ­å»ºå¯åŠ¨Spring Booté¡¹ç›®&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Spring Boot" scheme="https://lixhbs.gitee.io/blog/categories/Spring-Boot/"/>
    
    
      <category term="Spring Boot" scheme="https://lixhbs.gitee.io/blog/tags/Spring-Boot/"/>
    
  </entry>
  
</feed>
