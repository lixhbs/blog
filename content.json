{"meta":{"title":"ç…®é…’æ³›èˆŸçš„æŠ€æœ¯æ ˆ","subtitle":null,"description":null,"author":"ç…®é…’æ³›èˆŸ","url":"https://lixhbs.gitee.io/blog"},"pages":[{"title":"About","date":"2018-11-06T07:38:46.344Z","updated":"2018-09-12T10:57:21.357Z","comments":true,"path":"about/index.html","permalink":"https://lixhbs.gitee.io/blog/about/index.html","excerpt":"","text":""},{"title":"categories","date":"2018-09-12T10:53:41.000Z","updated":"2018-09-12T10:58:03.129Z","comments":true,"path":"categories/index.html","permalink":"https://lixhbs.gitee.io/blog/categories/index.html","excerpt":"","text":""},{"title":"tags","date":"2018-09-12T10:55:12.000Z","updated":"2018-09-12T10:58:20.616Z","comments":true,"path":"tags/index.html","permalink":"https://lixhbs.gitee.io/blog/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"ã€ŒIssue-001ã€ Could not create connection to database server. Attempted reconnect 3 times. Giving up","slug":"issue-001","date":"2018-12-25T00:00:00.000Z","updated":"2018-12-25T03:54:50.907Z","comments":true,"path":"issue-001/","link":"","permalink":"https://lixhbs.gitee.io/blog/issue-001/","excerpt":"","text":"é—®é¢˜çŠ¶æ€ æš‚æ—¶å¤„ç† ç¯å¢ƒIDEA, DataGrip, Mysql 8.0.12 é—®é¢˜æè¿°æ•°æ®åº“è¿æ¥é…ç½®1234driver-class-name: com.mysql.jdbc.Driverurl: jdbc:mysql://localhost:3306/ofit?autoReconnect=true&amp;useSSL=falseusername: rootpassword: ********** æ¯æ¬¡ç”µè„‘é‡å¯åå†æ¬¡å¯åŠ¨é¡¹ç›®å°±ä¼šå‡ºç° Could not create connection to database server. Attempted reconnect 3 times. Giving up é”™è¯¯ã€‚ æ— æ³•åˆ›å»ºä¸æ•°æ®åº“æœåŠ¡å™¨çš„è¿æ¥ã€‚å°è¯•é‡æ–°è¿æ¥3æ¬¡ã€‚æ”¾å¼ƒ ç½‘ç»œå¤„ç†æ–¹å¼å½’ç±»ä¸ºURLé”™è¯¯æˆ‘æ‰¾åˆ°å‡ ä¸ªblogé‡Œé¢æ¨èçš„URLé…ç½® url=jdbc:mysql://127.0.0.1:3301/dream?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;autoReconnect=true&amp;failOverReadOnly=false jdbc.url=jdbc:mysql://192.168.9.102:3306/jeuc_2_1?useUnicode=true&amp;;characterEncoding=utf-8&amp;;autoReconnect=true&amp;;failOverReadOnly=false&amp;;testOnBorrow=true&amp;;validationQuery=select 1 æˆ‘è¯•è¿‡éƒ½ä¸è¡Œã€‚ æš‚æ—¶å¤„ç†æ–¹å¼æ‰“å¼€DataGrip å·¥å…· Test Connection ç„¶ååœ¨å¯åŠ¨é¡¹ç›®å°±å¥½äº†ã€‚ å…·ä½“åŸå› ä¸çŸ¥é“ã€‚ã€‚ã€‚ å¯åŠ¨MySQLæœåŠ¡ sudo /usr/local/MySQL/support-files/mysql.server start åœæ­¢MySQLæœåŠ¡ sudo /usr/local/mysql/support-files/mysql.server stop é‡å¯MySQLæœåŠ¡ sudo /usr/local/mysql/support-files/mysql.server restart","categories":[{"name":"Issue","slug":"Issue","permalink":"https://lixhbs.gitee.io/blog/categories/Issue/"}],"tags":[{"name":"Issue","slug":"Issue","permalink":"https://lixhbs.gitee.io/blog/tags/Issue/"}]},{"title":"ã€Spring Cloudã€‘ç¬¬äºŒç¯‡ Circuit Breaker | æ–­è·¯å™¨ - Hystrix","slug":"sc-f-e-02","date":"2018-12-16T13:36:17.497Z","updated":"2018-12-16T13:36:17.497Z","comments":true,"path":"sc-f-e-02/","link":"","permalink":"https://lixhbs.gitee.io/blog/sc-f-e-02/","excerpt":"æœåŠ¡æ„å¤–è·ªæ‰åçš„å¤„ç†æ–¹å¼ï¼Œä¸è‡³äºæ‰€æœ‰çš„åŠŸèƒ½å¤±æ•ˆã€‚","text":"æœåŠ¡æ„å¤–è·ªæ‰åçš„å¤„ç†æ–¹å¼ï¼Œä¸è‡³äºæ‰€æœ‰çš„åŠŸèƒ½å¤±æ•ˆã€‚ å®˜æ–¹ç½‘ç«™çš„è¿™ä¸ªå›¾å¾ˆå½¢è±¡,å½“æœåŠ¡è·ªæ‰åæœ‰ä¸€ä¸ªfallbackè¿”å›ã€‚ æœ¬æ•™ç¨‹åœ¨ã€å‚ç…§å®˜æ–¹è‹±æ–‡æ–‡æ¡£å­¦Spring Cloudã€‘ç¬¬ä¸€ç¯‡ Service Discovery | æœåŠ¡å‘ç° - Eurekaçš„åŸºç¡€ä¸Šæ·»åŠ ä»£ç ã€‚ word &amp; phrase Circuit Breaker ä¸­æ–­å›è·¯ åˆ›å»ºå·¥ç¨‹ server-hystrix How to Include Hystrix | é¡¹ç›®ä¸­å¦‚ä½•åŒ…å« Hystrix To include Hystrix in your project, use the starter with a group ID of org.springframework.cloud and a artifact ID of spring-cloud-starter-netflix-hystrix. See the Spring Cloud Project page for details on setting up your build system with the current Spring Cloud Release Train. å¦‚ä½•åŒ…å«ï¼Ÿç¬¬ä¸€æ­¥éƒ½ä¸€æ ·ï¼Œæ·»åŠ group IDåˆ° pom.xmlï¼Œæ³¨æ„è‡ªå·±çš„ç‰ˆæœ¬ï¼Œæˆ‘å°±ä¸åœ¨ç¿»è¯‘äº†ã€‚ 123456789101112131415161718192021222324252627282930313233343536&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.cyinfotech&lt;/groupId&gt; &lt;artifactId&gt;server-hystrix&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;packaging&gt;jar&lt;/packaging&gt; &lt;name&gt;server-hystrix&lt;/name&gt; &lt;description&gt;Demo project for Spring Boot&lt;/description&gt; &lt;parent&gt; &lt;groupId&gt;com.cyinfotech&lt;/groupId&gt; &lt;artifactId&gt;sc-f-e-02&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--Eureka-Client--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; ä¿®æ”¹çˆ¶å·¥ç¨‹pom.xmlï¼Œåœ¨modulesæ·»åŠ server-hystrix 1&lt;module&gt;server-hystrix&lt;/module&gt; The @HystrixCommand is provided by a Netflix contrib library called â€œjavanicaâ€. Spring Cloud automatically wraps Spring beans with that annotation in a proxy that is connected to the Hystrix circuit breaker. The circuit breaker calculates when to open and close the circuit and what to do in case of a failure. å®˜æ–¹ç»™çš„ä¾‹å­å¾ˆç›´è§‚ï¼Œæ·»åŠ @HystrixCommandæ³¨è§£ï¼Œå½“æœåŠ¡è°ƒç”¨å¤±è´¥çš„æ—¶å€™ä¼šè°ƒç”¨fallbackMethodçš„æœåŠ¡ã€‚12345678910111213@Componentpublic class StoreIntegration &#123; @HystrixCommand(fallbackMethod = &quot;defaultStores&quot;) public Object getStores(Map&lt;String, Object&gt; parameters) &#123; //do stuff that might fail // åšé‚£äº›å¯èƒ½å¤±è´¥çš„äº‹æƒ… &#125; public Object defaultStores(Map&lt;String, Object&gt; parameters) &#123; return /* something useful */; &#125;&#125; ä¿®æ”¹ä¸‹å®˜æ–¹example æ–°å»ºç±»StoreIntegration 12345678910111213141516171819202122232425262728293031package com.cyinfotech.serverhystrix;import com.netflix.hystrix.contrib.javanica.annotation.HystrixCommand;import org.springframework.stereotype.Component;import java.util.Map;/** * @author ç…®é…’æ³›èˆŸ. * @title Component * @program sc-f-e-02 * @description * @createtime 2018-10-24 09:28 */@Componentpublic class StoreIntegration &#123; @HystrixCommand(fallbackMethod = &quot;defaultStores&quot;) public Object getStores(Map&lt;String, Object&gt; parameters) &#123; //do stuff that might fail throw new RuntimeException(&quot;call service fail.&quot;); &#125; public Object defaultStores(Map&lt;String, Object&gt; parameters) &#123; /* something useful */ return &quot;Sorry, error!!! fallback defaultStores serviceï¼&quot;; &#125;&#125; ä¿®æ”¹å¯åŠ¨ç±»ServerHystrixApplication 123456789101112131415161718192021222324252627282930package com.cyinfotech.serverhystrix;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.boot.builder.SpringApplicationBuilder;import org.springframework.cloud.client.circuitbreaker.EnableCircuitBreaker;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;import java.util.Map;@SpringBootApplication@EnableCircuitBreaker@EnableDiscoveryClient@RestControllerpublic class ServerHystrixApplication &#123; public static void main(String[] args) &#123; new SpringApplicationBuilder(ServerHystrixApplication.class).web(true).run(args); &#125; @Autowired StoreIntegration storeIntegration; @RequestMapping(\"/\") public Object getHi (Map&lt;String, Object&gt; parameters)&#123; return storeIntegration.getStores(parameters); &#125;&#125; ä¿®æ”¹é…ç½®æ–‡ä»¶ application.yml 123456789server: port: 8782eureka: client: serviceUrl: defaultZone: http://localhost:8761/eureka/spring: application: name: server-hystrix å…ˆå¯åŠ¨ eureka-serverï¼Œå†å¯åŠ¨ server-hystrix, è®¿é—®æµè§ˆå™¨ http://localhost:8782/ï¼Œæ˜¾ç¤ºçš„æ˜¯è°ƒç”¨defaultStoresæœåŠ¡çš„è¿”å›å€¼. Sorry, error!!! fallback defaultStores serviceï¼ æœ¬ç¯‡æ•™ç¨‹å°±åˆ°è¿™ï¼Œè‡³äºæ›´æ·±çš„æ•™ç¨‹æˆ‘ä¼šåŠ ç´§å­¦ä¹ ç„¶åå†™å‡ºæ¥ã€‚ æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼Œè·Ÿæˆ‘ç•™è¨€ã€‚ åšå®¢åœ°å€ï¼šhttps://blog.aprcode.com/sc-f-e-02/æ•™ç¨‹æºç Githubåœ°å€ï¼šsc-f-e-02æ•™ç¨‹æºç Giteeåœ°å€ï¼šsc-f-e-02","categories":[{"name":"Spring Cloud","slug":"Spring-Cloud","permalink":"https://lixhbs.gitee.io/blog/categories/Spring-Cloud/"}],"tags":[{"name":"Spring Cloud","slug":"Spring-Cloud","permalink":"https://lixhbs.gitee.io/blog/tags/Spring-Cloud/"}]},{"title":"ã€Spring Cloudã€‘ç¬¬ä¸‰ç¯‡ Client Side Load Balancer | è´Ÿè½½å‡è¡¡ - Ribbon","slug":"sc-f-e-03","date":"2018-12-16T13:36:09.162Z","updated":"2018-12-16T13:36:09.162Z","comments":true,"path":"sc-f-e-03/","link":"","permalink":"https://lixhbs.gitee.io/blog/sc-f-e-03/","excerpt":"Ribbonæ˜¯ä¸€ä¸ªè´Ÿè½½å‡è¡¡çš„å®¢æˆ·ç«¯ï¼Œç”¨æ¥æé«˜ç³»ç»Ÿçš„å¤„ç†èƒ½åŠ›ï¼Œåœ¨ä¹‹åçš„ç« èŠ‚ä¼šè®²åˆ°Feignå®ƒå·²ç»åŒ…å«Ribbonã€‚","text":"Ribbonæ˜¯ä¸€ä¸ªè´Ÿè½½å‡è¡¡çš„å®¢æˆ·ç«¯ï¼Œç”¨æ¥æé«˜ç³»ç»Ÿçš„å¤„ç†èƒ½åŠ›ï¼Œåœ¨ä¹‹åçš„ç« èŠ‚ä¼šè®²åˆ°Feignå®ƒå·²ç»åŒ…å«Ribbonã€‚ æœ¬æ•™ç¨‹åœ¨ã€Spring Cloudã€‘ç¬¬äºŒç¯‡ Circuit Breaker | æ–­è·¯å™¨ - Hystrixçš„åŸºç¡€ä¸Šæ·»åŠ ä»£ç ã€‚ word &amp; phrase load balancer è´Ÿè½½å‡è¡¡å™¨ section ç« èŠ‚ A central concept æ ¸å¿ƒæƒ³æ³• åˆ›å»ºå·¥ç¨‹ server-ribbon How to Include Ribbon | é¡¹ç›®ä¸­å¦‚ä½•åŒ…å« Ribbon To include Ribbon in your project, use the starter with a group ID of org.springframework.cloud and an artifact ID of spring-cloud-starter-netflix-ribbon. See the Spring Cloud Project page for details on setting up your build system with the current Spring Cloud Release Train. æ·»åŠ group IDåˆ° pom.xmlï¼Œæ³¨æ„è‡ªå·±çš„ç‰ˆæœ¬ã€‚ 123456789101112131415161718192021222324252627282930&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.cyinfotech&lt;/groupId&gt; &lt;artifactId&gt;server-ribbon&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;packaging&gt;jar&lt;/packaging&gt; &lt;name&gt;server-ribbon&lt;/name&gt; &lt;description&gt;Demo project for Spring Boot&lt;/description&gt; &lt;parent&gt; &lt;groupId&gt;com.cyinfotech&lt;/groupId&gt; &lt;artifactId&gt;sc-f-e-03&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-ribbon&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; ä¿®æ”¹çˆ¶å·¥ç¨‹pom.xmlï¼Œåœ¨modulesæ·»åŠ server-ribbon 1&lt;module&gt;server-ribbon&lt;/module&gt; ä¿®æ”¹é…ç½®æ–‡ä»¶ application.yml 123456789server: port: 8783eureka: client: serviceUrl: defaultZone: http://localhost:8761/eureka/spring: application: name: server-ribbon ä¿®æ”¹å¯åŠ¨ç±»ServerRibbonApplicationï¼Œæ·»åŠ RestTemplate @LoadBalancedçš„ä½œç”¨æ˜¯è®©è¿™ä¸ªè¯·æ±‚æœ‰è´Ÿè½½å‡è¡¡çš„èƒ½åŠ›ã€‚ 1234567891011121314151617181920212223package com.cyinfotech.serverribbon;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.cloud.client.discovery.EnableDiscoveryClient;import org.springframework.cloud.client.loadbalancer.LoadBalanced;import org.springframework.context.annotation.Bean;import org.springframework.web.client.RestTemplate;@SpringBootApplication@EnableDiscoveryClientpublic class ServerRibbonApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(ServerRibbonApplication.class, args); &#125; @Bean @LoadBalanced public RestTemplate restTemplate ()&#123; return new RestTemplate(); &#125;&#125; æ·»åŠ HelloCyInfoæœåŠ¡ç±»ï¼Œè°ƒç”¨å…¶ä»–å®ä¾‹ï¼Œå®ç°è´Ÿè½½å‡è¡¡ 1234567891011121314151617181920212223package com.cyinfotech.serverribbon;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import org.springframework.web.client.RestTemplate;/** * @author ç…®é…’æ³›èˆŸ. * @title * @program sc-f-e-03 * @description * @createtime 2018-10-28 09:38 */@Servicepublic class HelloCyInfo &#123; @Autowired RestTemplate restTemplate; public String helloCYIT(String name) &#123; return restTemplate.getForObject(&quot;http://server-hystrix/?name=&quot;+name,String.class); &#125;&#125; æ·»åŠ RibbonControllerç±»ï¼Œè°ƒç”¨service 1234567891011121314151617181920212223242526package com.cyinfotech.serverribbon;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestParam;import org.springframework.web.bind.annotation.RestController;/** * @author ç…®é…’æ³›èˆŸ. * @title * @program sc-f-e-03 * @description * @createtime 2018-10-28 09:44 */@RestControllerpublic class RibbonController &#123; @Autowired HelloCyInfo helloCyInfo; @RequestMapping(&quot;/&quot;) public String hiCYIT ( @RequestParam String name) &#123; return helloCyInfo.helloCYIT(name); &#125;&#125; ä¸ºäº†æ•ˆæœæ˜æ˜¾æˆ‘ä»¬ä¿®æ”¹ä¸‹server-hystrixçš„ä»£ç ï¼Œå°†å®ä¾‹çš„ç«¯å£æ‰“å°å‡ºæ¥ï¼› 12345678910111213141516171819202122232425262728293031323334353637package com.cyinfotech.serverhystrix;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.beans.factory.annotation.Value;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.boot.builder.SpringApplicationBuilder;import org.springframework.cloud.client.circuitbreaker.EnableCircuitBreaker;import org.springframework.cloud.client.discovery.EnableDiscoveryClient;import org.springframework.context.annotation.Configuration;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestParam;import org.springframework.web.bind.annotation.RestController;import java.util.Map;@SpringBootApplication@EnableCircuitBreaker@EnableDiscoveryClient@RestControllerpublic class ServerHystrixApplication &#123; public static void main(String[] args) &#123; new SpringApplicationBuilder(ServerHystrixApplication.class).web(true).run(args); &#125; @Autowired StoreIntegration storeIntegration; @Value(\"$&#123;server.port&#125;\") String port; @RequestMapping(\"/\") public Object getHi (@RequestParam String name)&#123; return \"HI - \" + name + \"ï¼Œ port:\" + port + \", By server-hystrix.\"; &#125;&#125; å…ˆå¯åŠ¨ eureka-serverï¼Œå†å¯åŠ¨ server-hystrix, ç„¶åå¯åŠ¨ server-ribbon è®¿é—®æµè§ˆå™¨ http://localhost:8783/?name=cyit HI - cyitï¼Œ port:8782, By server-hystrix. ä¿®æ”¹å®ä¾‹server-hystrixçš„ç«¯å£ç„¶åå¯åŠ¨ï¼Œå¦‚æœå¯åŠ¨ä¸äº†éœ€è¦åœ¨Configurationså»æ‰Single instance only. 12server: port: 8786 ` å¤šæ¬¡è®¿é—®http://localhost:8783/?name=cyit ï¼Œ é¡µé¢ä¼šäº¤æ›¿æ˜¾ç¤ºç«¯å£å·ã€‚ HI - cyitï¼Œ port:8782, By server-hystrix.HI - cyitï¼Œ port:8786, By server-hystrix. æœ¬ç¯‡æ•™ç¨‹å°±åˆ°è¿™ï¼Œè‡³äºæ›´æ·±çš„æ•™ç¨‹æˆ‘ä¼šåŠ ç´§å­¦ä¹ ç„¶åå†™å‡ºæ¥ã€‚ æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼Œè·Ÿæˆ‘ç•™è¨€ã€‚ åšå®¢åœ°å€ï¼šhttps://blog.aprcode.com/sc-f-e-03/æ•™ç¨‹æºç Githubåœ°å€ï¼šsc-f-e-03æ•™ç¨‹æºç Giteeåœ°å€ï¼šsc-f-e-03","categories":[{"name":"Spring Cloud","slug":"Spring-Cloud","permalink":"https://lixhbs.gitee.io/blog/categories/Spring-Cloud/"},{"name":"Ribbon","slug":"Spring-Cloud/Ribbon","permalink":"https://lixhbs.gitee.io/blog/categories/Spring-Cloud/Ribbon/"}],"tags":[{"name":"Spring Cloud","slug":"Spring-Cloud","permalink":"https://lixhbs.gitee.io/blog/tags/Spring-Cloud/"}]},{"title":"ã€ŒFeign-Httpã€ Feignè¯·æ±‚httpæ¥å£","slug":"Feign-Http","date":"2018-12-16T03:07:11.000Z","updated":"2018-12-20T03:50:47.173Z","comments":true,"path":"Feign-Http/","link":"","permalink":"https://lixhbs.gitee.io/blog/Feign-Http/","excerpt":"æ²¡æœ‰æ¥è§¦Spring Cloud Feignçš„æ—¶å€™è°ƒç”¨å…¶ä»–å…¬å¸æ¥å£éƒ½æ˜¯ç”¨java.net.URLæˆ–è€…org.apache.commons.httpclient, ç°åœ¨å¯ä»¥ä½¿ç”¨Feignï¼Œä½¿ç”¨èµ·æ¥æ¯”è¾ƒç®€å•ã€‚","text":"æ²¡æœ‰æ¥è§¦Spring Cloud Feignçš„æ—¶å€™è°ƒç”¨å…¶ä»–å…¬å¸æ¥å£éƒ½æ˜¯ç”¨java.net.URLæˆ–è€…org.apache.commons.httpclient, ç°åœ¨å¯ä»¥ä½¿ç”¨Feignï¼Œä½¿ç”¨èµ·æ¥æ¯”è¾ƒç®€å•ã€‚ å…³äºå¦‚ä½•ä½¿ç”¨Feignå¯ä»¥æŸ¥çœ‹ã€Spring cloudã€‘ç¬¬å…­ç¯‡ Declarative REST Client | å£°æ˜æ€§å®¢æˆ·ç«¯ - Feign æ–°å»ºSpring cloudåŸºç¡€é¡¹ç›® åˆ›å»ºeureka-serverå·¥ç¨‹å¯ä»¥å‚è€ƒ ã€Spring Cloudã€‘ç¬¬ä¸€ç¯‡ Service Discovery | æœåŠ¡å‘ç° - Eureka åˆ›å»ºserver-feignå·¥ç¨‹å¯ä»¥å‚è€ƒ ã€Spring cloudã€‘ç¬¬å…­ç¯‡ Declarative REST Client | å£°æ˜æ€§å®¢æˆ·ç«¯ - Feign æ·»åŠ Feignæ¥å£ com.cyinfotech.serverfeign.services.ApiOpenService.java åœ¨@FeignClient è®¾ç½®urlä¸ºhttp åŸºç¡€åœ°å€ï¼Œåœ¨å„ä¸ªæ–¹æ³•ä¸Šæ·»åŠ @PostMappingæ³¨è§£ä¸ºapiåœ°å€ 1234567891011121314151617181920212223242526272829303132333435363738package com.cyinfotech.serverfeign.services;import org.springframework.cloud.openfeign.FeignClient;import org.springframework.web.bind.annotation.PostMapping;import org.springframework.web.bind.annotation.RequestParam;/** * @author ç…®é…’æ³›èˆŸ. * @title ApiOpen * @program feign-http * @description ApiOpen * @createtime 2018-12-16 11:43 */@FeignClient(url = \"https://api.apiopen.top\", value = \"ApiOpenService\")public interface ApiOpenService &#123; /** * éšæœºå•å¥è¯—è¯æ¨è * @return */ @PostMapping(\"/singlePoetry\") String singlePoetry(); /** * éšæœºä¸€é¦–è¯—è¯æ¨è * @return */ @PostMapping(\"/recommendPoetry\") String recommendPoetry(); /** * æœç´¢å¤è¯—è¯ * @param name * @return */ @GetMapping(\"/searchPoetry\") String searchPoetry(@RequestParam(\"name\") String name);&#125; åœ¨å¯åŠ¨ç±»æ·»åŠ æµ‹è¯•ä»£ç æ·»åŠ æ³¨è§£@EnableFeignClients(clients = {ApiOpenService.class}) package com.cyinfotech.serverfeign; import com.cyinfotech.serverfeign.services.ApiOpenService; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.boot.SpringApplication; import org.springframework.boot.autoconfigure.SpringBootApplication; import org.springframework.cloud.netflix.eureka.EnableEurekaClient; import org.springframework.cloud.openfeign.EnableFeignClients; import org.springframework.web.bind.annotation.*; /** * @author ç…®é…’æ³›èˆŸ * @date 2018å¹´12æœˆ16æ—¥11:49:06 * */ @SpringBootApplication @EnableEurekaClient @RestController @EnableFeignClients(clients = {ApiOpenService.class}) @RequestMapping(\"/api\") public class ServerFeignApplication { public static void main(String[] args) { SpringApplication.run(ServerFeignApplication.class, args); } @Autowired ApiOpenService apiOpenService; @RequestMapping(\"/singlePoetry\") public String searchSinglePoetry() { return apiOpenService.singlePoetry(); } @RequestMapping(\"/recommendPoetry\") public String searchRecommendPoetry() { return apiOpenService.recommendPoetry(); } @GetMapping(\"/searchPoetry\") public String searchPoetry(@RequestParam(\"name\") String name) { return apiOpenService.searchPoetry(name); } } å¯åŠ¨ EurekaServerApplication &gt; ServerFeignApplication è®¿é—®ï¼šhttp://localhost:8085/api/singlePoetry {â€œcodeâ€:200,â€messageâ€:â€æˆåŠŸ!â€,â€resultâ€:{â€œauthorâ€:â€è‹è½¼â€,â€originâ€:â€ä¸´æ±Ÿä»™Â·å¤œé¥®ä¸œå¡é†’å¤é†‰â€,â€categoryâ€:â€å¤è¯—æ–‡-äººç”Ÿ-æ¢¦æƒ³â€,â€contentâ€:â€é•¿æ¨æ­¤èº«éæˆ‘æœ‰ï¼Œä½•æ—¶å¿˜å´è¥è¥ã€‚â€}} è®¿é—®ï¼šhttp://192.168.1.108:8085/api/recommendPoetry {â€œcodeâ€:200,â€messageâ€:â€æˆåŠŸ!â€,â€resultâ€:{â€œtitleâ€:â€é€å¢å­Ÿæ˜è¿˜ä¸Šéƒ½â€,â€contentâ€:â€æ±Ÿçš‹åŒ—é£è‡³ï¼Œå½’å®¢ç‹¬ä¼¤é­‚ã€‚|æ¥šæ°´é€¢ä¹¡é›ï¼Œå¹³é™µå¿†æ•…å›­ã€‚|å¾éª–å˜¶åˆ«é¦†ï¼Œè½æ—¥éšå¯’åŸã€‚|åº”åŠç§¦å·æœ›ï¼Œæ˜¥åæ»¡å›½é—¨ã€‚â€,â€authorsâ€:â€çšç„¶â€}} è®¿é—®ï¼šhttp://192.168.1.108:8085/api/searchPoetry?name=é»„é¹¤æ¥¼ {â€œcodeâ€:200,â€messageâ€:â€æˆåŠŸ!â€,â€resultâ€:[{â€œtitleâ€:â€é»„é¹¤æ¥¼â€,â€contentâ€:â€é»„é¹¤ä½•å¹´å»æ³å†¥ï¼Œé«˜æ¥¼åƒè½½å€šæ±ŸåŸã€‚|ç¢§äº‘æœå·å››å±±æ™¯ï¼Œæµæ°´å¤œä¼ ä¸‰å³¡å£°ã€‚|æŸ³æš—è¥¿å·ä¾›éª‹æœ›ï¼Œè‰èŠ³å—æµ¦éç¦»æƒ…ã€‚|ç™»ä¸´ä¸€æ™Œé¡»å›é¦–ï¼Œçœ‹å´ä¹¡å¿ƒä¸‡æ„Ÿç”Ÿã€‚â€,â€authorsâ€:â€å¢éƒ¢â€},{â€œtitleâ€:â€é»„é¹¤æ¥¼â€,â€contentâ€:â€äº‘é”å•å…¬æ´ï¼Œæœˆæ˜é»„é¹¤æ¥¼ã€‚|æŠ±å…³éæ•…å’ï¼Œè°è§ç¾½è¡£æ¸¸ã€‚â€,â€authorsâ€:â€ç‹åæœ‹â€},{â€œtitleâ€:â€é»„é¹¤æ¥¼â€,â€contentâ€:â€æ‰‹æŠŠä»™äººç»¿ç‰æï¼Œå¾è¡Œå¿½åŠæ—©ç§‹æœŸã€‚|è‹é¾™é˜™è§’å½’ä½•æ™šï¼Œé»„é¹¤æ¥¼ä¸­é†‰ä¸çŸ¥ã€‚|æ±Ÿæ±‰äº¤æµæ³¢æ¸ºæ¸ºï¼Œæ™‹å”é—è¿¹è‰ç¦»ç¦»ã€‚|å¹³ç”Ÿæœ€å–œå¬é•¿ç¬›ï¼Œè£‚çŸ³ç©¿äº‘ä½•å¤„å¹ã€‚â€,â€authorsâ€:â€é™†æ¸¸â€},{â€œtitleâ€:â€é»„é¹¤æ¥¼â€,â€contentâ€:â€é•¿æ±Ÿå·¨æµªæ‹å¤©æµ®ï¼ŒåŸéƒ­ç›¸æœ›ä¸‡æ™¯æ”¶ã€‚|æ±‰æ°´åŒ—åäº‘æ¢¦å…¥ï¼Œèœ€æ±Ÿè¥¿å¸¦æ´åº­æµã€‚|è§’å£°äº¤é€åƒå®¶æœˆï¼Œå¸†å½±ä¸­åˆ†ä¸¤å²¸ç§‹ã€‚|é»„é¹¤æ¥¼é«˜äººä¸è§ï¼Œå´éšé¹¦é¹‰è¿‡æ±€æ´²ã€‚â€,â€authorsâ€:â€æ¸¸ä¼¼â€},{â€œtitleâ€:â€é»„é¹¤æ¥¼â€,â€contentâ€:â€ç¿šé£æ ‹å®‡æ®åŸç«¯ï¼Œè½¦é©¬å°˜ä¸­å¾—å¼‚è§‚ã€‚|åŒçœ¼è«ä¾›æ·®åœ°é˜”ï¼Œä¸€æ±Ÿä¸å°½èœ€æ³¢å¯’ã€‚|è€ä»™æ¨ªç¬›æœˆäº­åˆï¼Œéªšå®¢æ€€ä¹¡æ—¥æ¬²æ®‹ã€‚|ç‹¬æŠšé—è¸ªå¢æ…¨æ…•ï¼Œå¾˜å¾Šä¸å¿ä¸‹å±‚æ ã€‚â€,â€authorsâ€:â€ç½—ä¸ä¹‹â€},{â€œtitleâ€:â€é»„é¹¤æ¥¼â€,â€contentâ€:â€å´”é¢¢é¢˜è¯—åœ¨ä¸Šå¤´ï¼Œç™»ä¸´ä½•å¿…æ›´å†¥æœã€‚|æ¥¼å‰é»„é¹¤ä¸é‡è§ï¼Œæ§›å¤–é•¿æ±Ÿç©ºè‡ªæµã€‚|ä¸‡é¡·çƒŸäº‘è¿æ¢¦æ³½ï¼Œä¸€å·é£æ™¯å€Ÿè¥¿å·ã€‚â€,â€authorsâ€:â€å¼ é¢™â€},{â€œtitleâ€:â€é»„é¹¤æ¥¼â€,â€contentâ€:â€æ˜”äººå·²ä¹˜ç™½äº‘å»ï¼Œæ—§å›½è¿å¤©ä¸çŸ¥å¤„ã€‚|æ€é‡è´¹å­çœŸä»™å­ï¼Œä»ä»–æµ®ä¸–æ‚²ç”Ÿæ­»ã€‚|é»„é¹¤ä¸€å»ä¸å¤è¿”ï¼Œå…‰é˜´æµè½¬å¿½å·²æ™šã€‚â€,â€authorsâ€:â€ç‹å¾—è‡£â€},{â€œtitleâ€:â€é»„é¹¤æ¥¼â€,â€contentâ€:â€ç™»çœŸè€…è°å­ï¼Œæ˜”æœ‰è´¹å…¬ç¥ã€‚|ç™½æ—¥ç‰ä¹¦ä¸‹ï¼Œé’å¤©é©¾é¹¤é£ã€‚|æ­¤åœ°å°‘ç•™æ†©ï¼Œç¥æ ‡æ€…ä¾ä¾ã€‚|æŒ¯è£¾è°¢å°˜æµŠï¼Œä¸å°”æ–¹è¿œè¿ã€‚|å±‚æ¥¼å® é™ˆè¿¹ï¼Œæ±Ÿå±±é•¿å››å›´ã€‚|ç™»ä¸´ç¾å•†ç´ ï¼Œé›¨æ°”è–„è¥¿æ™–ã€‚|æ°´è½å·è§œå«©ï¼Œé£è±ªå¸†èƒŒè‚¥ã€‚|é£˜ç„¶èµ·éæƒ³ï¼Œç³é¦†é–Ÿå²©æ‰‰ã€‚|æ˜æœˆè¯†æ‚ é˜”ï¼Œç™½äº‘ç–‘æ˜¯éã€‚|é‡‘æ¡ƒæœªé½ç†Ÿï¼Œè–¤éœ²è™å…ˆæ™ã€‚|é«˜æ ‘ä¸¤åè¡¨ï¼Œé•¿æ‹›ç¾½é©¾å½’ã€‚|çµç“¢äº”è‰²å‰‚ï¼Œå®šä¸é—æ°‘æŒ¥ã€‚|è‡ªé¡¾ä¹ä»™è´¨ï¼Œå»¶ç”ŸçŠ¹å¯å¸Œã€‚|åˆ€åœ­å‚¥ä¸åï¼Œå¦‚é¥±é¦–é˜³é¥¥ã€‚â€,â€authorsâ€:â€è´ºé“¸â€}]} æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼Œè·Ÿæˆ‘ç•™è¨€ã€‚åšå®¢åœ°å€ï¼šhttps://blog.aprcode.com/Feign-Http/æ•™ç¨‹æºç Githubåœ°å€ï¼šFeign-Httpæ•™ç¨‹æºç Giteeåœ°å€ï¼šFeign-Http","categories":[{"name":"Spring Cloud","slug":"Spring-Cloud","permalink":"https://lixhbs.gitee.io/blog/categories/Spring-Cloud/"}],"tags":[{"name":"Spring Cloud","slug":"Spring-Cloud","permalink":"https://lixhbs.gitee.io/blog/tags/Spring-Cloud/"}]},{"title":"ã€ŒSpring Bootã€Dockeré…ç½®SSLè¯ä¹¦ï¼ˆå…è´¹è¯ä¹¦ï¼‰","slug":"Spring-Boot-Docker-ssl","date":"2018-11-14T01:20:20.000Z","updated":"2018-12-20T03:52:10.759Z","comments":true,"path":"Spring-Boot-Docker-ssl/","link":"","permalink":"https://lixhbs.gitee.io/blog/Spring-Boot-Docker-ssl/","excerpt":"HTTPSåè®®æ˜¯ç”±SSL+HTTPåè®®æ„å»ºçš„å¯è¿›è¡ŒåŠ å¯†ä¼ è¾“ã€èº«ä»½è®¤è¯çš„ç½‘ç»œåè®®ï¼Œè¦æ¯”HTTPåè®®å®‰å…¨ã€‚","text":"HTTPSåè®®æ˜¯ç”±SSL+HTTPåè®®æ„å»ºçš„å¯è¿›è¡ŒåŠ å¯†ä¼ è¾“ã€èº«ä»½è®¤è¯çš„ç½‘ç»œåè®®ï¼Œè¦æ¯”HTTPåè®®å®‰å…¨ã€‚ æ•™ç¨‹ä»¥é˜¿é‡Œäº‘ä¸ºä¾‹ å¤‡æ¡ˆåŸŸååç”³è¯·å…è´¹è¯ä¹¦ è´­ä¹°è¯ä¹¦ é€‰æ‹©Symantec &gt; å…è´¹å‹DV SSL ä¸‹è½½è¯ä¹¦ï¼Œä»¥tomcatä¸ºä¾‹ ä»¥ã€ŒSpring Bootã€ æ¨é€Dockeré•œåƒåˆ°é˜¿é‡Œäº‘é•œåƒæœåŠ¡é¡¹ç›®ä»£ç ä¸ºåŸºç¡€ï¼Œæ–°å»ºspring-boot-docker-sslé¡¹ç›® é…ç½®application.properties1234567891011121314151617server.port= 8099server.ssl.key-store= classpath:cert-1537941630836_www.aprcode.com.pfxserver.ssl.key-store-password= MOi6arPC``` Dockeræ‰“åŒ…å’Œæ¨é€è¯·å‚è€ƒä¸Šä¸¤ç¯‡æ–‡ç« ï¼š [ã€ŒSpring Bootã€ Dockeræ‰“åŒ…é•œåƒ](https://blog.aprcode.com/Spring-Boot-docker/) [ã€ŒSpring Bootã€ æ¨é€Dockeré•œåƒåˆ°é˜¿é‡Œäº‘é•œåƒæœåŠ¡](https://blog.aprcode.com/Spring-Boot-Docker-Aliyun) åœ¨æœåŠ¡å™¨ä¸Šç™»å½•é•œåƒä»“åº“è·å–æœ€æ–°é•œåƒï¼Œå¹¶å¯åŠ¨ã€‚ ```shell[root@izwz99u47743ten25slpjpz ~]# docker imagesREPOSITORY TAG IMAGE ID CREATED SIZEregistry.cn-hangzhou.aliyuncs.com/aprcode/aprcode aprcode.2.0.0 279964124c46 14 minutes ago 119MBregistry.cn-hangzhou.aliyuncs.com/aprcode/aprcode aprcode.1.0.0 671bc04fb203 6 hours ago 119MB è®¿é—®https://www.aprcode.com:8099/ https://www.aprcode.com:8099/ æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼Œè·Ÿæˆ‘ç•™è¨€ã€‚ åšå®¢åœ°å€ï¼šSpring-Boot-Docker-Aliyunæ•™ç¨‹æºç Githubåœ°å€ï¼šSpring-Boot-Docker-Aliyunæ•™ç¨‹æºç Giteeåœ°å€ï¼šSpring-Boot-Docker-Aliyun","categories":[{"name":"Docker","slug":"Docker","permalink":"https://lixhbs.gitee.io/blog/categories/Docker/"}],"tags":[{"name":"Spring Boot","slug":"Spring-Boot","permalink":"https://lixhbs.gitee.io/blog/tags/Spring-Boot/"},{"name":"Docker","slug":"Docker","permalink":"https://lixhbs.gitee.io/blog/tags/Docker/"}]},{"title":"ã€ŒSpring Bootã€ æ¨é€Dockeré•œåƒåˆ°é˜¿é‡Œäº‘é•œåƒæœåŠ¡","slug":"Spring-Boot-Docker-Aliyun","date":"2018-11-14T01:20:03.000Z","updated":"2018-12-20T03:51:16.412Z","comments":true,"path":"Spring-Boot-Docker-Aliyun/","link":"","permalink":"https://lixhbs.gitee.io/blog/Spring-Boot-Docker-Aliyun/","excerpt":"å®¹å™¨é•œåƒæœåŠ¡ï¼ˆContainer Registryï¼‰æä¾›å®‰å…¨çš„åº”ç”¨é•œåƒæ‰˜ç®¡èƒ½åŠ›ï¼Œç²¾ç¡®çš„é•œåƒå®‰å…¨æ‰«æåŠŸèƒ½ï¼Œç¨³å®šçš„é•œåƒæ„å»ºæœåŠ¡ï¼Œä¾¿æ·çš„é•œåƒæˆæƒåŠŸèƒ½ï¼Œæ–¹ä¾¿ç”¨æˆ·è¿›è¡Œé•œåƒå…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚å®¹å™¨é•œåƒæœåŠ¡ç®€åŒ–äº†Registryçš„æ­å»ºè¿ç»´å·¥ä½œï¼Œæ”¯æŒå¤šåœ°åŸŸçš„é•œåƒæ‰˜ç®¡ï¼Œå¹¶è”åˆå®¹å™¨æœåŠ¡ç­‰äº‘äº§å“ï¼Œæ‰“é€ äº‘ä¸Šä½¿ç”¨Dockerçš„ä¸€ä½“åŒ–ä½“éªŒã€‚","text":"å®¹å™¨é•œåƒæœåŠ¡ï¼ˆContainer Registryï¼‰æä¾›å®‰å…¨çš„åº”ç”¨é•œåƒæ‰˜ç®¡èƒ½åŠ›ï¼Œç²¾ç¡®çš„é•œåƒå®‰å…¨æ‰«æåŠŸèƒ½ï¼Œç¨³å®šçš„é•œåƒæ„å»ºæœåŠ¡ï¼Œä¾¿æ·çš„é•œåƒæˆæƒåŠŸèƒ½ï¼Œæ–¹ä¾¿ç”¨æˆ·è¿›è¡Œé•œåƒå…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚å®¹å™¨é•œåƒæœåŠ¡ç®€åŒ–äº†Registryçš„æ­å»ºè¿ç»´å·¥ä½œï¼Œæ”¯æŒå¤šåœ°åŸŸçš„é•œåƒæ‰˜ç®¡ï¼Œå¹¶è”åˆå®¹å™¨æœåŠ¡ç­‰äº‘äº§å“ï¼Œæ‰“é€ äº‘ä¸Šä½¿ç”¨Dockerçš„ä¸€ä½“åŒ–ä½“éªŒã€‚ æ–°å»ºSpringBootåº”ç”¨å¹¶é…ç½®DockerFileå‚è€ƒã€ŒSpring Bootã€ Dockeræ‰“åŒ…é•œåƒï¼Œæ–°å»ºSpring-Boot-Docker-Aliyuné¡¹ç›® ä¿®æ”¹é…ç½®æ–‡ä»¶application.properties1server.port= 8099 Docker æ‰“åŒ…ï¼Œæ‰“åŒ…è¿‡ç¨‹å‚ç…§ã€ŒSpring Bootã€ Dockeræ‰“åŒ…é•œåƒ å¼€é€šé˜¿é‡Œé•œåƒæœåŠ¡è®¿é—®https://dev.aliyun.com/search.htmlè¿›å…¥ç®¡ç†ä¸­å¿ƒ åˆ›å»ºå‘½åç©ºé—´ è®¾ç½®Registryç™»å½•å¯†ç ï¼Œéé˜¿é‡Œäº‘ç™»å½•å¯†ç  ç¬¬ä¸€æ¬¡åˆ›å»ºä¼šå‡ºç°æ•™ç¨‹ï¼Œå’Œgithub åˆšåˆ›å»ºé¡¹ç›®ä¸€æ ·ï¼Œä¼šå‘ŠçŸ¥å¦‚æœæ¨é€ æ¨é€é•œåƒç™»å½•é˜¿é‡Œäº‘Docker Registry123$ docker login --username=134******93@163.com registry.cn-hangzhou.aliyuncs.com$ Password: $ Login Succeeded å°†é•œåƒæ¨é€åˆ°Registry docker tag [ImageId] registry.cn-hangzhou.aliyuncs.com/aprcode/aprcode:[é•œåƒç‰ˆæœ¬å·] 123456789101112131415161718$ docker imagesREPOSITORY TAG IMAGE ID CREATED SIZEaprcode/spring-boot-docker-aliyun latest 671bc04fb203 17 minutes ago 119MBopenjdk 8-jdk-alpine 97bc1352afde 2 weeks ago 103MB$ docker tag 671bc04fb203 registry.cn-hangzhou.aliyuncs.com/aprcode/aprcode:aprcode.1.0.0$ docker imagesREPOSITORY TAG IMAGE ID CREATED SIZEaprcode/spring-boot-docker-aliyun latest 671bc04fb203 19 minutes ago 119MBregistry.cn-hangzhou.aliyuncs.com/aprcode/aprcode aprcode.1.0.0 671bc04fb203 19 minutes ago 119MBopenjdk 8-jdk-alpine 97bc1352afde 2 weeks ago 103MB$ docker push registry.cn-hangzhou.aliyuncs.com/aprcode/aprcode:aprcode.1.0.0The push refers to repository [registry.cn-hangzhou.aliyuncs.com/aprcode/aprcode]5c52652cc20a: Pushed ed6f0bd39121: Layer already exists 0c3170905795: Layer already exists df64d3292fd6: Layer already exists aprcode.1.0.0: digest: sha256:88df67826b192791332ee79659f091634f04764d6c3d0feacc5dfd0c8cab2333 size: 1159 å› ä¸ºæˆ‘ä¹‹å‰æ¨é€äº†ä¸€ä¸ªï¼Œæ‰€ä»¥æ˜¾ç¤ºå·²å­˜åœ¨ï¼Œ ä¸å½±å“ã€‚ æ‹‰å–é•œåƒå¹¶å¯åŠ¨æ¨é€æˆåŠŸåå¯ä»¥åœ¨ä»»ä½•ä¸€ä¸ªåœ°æ–¹ç™»å½•ä½ çš„ä»“åº“æ‹‰å–é•œåƒäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ç™»å½•æˆ‘çš„é˜¿é‡Œè½»é‡åº”ç”¨æœåŠ¡å™¨æ‹‰å–æˆ‘ä»¬æ¨é€çš„é•œåƒï¼Œå¹¶å¯åŠ¨ã€‚æœåŠ¡å™¨å·²å®‰è£…Docker ç™»å½•æœåŠ¡å™¨12345678$ ssh root@***** -p 22root@******'s password:Last failed login: Wed Nov 14 10:54:19 CST 2018 from 59.173.241.186 on ssh:nottyThere were 2 failed login attempts since the last successful login.Last login: Wed Nov 14 08:41:08 2018 from 59.173.241.186Welcome to Alibaba Cloud Elastic Compute Service ![root@izwz99u47743ten25slpjpz ~]# ç™»å½•é˜¿é‡Œäº‘Docker Registry 123[root@izwz99u47743ten25slpjpz ~]# docker login --username=134******93@163.com registry.cn-hangzhou.aliyuncs.comPassword: Login Succeeded ä»Registryä¸­æ‹‰å–é•œåƒ 123456789[root@izwz99u47743ten25slpjpz ~]# docker pull registry.cn-hangzhou.aliyuncs.com/aprcode/aprcode:aprcode.1.0.0aprcode.1.0.0: Pulling from aprcode/aprcode4fe2ade4980c: Already exists6fc58a8d4ae4: Already existsef87ded15917: Already existsdf60cf9e6a56: Pull completeDigest: sha256:88df67826b192791332ee79659f091634f04764d6c3d0feacc5dfd0c8cab2333Status: Downloaded newer image for registry.cn-hangzhou.aliyuncs.com/aprcode/aprcode:aprcode.1.0.0[root@izwz99u47743ten25slpjpz ~]# å¯åŠ¨é•œåƒå°†80ç«¯å£æ˜ å°„åˆ°å†…ç½‘8099 ç«¯å£ä¸Š123[root@izwz99u47743ten25slpjpz ~]# docker run -d -p 80:8099 671bc04fb203d38062b4eb07a40f6a80ac28c4ec38d992bc534fd7645a34401e3dfb67492b92[root@izwz99u47743ten25slpjpz ~]# è®¿é—® http://www.aprcode.com/ {â€œnameâ€:â€aprcode.comâ€} æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼Œè·Ÿæˆ‘ç•™è¨€ã€‚ åšå®¢åœ°å€ï¼šSpring-Boot-Docker-Aliyunæ•™ç¨‹æºç Githubåœ°å€ï¼šSpring-Boot-Docker-Aliyunæ•™ç¨‹æºç Giteeåœ°å€ï¼šSpring-Boot-Docker-Aliyun","categories":[{"name":"Docker","slug":"Docker","permalink":"https://lixhbs.gitee.io/blog/categories/Docker/"}],"tags":[{"name":"Spring Boot","slug":"Spring-Boot","permalink":"https://lixhbs.gitee.io/blog/tags/Spring-Boot/"},{"name":"Docker","slug":"Docker","permalink":"https://lixhbs.gitee.io/blog/tags/Docker/"}]},{"title":"ã€ŒSpring Bootã€ Dockeræ‰“åŒ…é•œåƒ","slug":"Spring-Boot-docker","date":"2018-11-12T08:31:30.000Z","updated":"2018-12-20T03:56:52.655Z","comments":true,"path":"Spring-Boot-docker/","link":"","permalink":"https://lixhbs.gitee.io/blog/Spring-Boot-docker/","excerpt":"Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œè®©å¼€å‘è€…å¯ä»¥æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„å®¹å™¨ä¸­ï¼Œç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„ Linux æœºå™¨ä¸Šï¼Œä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–ã€‚å®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶ï¼Œç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£ã€‚","text":"Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œè®©å¼€å‘è€…å¯ä»¥æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„å®¹å™¨ä¸­ï¼Œç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„ Linux æœºå™¨ä¸Šï¼Œä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–ã€‚å®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶ï¼Œç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£ã€‚ Docker version 18.06.1-ce, build e68fc7a æ–°å»ºSpringBootåº”ç”¨å‚è€ƒã€ŠSpring Boot | ä½¿ç”¨Spring Initializrå¿«é€Ÿåˆ›å»ºã€‹ï¼Œæ–°å»ºdemoé¡¹ç›® å®Œæ•´pom.xlm1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.example&lt;/groupId&gt; &lt;artifactId&gt;demo&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;packaging&gt;jar&lt;/packaging&gt; &lt;name&gt;demo&lt;/name&gt; &lt;description&gt;Demo project for Spring Boot&lt;/description&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.1.0.RELEASE&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt; &lt;java.version&gt;1.8&lt;/java.version&gt; &lt;docker.image.prefix&gt;cyinfo-demo&lt;/docker.image.prefix&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;finalName&gt;docker-demo&lt;/finalName&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;groupId&gt;com.spotify&lt;/groupId&gt; &lt;artifactId&gt;dockerfile-maven-plugin&lt;/artifactId&gt; &lt;version&gt;1.3.6&lt;/version&gt; &lt;configuration&gt; &lt;repository&gt;$&#123;docker.image.prefix&#125;/$&#123;project.artifactId&#125;&lt;/repository&gt; &lt;buildArgs&gt; &lt;JAR_FILE&gt;target/$&#123;project.build.finalName&#125;.jar&lt;/JAR_FILE&gt; &lt;/buildArgs&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;&lt;/project&gt; ä¿®æ”¹å¯åŠ¨æ–‡ä»¶123456789101112131415161718192021222324252627282930package com.example.demo;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.RequestBody;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.ResponseBody;import java.util.HashMap;import java.util.Map;@SpringBootApplication@Controllerpublic class DemoApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(DemoApplication.class, args); &#125; @RequestMapping(\"/user/find\") @ResponseBody public Object findUser ()&#123; Map&lt;String, String&gt; map = new HashMap&lt;&gt;(); map.put(\"name\", \"aprcode.com\"); return map; &#125;&#125; æ·»åŠ DockerFileæ–‡ä»¶åœ¨é¡¹ç›®æ ¹ç›®å½•æ·»åŠ DockerFileæ–‡ä»¶ 12345FROM openjdk:8-jdk-alpineVOLUME /tmpARG JAR_FILECOPY $&#123;JAR_FILE&#125; app.jarENTRYPOINT [\"java\",\"-jar\",\"/app.jar\"] å‚æ•°è¯¦è§£FROM1234567891011121314151617181920212223242526272829303132333435363738394041424344454647FROM &lt;image&gt; [AS &lt;name&gt;] æˆ– FROM &lt;image&gt;[:&lt;tag&gt;] [AS &lt;name&gt;] æˆ– FROM &lt;image&gt;[@&lt;digest&gt;] [AS &lt;name&gt;]``` FROMä¸ºåç»­æŒ‡ä»¤è®¾ç½®åŸºç¡€é•œåƒ,å› æ­¤ï¼Œæœ‰æ•ˆçš„Dockerfileå¿…é¡»ä»¥FROMæŒ‡ä»¤å¼€å¤´ï¼Œé•œåƒå¯ä»¥æ˜¯ä»»ä½•æœ‰æ•ˆå›¾åƒ - é€šè¿‡ä»[Public Repositories](https://docs.docker.com/get-started/#test-docker-installation)æå–é•œåƒæ¥å¯åŠ¨å®ƒå°¤å…¶å®¹æ˜“ã€‚- `ARG`æ˜¯`Dockerfile`ä¸­å”¯ä¸€å¯ä»¥åœ¨`FROM`ä¹‹å‰çš„æŒ‡ä»¤ã€‚è¯·å‚é˜…äº†è§£[ARGå’ŒFROMå¦‚ä½•äº¤äº’](https://docs.docker.com/engine/reference/builder/#understand-how-arg-and-from-interact)ã€‚- `FROM`å¯ä»¥åœ¨å•ä¸ª`Dockerfile`ä¸­å¤šæ¬¡å‡ºç°ä»¥åˆ›å»ºå¤šé•œåƒï¼Œæˆ–è€…ä½¿ç”¨ä¸€ä¸ªæ„å»ºé˜¶æ®µä½œä¸ºå¦ä¸€ä¸ªæ„å»ºé˜¶æ®µçš„ä¾èµ–é¡¹ã€‚åªéœ€åœ¨æ¯ä¸ªæ–°çš„`FROM`æŒ‡ä»¤ä¹‹å‰è®°ä¸‹æäº¤è¾“å‡ºçš„æœ€åä¸€ä¸ªçš„é•œåƒIDã€‚æ¯ä¸ªFROMæŒ‡ä»¤æ¸…é™¤å…ˆå‰æŒ‡ä»¤åˆ›å»ºçš„ä»»ä½•çŠ¶æ€ã€‚- tagæˆ–digestæ˜¯å¯é€‰çš„ã€‚å¦‚æœçœç•¥å…¶ä¸­ä»»ä½•ä¸€ä¸ªï¼Œæ„å»ºå™¨å°†é»˜è®¤ä½¿ç”¨latestã€‚å¦‚æœæ„å»ºå™¨ä¸tagå€¼ä¸åŒ¹é…ï¼Œåˆ™æ„å»ºå™¨å°†è¿”å›é”™è¯¯ã€‚##### RUNå°†åœ¨å½“å‰imageä¹‹ä¸Šçš„æ–°å±‚ä¸­æ‰§è¡Œä»»ä½•å‘½ä»¤ï¼Œå¹¶æäº¤ç»“æœã€‚ç”Ÿæˆçš„å·²æäº¤imageå°†ç”¨äºDockerfileä¸­çš„ä¸‹ä¸€æ­¥ã€‚##### EXPOSE`EXPOSE`æŒ‡ä»¤é€šçŸ¥`Docker`å®¹å™¨åœ¨è¿è¡Œæ—¶ä¾¦å¬æŒ‡å®šçš„ç½‘ç»œç«¯å£ã€‚`EXPOSE`ä¸ä½¿ä¸»æœºçš„å®¹å™¨çš„ç«¯å£å¯è®¿é—®ã€‚ä¸ºæ­¤ï¼Œå¿…é¡»ä½¿ç”¨-pæ ‡å¿—å‘å¸ƒä¸€ç³»åˆ—ç«¯å£ï¼Œæˆ–è€…ä½¿ç”¨-Pæ ‡å¿—å‘å¸ƒæ‰€æœ‰æš´éœ²çš„ç«¯å£ã€‚æ‚¨å¯ä»¥å…¬å¼€ä¸€ä¸ªç«¯å£å·ï¼Œå¹¶ç”¨å¦ä¸€ä¸ªç«¯å£å·åœ¨å¤–éƒ¨å‘å¸ƒã€‚##### VOLUME`VOLUME`æŒ‡ä»¤åˆ›å»ºå…·æœ‰æŒ‡å®šåç§°çš„æŒ‚è½½ç‚¹ï¼Œå¹¶å°†å…¶æ ‡è®°ä¸ºä»æœ¬æœºä¸»æœºæˆ–å…¶ä»–å®¹å™¨ä¿ç•™å¤–éƒ¨æŒ‚è½½çš„å·ã€‚è¯¥å€¼å¯ä»¥æ˜¯JSONæ•°ç»„`VOLUME [&quot;/var/log/&quot;]`æˆ–å…·æœ‰å¤šä¸ªå‚æ•°çš„çº¯å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚`VOLUME /var/log`æˆ–`VOLUME /var/log /var/db`ã€‚æœ‰å…³é€šè¿‡`Docker`å®¢æˆ·ç«¯çš„æ›´å¤šä¿¡æ¯/ç¤ºä¾‹å’Œå®‰è£…è¯´æ˜ï¼Œè¯·å‚é˜…é€šè¿‡å·æ–‡æ¡£å…±äº«ç›®å½•ã€‚##### ENTRYPOINT `ENTRYPOINT`æ˜¯CMDæŒ‡ä»¤æ›´å¤šæŒ‡ä»¤å¯ä»¥å‚è€ƒ[DockerFile ä¸­æ–‡](https://www.baidu.com/s?wd=DockerFile%20%E4%B8%AD%E6%96%87&amp;rsv_spt=1&amp;rsv_iqid=0xb5acefd3000249b6&amp;issp=1&amp;f=8&amp;rsv_bp=1&amp;rsv_idx=2&amp;ie=utf-8&amp;rqlang=cn&amp;tn=baiduhome_pg&amp;rsv_enter=0&amp;oq=DockerFile&amp;rsv_t=2076bK4Pozu6Yy%2F6NPAVffBVPIh5IQ79Gz8Zo5vfWZwuzPJ4o7eJlNINa4YTUgEpxWDA&amp;rsv_pq=d4550aa00000ceec&amp;inputT=877&amp;rsv_sug3=86&amp;rsv_sug1=64&amp;rsv_sug7=100&amp;rsv_sug2=0&amp;rsv_sug4=877)#### å¼€å§‹æ‰“åŒ…```shell$ mvn install dockerfile:build...[INFO] Successfully built 1699cc725e47[INFO] Successfully tagged cyinfo-demo/demo:latest[INFO] [INFO] Detected build of image with id 1699cc725e47[INFO] Building jar: /Users/li/SoftResourceSpace/Space/IDEA/demo/target/docker-demo-docker-info.jar[INFO] Successfully built cyinfo-demo/demo:latest[INFO] ------------------------------------------------------------------------[INFO] BUILD SUCCESS[INFO] ------------------------------------------------------------------------[INFO] Total time: 13.866 s[INFO] Finished at: 2018-11-12T19:36:25+08:00[INFO] ------------------------------------------------------------------------... æ„å»ºæˆåŠŸï¼ŒæœŸé—´å¦‚æœæœ‰ä»€ä¹ˆå¼‚å¸¸å¯ä»¥æäº¤issue 12345$ docker images # æŸ¥çœ‹é•œåƒREPOSITORY TAG IMAGE ID CREATED SIZEcyinfo-demo/demo latest 1699cc725e47 2 minutes ago 119MB$ docker run -d --name cyinfo -p 8081:8080 1699cc725e47 # è¿è¡Œé•œåƒè‡ªå®šä¹‰åç§° cyinfo è®¿é—® http://localhost:8081/user/find {â€œnameâ€:â€aprcode.comâ€} æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼Œè·Ÿæˆ‘ç•™è¨€ã€‚ åšå®¢åœ°å€ï¼šhttps://blog.aprcode.com/Spring-Boot-docker/æ•™ç¨‹æºç Githubåœ°å€ï¼šdemoæ•™ç¨‹æºç Giteeåœ°å€ï¼šdemo","categories":[{"name":"Docker","slug":"Docker","permalink":"https://lixhbs.gitee.io/blog/categories/Docker/"}],"tags":[{"name":"Spring Boot","slug":"Spring-Boot","permalink":"https://lixhbs.gitee.io/blog/tags/Spring-Boot/"},{"name":"Docker","slug":"Docker","permalink":"https://lixhbs.gitee.io/blog/tags/Docker/"}]},{"title":"ã€Spring cloudã€‘ç¬¬å…­ç¯‡ Declarative REST Client | å£°æ˜æ€§å®¢æˆ·ç«¯ - Feign","slug":"sc-f-e-06","date":"2018-11-06T04:00:00.000Z","updated":"2018-12-20T03:50:40.387Z","comments":true,"path":"sc-f-e-06/","link":"","permalink":"https://lixhbs.gitee.io/blog/sc-f-e-06/","excerpt":"Feignæ˜¯ä¸€ä¸ªå£°æ˜æ€§webæœåŠ¡å®¢æˆ·ç«¯ã€‚å®ƒä½¿ç¼–å†™webæœåŠ¡æ›´ç®€å•ï¼Œä½¿ç”¨Feignæ—¶éœ€åˆ›å»ºä¸€ä¸ªæ¥å£å¹¶æ³¨è§£ï¼Œå®ƒå…·æœ‰å¯æ‹”æ’çš„æ³¨è§£æ”¯æŒï¼ŒåŒ…æ‹¬Feignæ³¨è§£å’ŒJAX-RSæ³¨è§£ã€‚Feignè¿˜æ”¯æŒå¯æ’æ‹”ç¼–ç å™¨å’Œè§£ç å™¨ã€‚Spring Cloudå¢åŠ äº†å¯¹Spring MVCæ³¨é‡Šçš„æ”¯æŒï¼Œå¹¶ä½¿ç”¨äº†Spring Webä¸­é»˜è®¤ä½¿ç”¨çš„ç›¸åŒHttpMessageConvertersï¼Œåœ¨ä½¿ç”¨Feignæ—¶ï¼ŒSpring Cloudé›†æˆäº†Ribbonå’ŒEurekaä»¥æä¾›è´Ÿè½½å‡è¡¡çš„httpå®¢æˆ·ç«¯ã€‚","text":"Feignæ˜¯ä¸€ä¸ªå£°æ˜æ€§webæœåŠ¡å®¢æˆ·ç«¯ã€‚å®ƒä½¿ç¼–å†™webæœåŠ¡æ›´ç®€å•ï¼Œä½¿ç”¨Feignæ—¶éœ€åˆ›å»ºä¸€ä¸ªæ¥å£å¹¶æ³¨è§£ï¼Œå®ƒå…·æœ‰å¯æ‹”æ’çš„æ³¨è§£æ”¯æŒï¼ŒåŒ…æ‹¬Feignæ³¨è§£å’ŒJAX-RSæ³¨è§£ã€‚Feignè¿˜æ”¯æŒå¯æ’æ‹”ç¼–ç å™¨å’Œè§£ç å™¨ã€‚Spring Cloudå¢åŠ äº†å¯¹Spring MVCæ³¨é‡Šçš„æ”¯æŒï¼Œå¹¶ä½¿ç”¨äº†Spring Webä¸­é»˜è®¤ä½¿ç”¨çš„ç›¸åŒHttpMessageConvertersï¼Œåœ¨ä½¿ç”¨Feignæ—¶ï¼ŒSpring Cloudé›†æˆäº†Ribbonå’ŒEurekaä»¥æä¾›è´Ÿè½½å‡è¡¡çš„httpå®¢æˆ·ç«¯ã€‚ Feign is a declarative web service client. It makes writing web service clients easier. To use Feign create an interface and annotate it. It has pluggable annotation support including Feign annotations and JAX-RS annotations. Feign also supports pluggable encoders and decoders. Spring Cloud adds support for Spring MVC annotations and for using the same HttpMessageConverters used by default in Spring Web. Spring Cloud integrates Ribbon and Eureka to provide a load balanced http client when using Feign. æœ¬æ•™ç¨‹åœ¨ã€Spring cloudã€‘ç¬¬äº”ç¯‡ Custom Zuul Filter | è‡ªå®šä¹‰è¿‡æ»¤å™¨çš„åŸºç¡€ä¸Šæ·»åŠ ä»£ç ã€‚ How to Include Feign | å¦‚ä½•åŒ…å« Feign To include Feign in your project use the starter with group org.springframework.cloud and artifact id spring-cloud-starter-openfeign. See the Spring Cloud Project page for details on setting up your build system with the current Spring Cloud Release Train. åœ¨é¡¹ç›®ä¸­ä½¿ç”¨Feignï¼Œéœ€è¦é…ç½® pom.xml, æ ¹æ®ä½ å½“å‰çš„Spring Cloudç‰ˆæœ¬åœ¨Spring Cloud Project pageä¸­å¯ä»¥æŸ¥çœ‹è¯¦ç»†è¯´æ˜ã€‚ åˆ›å»ºserver-feignå·¥ç¨‹ å®Œæ•´pom.xml 12345678910111213141516171819202122232425262728293031323334353637383940&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.cyinfotech&lt;/groupId&gt; &lt;artifactId&gt;server-feign&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;packaging&gt;jar&lt;/packaging&gt; &lt;name&gt;server-feign&lt;/name&gt; &lt;description&gt;Demo project for Spring Boot&lt;/description&gt; &lt;parent&gt; &lt;groupId&gt;com.cyinfotech&lt;/groupId&gt; &lt;artifactId&gt;sc-f-e-06&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;dependencies&gt; &lt;!--Eureka-Client--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt;``` `ServerFeignApplication`æ·»åŠ æ³¨è§£ package com.cyinfotech.serverfeign; import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.cloud.netflix.eureka.EnableEurekaClient;import org.springframework.cloud.openfeign.EnableFeignClients; @SpringBootApplication@EnableFeignClients@EnableEurekaClientpublic class ServerFeignApplication { public static void main(String[] args) { SpringApplication.run(ServerFeignApplication.class, args); } } 12345678910111213 æ·»åŠ å¦‚ä¸‹é…ç½®æ–‡ä»¶`application.yml` ```yamlspring: application: name: server-feignserver: port: 8085eureka: client: serviceUrl: defaultZone: http://localhost:8761/eureka/ åˆ›å»ºFeignæœåŠ¡æ¥å£CyinfoServiceï¼Œå®šä¹‰è°ƒç”¨æœåŠ¡ã€‚12345678910111213141516171819package com.cyinfotech.serverfeign;import org.springframework.cloud.openfeign.FeignClient;import org.springframework.stereotype.Service;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestMethod;import org.springframework.web.bind.annotation.RequestParam;@FeignClient(\"eureka-client\")@Servicepublic interface CyinfoService &#123; @RequestMapping(method = RequestMethod.GET, value = \"/hi\") String hi (@RequestParam(value = \"name\") String name);&#125;``` åˆ›å»º`Controller` package com.cyinfotech.serverfeign; import org.springframework.beans.factory.annotation.Autowired;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestParam;import org.springframework.web.bind.annotation.RestController; /** @author ç…®é…’æ³›èˆŸ. @title controller @program sc-f-e-06 @description controller @createtime 2018-11-06 10:38*/@RestControllerpublic class CyinfoController { @Autowired CyinfoService cyinfoService; @RequestMapping(value = â€œ/hiâ€) public String hi (@RequestParam(value = â€œnameâ€) String name) { return cyinfoService.hi(name); }} ` å¯åŠ¨æœåŠ¡ eureka-server eureka-client server-feign è®¿é—®ï¼šhttp://localhost:8085/hi?name=cyinfo Hello world, by eureka-client. nameï¼šcyinfo æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼Œè·Ÿæˆ‘ç•™è¨€ã€‚ åšå®¢åœ°å€ï¼šhttps://blog.aprcode.com/sc-f-e-06/æ•™ç¨‹æºç Githubåœ°å€ï¼šsc-f-e-06æ•™ç¨‹æºç Giteeåœ°å€ï¼šsc-f-e-06","categories":[{"name":"Spring Cloud","slug":"Spring-Cloud","permalink":"https://lixhbs.gitee.io/blog/categories/Spring-Cloud/"}],"tags":[{"name":"Spring Cloud","slug":"Spring-Cloud","permalink":"https://lixhbs.gitee.io/blog/tags/Spring-Cloud/"}]},{"title":"ã€Œleetcodeã€åè½¬æ•´æ•°","slug":"leetcode-002","date":"2018-11-05T11:00:00.000Z","updated":"2018-11-05T01:34:44.684Z","comments":true,"path":"leetcode-002/","link":"","permalink":"https://lixhbs.gitee.io/blog/leetcode-002/","excerpt":"ç»™å®šä¸€ä¸ª 32 ä½æœ‰ç¬¦å·æ•´æ•°ï¼Œå°†æ•´æ•°ä¸­çš„æ•°å­—è¿›è¡Œåè½¬ã€‚","text":"ç»™å®šä¸€ä¸ª 32 ä½æœ‰ç¬¦å·æ•´æ•°ï¼Œå°†æ•´æ•°ä¸­çš„æ•°å­—è¿›è¡Œåè½¬ã€‚ ç¤ºä¾‹ 1:12è¾“å…¥: 123è¾“å‡º: 321 ç¤ºä¾‹ 2:12è¾“å…¥: -123è¾“å‡º: -321 ç¤ºä¾‹ 1:12è¾“å…¥: 120è¾“å‡º: 21 æ³¨æ„: å‡è®¾æˆ‘ä»¬çš„ç¯å¢ƒåªèƒ½å­˜å‚¨32ä½æœ‰ç¬¦å·æ•´æ•°ï¼Œå…¶æ•°å€¼èŒƒå›´æ˜¯ [âˆ’231, 231âˆ’1]ã€‚æ ¹æ®è¿™ä¸ªå‡è®¾ï¼Œå¦‚æœåè½¬åçš„æ•´æ•°æº¢å‡ºï¼Œåˆ™è¿”å› 0ã€‚ æ–¹æ³•ï¼šå¼¹å‡ºå’Œæ¨å…¥æ•°å­— &amp; æº¢å‡ºå‰è¿›è¡Œæ£€æŸ¥æ€è·¯ æˆ‘ä»¬å¯ä»¥ä¸€æ¬¡æ„å»ºåè½¬æ•´æ•°çš„ä¸€ä½æ•°å­—ã€‚åœ¨è¿™æ ·åšçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é¢„å…ˆæ£€æŸ¥å‘åŸæ•´æ•°é™„åŠ å¦ä¸€ä½æ•°å­—æ˜¯å¦ä¼šå¯¼è‡´æº¢å‡ºã€‚ ç®—æ³• åè½¬æ•´æ•°çš„æ–¹æ³•å¯ä»¥ä¸åè½¬å­—ç¬¦ä¸²è¿›è¡Œç±»æ¯”ã€‚ æˆ‘ä»¬æƒ³é‡å¤â€œå¼¹å‡ºâ€ xx çš„æœ€åä¸€ä½æ•°å­—ï¼Œå¹¶å°†å®ƒâ€œæ¨å…¥â€åˆ° rev çš„åé¢ã€‚æœ€åï¼Œrev å°†ä¸ xç›¸åã€‚ è¦åœ¨æ²¡æœ‰è¾…åŠ©å †æ ˆ/æ•°ç»„çš„å¸®åŠ©ä¸‹ â€œå¼¹å‡ºâ€ å’Œ â€œæ¨å…¥â€ æ•°å­—ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ•°å­¦æ–¹æ³•ã€‚ 1234567//pop operation:pop = x % 10;x /= 10;//push operation:temp = rev * 10 + pop;rev = temp; ä½†æ˜¯ï¼Œè¿™ç§æ–¹æ³•å¾ˆå±é™©ï¼Œå› ä¸ºå½“ temp=revâ‹…10+pop æ—¶ä¼šå¯¼è‡´æº¢å‡ºã€‚ å¹¸è¿çš„æ˜¯ï¼Œäº‹å…ˆæ£€æŸ¥è¿™ä¸ªè¯­å¥æ˜¯å¦ä¼šå¯¼è‡´æº¢å‡ºå¾ˆå®¹æ˜“ã€‚ å°†è¾“å…¥å€¼å–ä½™ä¸rev*10ç›¸åŠ ç¿»è½¬æ•°ï¼Œåˆ¤æ–­ç¿»è½¬çš„ğŸ“šæ˜¯å¦å¤§äºintçš„æœ€å¤§å€¼å’Œå°äºæœ€å°å€¼.Integer.MIN_VALUE = -2147483648.Integer.MAX_VALUE = 2147483647.æ‰€ä»¥ å½“x &lt; (Integer.MIN_VALUE / 10 = -8) æ—¶å°±ä¼šæº¢å‡º.æ‰€ä»¥ å½“x &gt; (Integer.MAX_VALUE / 10 = 7) æ—¶å°±ä¼šæº¢å‡º. class Solution { public int reverse(int x) { int rev = 0; while (x != 0) { int pop = x % 10; x /= 10; if (rev &gt; Integer.MAX_VALUE/10 || (rev == Integer.MAX_VALUE / 10 &amp;&amp; pop &gt; 7)) return 0; if (rev &lt; Integer.MIN_VALUE/10 || (rev == Integer.MIN_VALUE / 10 &amp;&amp; pop &lt; -8)) return 0; rev = rev * 10 + pop; } return rev; } }","categories":[],"tags":[]},{"title":"ã€Œleetcodeã€ä¸¤æ•°ä¹‹å’Œ","slug":"leetcode-001","date":"2018-10-31T02:04:19.000Z","updated":"2018-11-05T01:19:08.245Z","comments":true,"path":"leetcode-001/","link":"","permalink":"https://lixhbs.gitee.io/blog/leetcode-001/","excerpt":"ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„å’Œä¸€ä¸ªç›®æ ‡å€¼ï¼Œæ‰¾å‡ºæ•°ç»„ä¸­å’Œä¸ºç›®æ ‡å€¼çš„ä¸¤ä¸ªæ•°ã€‚ ä½ å¯ä»¥å‡è®¾æ¯ä¸ªè¾“å…¥åªå¯¹åº”ä¸€ç§ç­”æ¡ˆï¼Œä¸”åŒæ ·çš„å…ƒç´ ä¸èƒ½è¢«é‡å¤åˆ©ç”¨ã€‚","text":"ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„å’Œä¸€ä¸ªç›®æ ‡å€¼ï¼Œæ‰¾å‡ºæ•°ç»„ä¸­å’Œä¸ºç›®æ ‡å€¼çš„ä¸¤ä¸ªæ•°ã€‚ ä½ å¯ä»¥å‡è®¾æ¯ä¸ªè¾“å…¥åªå¯¹åº”ä¸€ç§ç­”æ¡ˆï¼Œä¸”åŒæ ·çš„å…ƒç´ ä¸èƒ½è¢«é‡å¤åˆ©ç”¨ã€‚ ç¤ºä¾‹: ç»™å®š nums = [2, 7, 11, 15], target = 9 å› ä¸º nums[0] + nums[1] = 2 + 7 = 9æ‰€ä»¥è¿”å› [0, 1] æˆ‘çš„è§£ç­”ï¼ˆæš´åŠ›ï¼‰ 12345678910111213class Solution &#123; public int[] twoSum(int[] nums, int target) &#123; int n = nums.length; for (int i = 0; i &lt; n; i++) &#123; for (int m = i + 1; m &lt; n; m++) &#123; if ( target - nums[m] == nums[i] ) &#123; return new int[]&#123;i, m&#125;; &#125; &#125; &#125; return null; &#125;&#125; é¢˜ç›®ç†è§£ è®¡ç®—å‡ºè¿™ä¸ªæ•°ç»„ä¸­ä¸¤ä¸ªæ•°å­—ä¹‹å’Œä¸ºç›®æ ‡æ•°çš„ç´¢å¼•ï¼Œæ•°ç»„ä¸­åŒæ ·çš„å…ƒç´ ä¸èƒ½å¤ç”¨ã€‚ å®˜æ–¹ç­”æ¡ˆ æ–¹æ³•ä¸€ï¼š æš´åŠ›è§£æ³•ï¼Œå¾ªç¯ä¸¤æ¬¡ï¼Œè€—æ—¶æ¯”è¾ƒé•¿ã€‚12345678910public int[] twoSum(int[] nums, int target) &#123; for (int i = 0; i &lt; nums.length; i++) &#123; for (int j = i + 1; j &lt; nums.length; j++) &#123; if (nums[j] == target - nums[i]) &#123; return new int[] &#123; i, j &#125;; &#125; &#125; &#125; throw new IllegalArgumentException(&quot;No two sum solution&quot;);&#125; æ–¹æ³•äºŒ å¯ä»¥ç”¨å“ˆå¸Œè¡¨å­˜å‚¨å…ƒç´ å’Œå¯¹åº”ç´¢å¼•çš„ä½ç½®ï¼Œç„¶åå¾ªç¯æ¯”å¯¹ã€‚ç”±äºå…ˆå°†æ‰€æœ‰çš„æ•°æ®éƒ½å­˜å…¥HashMapï¼Œæ‰€ä»¥åé¢åˆ¤æ–­çš„æ—¶å€™éœ€è¦åˆ¤æ–­æ˜¯å¦é‡å¤ä½¿ç”¨ã€‚ 12345678910111213public int[] twoSum(int[] nums, int target) &#123; Map&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;(); for (int i = 0; i &lt; nums.length; i++) &#123; map.put(nums[i], i); &#125; for (int i = 0; i &lt; nums.length; i++) &#123; int complement = target - nums[i]; if (map.containsKey(complement) &amp;&amp; map.get(complement) != i) &#123; return new int[] &#123; i, map.get(complement) &#125;; &#125; &#125; throw new IllegalArgumentException(\"No two sum solution\");&#125; æ–¹æ³•ä¸‰ å‚ç…§ç¬¬äºŒç§æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€æ¬¡å®Œæˆï¼Œå°†ç›®æ ‡å€¼å’Œå…ƒç´ çš„å·®åœ¨HashMapä¸­æŸ¥æ‰¾ï¼Œå¦‚æœæ²¡æœ‰åˆ™æ”¾å…¥HashMapä¸­ä¾›ä¸‹æ¬¡æŸ¥æ‰¾ã€‚1234567891011public int[] twoSum(int[] nums, int target) &#123; Map&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;(); for (int i = 0; i &lt; nums.length; i++) &#123; int complement = target - nums[i]; if (map.containsKey(complement)) &#123; return new int[] &#123; map.get(complement), i &#125;; &#125; map.put(nums[i], i); &#125; throw new IllegalArgumentException(\"No two sum solution\");&#125;","categories":[],"tags":[]},{"title":"ã€Spring cloudã€‘ç¬¬äº”ç¯‡ Custom Zuul Filter | è‡ªå®šä¹‰è¿‡æ»¤å™¨","slug":"sc-f-e-05","date":"2018-10-30T10:00:00.000Z","updated":"2018-12-20T03:50:36.430Z","comments":true,"path":"sc-f-e-05/","link":"","permalink":"https://lixhbs.gitee.io/blog/sc-f-e-05/","excerpt":"Zuulå¯ä»¥åˆ†ä¸ºå››ç§è¿‡æ»¤ç±»å‹ï¼špreã€routeã€postå’Œerrorï¼Œå¯ä»¥æ ¹æ®é¡¹ç›®å®é™…æƒ…å†µé€‰æ‹©ä¸åŒçš„è¿‡æ»¤ç±»å‹ï¼Œä¹Ÿå¯ä»¥æŒ‰ç…§filterOrderæ’åºã€‚","text":"Zuulå¯ä»¥åˆ†ä¸ºå››ç§è¿‡æ»¤ç±»å‹ï¼špreã€routeã€postå’Œerrorï¼Œå¯ä»¥æ ¹æ®é¡¹ç›®å®é™…æƒ…å†µé€‰æ‹©ä¸åŒçš„è¿‡æ»¤ç±»å‹ï¼Œä¹Ÿå¯ä»¥æŒ‰ç…§filterOrderæ’åºã€‚ æœ¬æ•™ç¨‹åœ¨ã€Spring cloudã€‘ç¬¬å››ç¯‡ Router and Filter | è·¯ç”±å’Œè¿‡æ»¤å™¨ - Zuulçš„åŸºç¡€ä¸Šæ·»åŠ ä»£ç ã€‚ Custom Zuul Filter Examplesæœ¬ç¯‡å°†è°ƒè¯•å››ç§è¿‡æ»¤ç±»å‹ã€‚ to classify a filter by type. Standard types in Zuul are â€œpreâ€ for pre-routing filtering, â€œrouteâ€ for routing to an origin, â€œpostâ€ for post-routing filters, â€œerrorâ€ for error handling. We also support a â€œstaticâ€ type for static responses see StaticResponseFilter. Any filterType made be created or added and run by calling FilterProcessor.runFilters(type) pre - é¢„è·¯ç”±è¿‡æ»¤ route - è·¯ç”±ä¸­ post - è·¯ç”±å error - é”™è¯¯å¤„ç† How to Write a Pre Filter Pre filters set up data in the RequestContext for use in filters downstream. The main use case is to set information required for route filters é¢„è¿‡æ»¤å™¨åœ¨RequestContextä¸­è®¾ç½®æ•°æ®ï¼Œä»¥ä¾¿åœ¨ä¸‹æ¸¸è¿‡æ»¤å™¨ä¸­ä½¿ç”¨ã€‚ä¸»è¦ç”¨ä¾‹æ˜¯è®¾ç½®è·¯ç”±è¿‡æ»¤å™¨æ‰€éœ€çš„ä¿¡æ¯ åœ¨server-zuulå·¥ç¨‹ä¸­æ–°å»ºç±»preZuulServer å¯ä»¥åœ¨è®¿é—®è·¯æœ‰å‰æ ¡éªŒæ˜¯å¦æœ‰æƒé™è®¿é—®ç­‰æ“ä½œã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344@Componentpublic class preZuulFilter extends ZuulFilter &#123; @Override public String filterType() &#123; return PRE_TYPE; &#125; @Override public int filterOrder() &#123; // è¿‡æ»¤é¡ºåº return 0; &#125; @Override public boolean shouldFilter() &#123; // æ˜¯å¦è¿‡æ»¤ return true; &#125; @Override public Object run() throws ZuulException &#123; RequestContext requestContext = RequestContext.getCurrentContext(); HttpServletRequest request = requestContext.getRequest(); String name = request.getParameter(&quot;name&quot;); if (StringUtils.isNotEmpty(name) &amp;&amp; name.equals(&quot;CHYIT&quot;)) &#123; requestContext.setSendZuulResponse(true); &#125; else &#123; requestContext.setSendZuulResponse(false); try &#123; HttpServletResponse res = requestContext.getResponse(); res.setContentType(&quot;text/html;charset=UTF-8&quot;); res.setCharacterEncoding(&quot;UTF-8&quot;); res.getWriter().write(&quot;ç”¨æˆ·æ ¡éªŒä¸é€šè¿‡ï¼ï¼ï¼&quot;); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; return null; &#125;&#125; ä¿®æ”¹eureka-client EurekaClientApplicationç±» 123456789101112public class EurekaClientApplication &#123; @RequestMapping(&quot;/hi&quot;) public String home(String name) &#123; return &quot;Hello world, by eureka-client. nameï¼š&quot; + name; &#125; public static void main(String[] args) &#123; new SpringApplicationBuilder(EurekaClientApplication.class).web(true).run(args); &#125;&#125; è®¿é—®ï¼šhttp://192.168.5.165:8084/ec/hi?name=name ç”¨æˆ·æ ¡éªŒä¸é€šè¿‡ï¼ï¼ï¼ æ”¾é—®ï¼šhttp://192.168.5.165:8084/ec/hi?name=CHYIT Hello world, by eureka-client. nameï¼šCHYIT ç„¶ååˆ›å»ºå¦å¤–ä¸‰ä¸ªç±»å‹çš„è¿‡æ»¤ç±» å¯åŠ¨é¡ºåºeureka-server &gt; server-zuul æ”¾é—®ï¼šhttp://192.168.5.165:8084/ec/hi?name=CHYIT GET &gt;&gt;&gt; run by PRE_TYPEGET &gt;&gt;&gt; run by ROUTE_TYPEGET &gt;&gt;&gt; run by ERROR_TYPE ç„¶åå¯åŠ¨eureka-client GET &gt;&gt;&gt; run by PRE_TYPEGET &gt;&gt;&gt; run by ROUTE_TYPEGET &gt;&gt;&gt; run by POST_TYPE æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼Œè·Ÿæˆ‘ç•™è¨€ã€‚åšå®¢åœ°å€ï¼šhttps://blog.aprcode.com/sc-f-e-05/æ•™ç¨‹æºç Githubåœ°å€ï¼šsc-f-e-05æ•™ç¨‹æºç Giteeåœ°å€ï¼šsc-f-e-05","categories":[{"name":"Spring Cloud","slug":"Spring-Cloud","permalink":"https://lixhbs.gitee.io/blog/categories/Spring-Cloud/"}],"tags":[{"name":"Spring Cloud","slug":"Spring-Cloud","permalink":"https://lixhbs.gitee.io/blog/tags/Spring-Cloud/"}]},{"title":"ã€Spring cloudã€‘ç¬¬å››ç¯‡ Router and Filter | è·¯ç”±å’Œè¿‡æ»¤å™¨ - Zuul","slug":"sc-f-e-04","date":"2018-10-29T07:00:01.000Z","updated":"2018-12-20T03:56:31.553Z","comments":true,"path":"sc-f-e-04/","link":"","permalink":"https://lixhbs.gitee.io/blog/sc-f-e-04/","excerpt":"è·¯ç”±æ˜¯å¾®æœåŠ¡æ¶æ„ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œ/å¯ä»¥æ˜ å°„åˆ°æ‚¨çš„Webåº”ç”¨ç¨‹åºï¼Œ/api/usersæ˜ å°„åˆ°ç”¨æˆ·æœåŠ¡ï¼Œ/api/shopæ˜ å°„åˆ°å•†åº—æœåŠ¡ã€‚ Zuulæ˜¯Netflixçš„åŸºäºJVMçš„è·¯ç”±å™¨å’ŒæœåŠ¡å™¨ç«¯è´Ÿè½½å‡è¡¡å™¨ Routing is an integral part of a microservice architecture. For example, / may be mapped to your web application, /api/users is mapped to the user service and /api/shop is mapped to the shop service. Zuul is a JVM-based router and server-side load balancer from Netflix.","text":"è·¯ç”±æ˜¯å¾®æœåŠ¡æ¶æ„ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œ/å¯ä»¥æ˜ å°„åˆ°æ‚¨çš„Webåº”ç”¨ç¨‹åºï¼Œ/api/usersæ˜ å°„åˆ°ç”¨æˆ·æœåŠ¡ï¼Œ/api/shopæ˜ å°„åˆ°å•†åº—æœåŠ¡ã€‚ Zuulæ˜¯Netflixçš„åŸºäºJVMçš„è·¯ç”±å™¨å’ŒæœåŠ¡å™¨ç«¯è´Ÿè½½å‡è¡¡å™¨ Routing is an integral part of a microservice architecture. For example, / may be mapped to your web application, /api/users is mapped to the user service and /api/shop is mapped to the shop service. Zuul is a JVM-based router and server-side load balancer from Netflix. æœ¬æ•™ç¨‹åœ¨ã€Spring Cloudã€‘ç¬¬ä¸‰ç¯‡ Client Side Load Balancer | è´Ÿè½½å‡è¡¡ - Ribbonçš„åŸºç¡€ä¸Šæ·»åŠ ä»£ç ã€‚ How to Include Zuul | é¡¹ç›®ä¸­å¦‚ä½•åŒ…å« Zuul To include Zuul in your project, use the starter with a group ID of org.springframework.cloud and an artifact ID of spring-cloud-starter-netflix-zuul. See the Spring Cloud Project page for details on setting up your build system with the current Spring Cloud Release Train. æ·»åŠ group IDåˆ° pom.xmlï¼Œæ³¨æ„è‡ªå·±çš„ç‰ˆæœ¬ã€‚ Zuulæœ‰å‡ ç§é…ç½®çš„æ–¹å¼è·³è¿‡è‡ªåŠ¨æ·»åŠ æœåŠ¡ï¼Œå°†zuul.ignored-services è®¾ç½®æœåŠ¡idåˆ—è¡¨çš„æ¨¡å¼ï¼Œå¦‚zuul.ignored-services = server-consumeæˆ–zuul.ignored-services = * å°†å¿½ç•¥æ‰æŒ‡å®šæˆ–æ‰€æœ‰çš„æœåŠ¡ï¼Œä½†æ˜¯å¦‚æœåœ¨è·¯ç”±åˆ—è¡¨ä¸­æ·»åŠ äº†æŒ‡å®šçš„è·¯ç”±ï¼Œå°†ä¸ä¼šè¢«å¿½ç•¥ï¼Œå¦‚ä¸‹æ‰€ç¤º,é™¤userså¤–å°†å¿½ç•¥æ‰€æœ‰æœåŠ¡ã€‚ 1234zuul: ignoredServices: '*' routes: users: /myusers/** è¦å¢åŠ æˆ–è€…ä¿®æ”¹è·¯ç”±å™¨è§„åˆ™ï¼Œå¯ä»¥æ·»åŠ å¦‚ä¸‹é…ç½®ï¼Œæµè§ˆå™¨è®¿é—®/myusersä¼šè½¬å‘åˆ°usersæœåŠ¡ï¼Œå¦‚ï¼š/myusers/101è½¬å‘åˆ°/101ï¼‰ã€‚123zuul: routes: users: /myusers/** è¦å¯¹è·¯ç”±å™¨è¿›è¡Œæ›´ç²¾ç»†çš„æ“ä½œï¼Œå¯ä»¥æŒ‡å®šç‹¬ç«‹çš„è·¯å¾„å’ŒServerIDï¼ˆEureka æœåŠ¡å‘ç°ï¼‰ï¼Œå¦‚ä¸‹é…ç½®ï¼š12345zuul: routes: users: path: /myusers/** serviceId: users_service ä¹Ÿå¯ä»¥ç›´æ¥é…ç½®httpè·¯å¾„çš„ç‰©ç†ä½ç½® 12345zuul: routes: users: path: /myusers/** url: http://example.com/users_service å®é™…æ“ä½œåˆ›å»ºserver-zuulå·¥ç¨‹ å®Œæ•´pom.xml12345678910111213141516171819202122232425262728293031323334353637383940414243444546&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.cyinfotech&lt;/groupId&gt; &lt;artifactId&gt;server-zuul&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;packaging&gt;jar&lt;/packaging&gt; &lt;name&gt;server-zuul&lt;/name&gt; &lt;description&gt;Demo project for Spring Boot&lt;/description&gt; &lt;parent&gt; &lt;groupId&gt;com.cyinfotech&lt;/groupId&gt; &lt;artifactId&gt;sc-f-e-04&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-zuul&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--Eureka-Client--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;&lt;/project&gt; ä¿®æ”¹çˆ¶å·¥ç¨‹pom.xmlï¼Œåœ¨modulesæ·»åŠ server-ribbon 1&lt;module&gt;server-zuul&lt;/module&gt; ä¿®æ”¹ServerZuulApplication12345678910111213141516package com.cyinfotech.serverzuul; import org.springframework.boot.SpringApplication; import org.springframework.boot.autoconfigure.SpringBootApplication; import org.springframework.cloud.client.discovery.EnableDiscoveryClient; import org.springframework.cloud.netflix.zuul.EnableZuulProxy; @SpringBootApplication @EnableDiscoveryClient @EnableZuulProxy public class ServerZuulApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(ServerZuulApplication.class, args); &#125; &#125; åœ¨application.ymlä¸­æ·»åŠ è·¯ç”±è§„åˆ™ 1234567891011121314151617spring: application: name: server-zuulserver: port: 8084eureka: client: serviceUrl: defaultZone: http://localhost:8761/eureka/zuul: routes: aa: path: /hy/** serviceId: server-hystrix bb: path: /ec/** serviceId: eureka-client åˆ†åˆ«åœ¨server-hystrixå’Œeureka-clientä¸­æ·»åŠ hiæœåŠ¡è·¯å¾„ ServerHystrixApplication 12345678910111213141516171819202122232425262728293031323334353637383940414243package com.cyinfotech.serverhystrix;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.beans.factory.annotation.Value;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.boot.builder.SpringApplicationBuilder;import org.springframework.cloud.client.circuitbreaker.EnableCircuitBreaker;import org.springframework.cloud.client.discovery.EnableDiscoveryClient;import org.springframework.context.annotation.Configuration;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestParam;import org.springframework.web.bind.annotation.RestController;import java.util.Map;@SpringBootApplication@EnableCircuitBreaker@EnableDiscoveryClient@RestControllerpublic class ServerHystrixApplication &#123; public static void main(String[] args) &#123; new SpringApplicationBuilder(ServerHystrixApplication.class).web(true).run(args); &#125; @Autowired StoreIntegration storeIntegration; @Value(&quot;$&#123;server.port&#125;&quot;) String port; @RequestMapping(&quot;/&quot;) public Object getHi (@RequestParam String name)&#123; return &quot;HI - &quot; + name + &quot;ï¼Œ port:&quot; + port + &quot;, By server-hystrix.&quot;; &#125; @RequestMapping(&quot;/hi&quot;) public Object hi ()&#123; return &quot;HI, By server-hystrix.&quot;; &#125;&#125; EurekaClientApplication package com.cyinfotech.eurekaclient; import org.springframework.boot.autoconfigure.SpringBootApplication; import org.springframework.boot.builder.SpringApplicationBuilder; import org.springframework.cloud.client.circuitbreaker.EnableCircuitBreaker; import org.springframework.cloud.client.discovery.EnableDiscoveryClient; import org.springframework.web.bind.annotation.RequestMapping; import org.springframework.web.bind.annotation.RestController; @SpringBootApplication @EnableDiscoveryClient @RestController public class EurekaClientApplication { @RequestMapping(&quot;/hi&quot;) public String home() { return &quot;Hello world, by eureka-client.&quot;; } public static void main(String[] args) { new SpringApplicationBuilder(EurekaClientApplication.class).web(true).run(args); } } è®¿é—®è·¯ç”±è·¯å¾„:http://localhost:8084/ec/hi Hello world, by eureka-client. è®¿é—®è·¯ç”±è·¯å¾„:http://localhost:8084/hy/hi HI, By server-hystrix. æœ¬ç¯‡æ•™ç¨‹å°±åˆ°è¿™ï¼Œè‡³äºæ›´æ·±çš„æ•™ç¨‹æˆ‘ä¼šåŠ ç´§å­¦ä¹ ç„¶åå†™å‡ºæ¥ã€‚ æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼Œè·Ÿæˆ‘ç•™è¨€ã€‚ åšå®¢åœ°å€ï¼šhttps://blog.aprcode.com/sc-f-e-04/æ•™ç¨‹æºç Githubåœ°å€ï¼šsc-f-e-04æ•™ç¨‹æºç Giteeåœ°å€ï¼šsc-f-e-04","categories":[{"name":"Spring Cloud","slug":"Spring-Cloud","permalink":"https://lixhbs.gitee.io/blog/categories/Spring-Cloud/"}],"tags":[{"name":"Spring Cloud","slug":"Spring-Cloud","permalink":"https://lixhbs.gitee.io/blog/tags/Spring-Cloud/"},{"name":"Router and Filter","slug":"Router-and-Filter","permalink":"https://lixhbs.gitee.io/blog/tags/Router-and-Filter/"}]},{"title":"ã€Spring Cloudã€‘ç¬¬ä¸€ç¯‡ Service Discovery | æœåŠ¡å‘ç° - Eureka","slug":"sc-f-e-01","date":"2018-10-22T10:41:43.000Z","updated":"2018-12-16T13:36:29.599Z","comments":true,"path":"sc-f-e-01/","link":"","permalink":"https://lixhbs.gitee.io/blog/sc-f-e-01/","excerpt":"Eureka æä¾›æœåŠ¡çš„æ³¨å†Œï¼ŒæœåŠ¡å¯ä»¥é€šè¿‡æ³¨å†Œåˆ°Eurekaç„¶åè¢«å…¶ä»–åº”ç”¨è°ƒç”¨ã€‚","text":"Eureka æä¾›æœåŠ¡çš„æ³¨å†Œï¼ŒæœåŠ¡å¯ä»¥é€šè¿‡æ³¨å†Œåˆ°Eurekaç„¶åè¢«å…¶ä»–åº”ç”¨è°ƒç”¨ã€‚ çœ‹åˆ°Spring Cloud çš„æ–‡æ¡£é‡Œé¢æ˜¯å…ˆè®²çš„æ˜¯Spring Cloud Config ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œæˆ–è€…è¯´å‚è€ƒå…¶ä»–å¤§ä½¬çš„æ•™ç¨‹ï¼Œæˆ‘ä¹Ÿä¼šæŠŠConfigæ”¾åˆ°åé¢å†™ã€‚ word &amp; phrase include ç¡®å®æ˜¯åŒ…å«çš„æ„æ€ï¼Œä½†æ˜¯æˆ‘è§‰å¾—ç¿»è¯‘ï¼ˆæ ¹æ®è¯­å¢ƒå»ç¿»è¯‘ï¼‰æˆä½¿ç”¨æ˜¯ä¸æ˜¯æ›´èˆ’æœäº› setting up é…ç½® provides æä¾› meta-data å…ƒæ•°æ® such as ä¾‹å¦‚ Note æ³¨æ„ Spring Cloud NetflixNetflix æ˜¯ä¸€å®¶åª’ä½“æä¾›å•†ï¼Œåº”è¯¥å¾ˆå‰å®³ï¼ å®˜ç½‘æ–‡æ¡£ä¸­å…ˆåˆ—å‡ºçš„æ˜¯Eurekaå®¢æˆ·ç«¯ï¼Œæˆ‘å°è¯•å…ˆå†™Eureka Client å‘ç°ä¼šæç¤ºä»¥ä¸‹é”™è¯¯ï¼Œåº”è¯¥æ˜¯åœ¨è¯·æ±‚ Eureka serverçš„æ—¶å€™æŠ¥é”™ï¼Œ å› ä¸ºæˆ‘ä»¬æ ¹æœ¬æ²¡æœ‰åˆ›å»ºã€‚æ‰€ä»¥æˆ‘å…ˆçœ‹Eureka server12NFO 25402 --- [main] com.netflix.discovery.DiscoveryClient : Getting all instance registry info from the eureka serverERROR 25402 --- [main] c.n.d.s.t.d.RedirectingEurekaHttpClient : Request execution error è¯´æ˜å®˜æ–¹è¯´æ˜ Finchleyçš„æ„å»ºå’Œå·¥ä½œç¯å¢ƒåº”è¯¥æ˜¯ Spring Boot 2.0.x, é¢„è®¡ä¸ä¼šåœ¨Spring Boot 1.5.x ä¸­ä½¿ç”¨ã€‚ Finchley builds and works with Spring Boot 2.0.x, and is not expected to work with Spring Boot 1.5.x. Spring Cloud éœ€è¦ä½¿ç”¨Spring Bootï¼Œå¦‚æœä¸ä¼šåˆ›å»ºSpring Booté¡¹ç›®çš„çœ‹è¿™é‡Œã€ŠSpring Boot | ä½¿ç”¨Spring Initializrå¿«é€Ÿåˆ›å»ºã€‹ï¼ åˆ›å»ºé¡¹ç›® æ–°å»ºå¥½Spring Bootåï¼Œåˆ é™¤srcæ–‡ä»¶ åœ¨pom.xml ä¸­æ·»åŠ  Spring Cloud é…ç½® 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.cyinfotech&lt;/groupId&gt; &lt;artifactId&gt;sc-f-e-01&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;packaging&gt;jar&lt;/packaging&gt; &lt;name&gt;sc-f-e-01&lt;/name&gt; &lt;description&gt;Demo project for Spring Boot&lt;/description&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.0.5.RELEASE&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt; &lt;java.version&gt;1.8&lt;/java.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;!-- Spring Cloud --&gt; &lt;dependencyManagement&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt; &lt;version&gt;Finchley.SR1&lt;/version&gt; &lt;type&gt;pom&lt;/type&gt; &lt;scope&gt;import&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;/dependencyManagement&gt; &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;&lt;/project&gt; Service Discovery: Eureka Server | æœåŠ¡å‘ç°ï¼šEurekaæœåŠ¡ç«¯How to Include Eureka Server | é¡¹ç›®ä¸­å¦‚ä½•åŒ…å« Eureka Server å³é”®é¡¹ç›® &gt; New &gt; Module æ–°å»º eureka-server å­å·¥ç¨‹ ä¿®æ”¹çˆ¶å·¥ç¨‹pom.xmlæ–‡ä»¶, æ·»åŠ å­å·¥ç¨‹ã€‚ 123&lt;modules&gt; &lt;module&gt;eureka-server&lt;/module&gt;&lt;/modules&gt; To include Eureka Server in your project, use the starter with a group ID of org.springframework.cloud and an artifact ID of spring-cloud-starter-netflix-eureka-server. See the Spring Cloud Project page for details on setting up your build system with the current Spring Cloud Release Train. åœ¨é¡¹ç›®ä¸­ä½¿ç”¨Eureka Serverï¼Œéœ€è¦é…ç½® pom.xml, æ ¹æ®ä½ å½“å‰çš„Spring Cloud ç‰ˆæœ¬åœ¨Spring Cloud Project pageä¸­å¯ä»¥æŸ¥çœ‹è¯¦ç»†è¯´æ˜ã€‚ eureka-server çš„ pom.xml12345678910111213141516171819202122232425262728293031&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.cyinfotech&lt;/groupId&gt; &lt;artifactId&gt;eureka-server&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;packaging&gt;jar&lt;/packaging&gt; &lt;name&gt;eureka-server&lt;/name&gt; &lt;description&gt;Demo project for Spring Boot&lt;/description&gt; &lt;parent&gt; &lt;groupId&gt;com.cyinfotech&lt;/groupId&gt; &lt;artifactId&gt;sc-f-e-01&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;dependencies&gt; &lt;!--Eureka-Server--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-server&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; How to Run a Eureka Server | å¦‚ä½•å¯åŠ¨ Eureka Serveråœ¨å¯åŠ¨ç±»æ·»åŠ  æ³¨è§£ @EnableEurekaServer Modify EurekaServerApplication 1234567891011121314package com.cyinfotech.eurekaserver;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.boot.builder.SpringApplicationBuilder;import org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;@SpringBootApplication@EnableEurekaServerpublic class EurekaServerApplication &#123; public static void main(String[] args) &#123; new SpringApplicationBuilder(EurekaServerApplication.class).web(true).run(args); &#125;&#125; Standalone Mode | å•æœºæ¨¡å¼ Add application.yml 1234567891011server: port: 8761 # ç«¯å£eureka: instance: hostname: localhost # ä¸»æœº client: registerWithEureka: false #æ˜¯å¦æ³¨å†Œè‡ªå·± fetchRegistry: false #æ˜¯å¦æ³¨å†Œè‡ªå·± serviceUrl: defaultZone: http://$&#123;eureka.instance.hostname&#125;:$&#123;server.port&#125;/eureka/ # æœåŠ¡åœ°å€ Start Open http://127.0.0.1:8761/ in your browser Instances currently registered with Eureka æ˜¯ç©ºçš„ï¼Œ å› ä¸ºæœ‰æ²¡æœ‰æœåŠ¡æ³¨å†Œ! Service Discovery: Eureka Clients | æœåŠ¡å‘ç°ï¼šEurekaå®¢æˆ·ç«¯Eurekaå®¢æˆ·ç«¯å¯ä»¥ç†è§£ä¸ºæœåŠ¡æ³¨å†Œå®é™…é¡¹ç›®ä¸­éœ€è¦æ›å…‰çš„æœåŠ¡ã€‚ How to Include Eureka Client | å¦‚ä½•ä½¿ç”¨Eurekaå®¢æˆ·ç«¯ å³é”®é¡¹ç›® &gt; New &gt; Module æ–°å»º eureka-client å­å·¥ç¨‹ï¼Œå’Œæ·»åŠ  server ä¸€æ · ä¿®æ”¹çˆ¶å·¥ç¨‹pom.xmlæ–‡ä»¶, æ·»åŠ å­å·¥ç¨‹ã€‚ 1&lt;module&gt;eureka-client&lt;/module&gt; To include the Eureka Client in your project, use the starter with a group ID of org.springframework.cloud and an artifact ID of spring-cloud-starter-netflix-eureka-client. See the Spring Cloud Project page for details on setting up your build system with the current Spring Cloud Release Train. è¦ä½¿ç”¨Eureka Client å°±è¦æ·»åŠ é…ç½®æ–‡ä»¶ï¼Œå®Œæ•´pom.xmlé…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.cyinfotech&lt;/groupId&gt; &lt;artifactId&gt;eureka-client&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;packaging&gt;jar&lt;/packaging&gt; &lt;name&gt;eureka-client&lt;/name&gt; &lt;description&gt;Demo project for Spring Boot&lt;/description&gt; &lt;parent&gt; &lt;groupId&gt;com.cyinfotech&lt;/groupId&gt; &lt;artifactId&gt;sc-f-e-01&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt; &lt;java.version&gt;1.8&lt;/java.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;!--Eureka-Client--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; Registering with Eureka | æ³¨å†Œ Eureka When a client registers with Eureka, it provides meta-data about itself â€” such as host, port, health indicator URL, home page, and other details. Eureka receives heartbeat messages from each instance belonging to a service. If the heartbeat fails over a configurable timetable, the instance is normally removed from the registry. å½“æ³¨å†ŒEurekaæ—¶ï¼Œå®ƒæä¾›ä¸€äº›åŒ…æ‹¬è‡ªå·±çš„æºæ•°æ®ï¼Œä¾‹å¦‚ï¼šä¸»æœºã€ç«¯å£ã€ç›‘å¬(å¿ƒè·³)åœ°å€ã€ä¸»é¡µå’Œå…¶å®ƒè¯¦ç»†ä¿¡æ¯ã€‚Eureka é€šè¿‡æ¯ä¸ªå®ä¾‹çš„æœåŠ¡æ¥å—å¿ƒè·³æ¶ˆæ¯ã€‚ å¦‚æœå¿ƒè·³åœ¨é…ç½®çš„æ—¶é—´å¤±è´¥ç»“æŸï¼Œé‚£è¿™ä¸ªå®ä¾‹é€šå¸¸ä¼šåˆ é™¤æ³¨å†Œã€‚ ä¿®æ”¹å¯åŠ¨Eureka Client å¯åŠ¨ç±»1234567891011121314151617181920package com.cyinfotech.eurekaclient;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.boot.builder.SpringApplicationBuilder;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;@SpringBootApplication@RestControllerpublic class EurekaClientApplication &#123; @RequestMapping(\"/\") public String home() &#123; return \"Hello world\"; &#125; public static void main(String[] args) &#123; new SpringApplicationBuilder(EurekaClientApplication.class).web(true).run(args); &#125;&#125; Note that the preceding example shows a normal Spring Boot application. By having spring-cloud-starter-netflix-eureka-client on the classpath, your application automatically registers with the Eureka Server. Configuration is required to locate the Eureka server, as shown in the following example: æ³¨æ„å‰é¢çš„æ­£å¸¸çš„ Spring boot ç¨‹åºï¼Œ ä½ çš„åº”ç”¨ç¨‹åºä¸­æ·»åŠ spring-cloud-starter-netflix-eureka-clientåå°†è‡ªåŠ¨æ³¨å†Œåˆ°Eureka Server, å¦‚ä¸‹æ‰€ç¤ºï¼š 123456server: port: 8781eureka: client: serviceUrl: defaultZone: http://localhost:8761/eureka/ å¯åŠ¨æ­¥éª¤ï¼š 1.EurekaServerApplication 2.EurekaClientApplication http://localhost:8761/ http://192.168.5.165:8781/ ä»¥ä¸Š Eureka çš„æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ï¼ˆæ³¨å†Œä¸å‘ç°ï¼‰å°±è®²å®Œäº†ï¼Œæˆ‘ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡è¿™ä¹ˆè®¤çœŸçœ‹å®˜æ–¹æ–‡æ¡£ï¼Œå…¶å®çœ‹ä¸‹æ¥å‘ç°ä¹Ÿä¸éš¾ï¼Œå…¶ä»–äººçš„æ–‡æ¡£é‡Œé¢ä¹Ÿæ— éå°±ç›´è¯‘äº†å®˜æ–¹æ–‡æ¡£ï¼Œä½†æ˜¯æ¯ä¸ªäººçš„ç†è§£ä¸ä¸€æ ·ï¼Œæ‰€ä»¥è¿˜æ˜¯æ¨èè‡ªå·±å»çœ‹åŸç‰ˆæ–‡æ¡£ï¼Œ æ²¡æœ‰æƒ³è±¡çš„é‚£ä¹ˆéš¾ã€‚ æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼Œè·Ÿæˆ‘ç•™è¨€ã€‚ åšå®¢åœ°å€ï¼šhttps://blog.aprcode.com/sc-f-e-01/æ•™ç¨‹æºç Githubåœ°å€ï¼šsc-f-e-01æ•™ç¨‹æºç Giteeåœ°å€ï¼šsc-f-e-01","categories":[{"name":"Spring Cloud","slug":"Spring-Cloud","permalink":"https://lixhbs.gitee.io/blog/categories/Spring-Cloud/"}],"tags":[{"name":"Spring Cloud","slug":"Spring-Cloud","permalink":"https://lixhbs.gitee.io/blog/tags/Spring-Cloud/"}]},{"title":"ã€Spring Cloudã€‘ç›®å½•ç¯‡ - æˆ‘æ˜¯ã€Œç…®é…’æ³›èˆŸã€","slug":"sc-f-e-00","date":"2018-10-21T13:32:27.000Z","updated":"2018-12-16T13:36:41.432Z","comments":true,"path":"sc-f-e-00/","link":"","permalink":"https://lixhbs.gitee.io/blog/sc-f-e-00/","excerpt":"æŒ‰ç…§å®˜æ–¹çš„æ–‡æ¡£å­¦ä¹ Spring Cloudï¼Œå®˜æ–¹çš„ä¸€èˆ¬éƒ½ä¼šæ¯”è¾ƒç®€å•ï¼Œä¸æ˜¯å¾ˆé€‚åˆåˆå­¦è€…ï¼Œæˆ‘åœ¨å­¦ä¹ çš„æ—¶å€™ä¹Ÿä¼šå‚è€ƒåˆ«äººçš„æ–‡ç« ï¼Œä½†æ˜¯ä¹Ÿå¸Œæœ›è‡ªå·±èƒ½ç‹¬ç«‹çš„é˜…è¯»å®˜æ–¹æ–‡æ¡£å­¦ä¹ æœ€æ–°çš„çŸ¥è¯†ã€‚ä¹Ÿå¸Œæœ›æœ‰å¤§ä½¬èƒ½å‘Šè¯‰å­¦ä¹ è‹±æ–‡çš„æ–¹å¼ï¼ï¼ï¼","text":"æŒ‰ç…§å®˜æ–¹çš„æ–‡æ¡£å­¦ä¹ Spring Cloudï¼Œå®˜æ–¹çš„ä¸€èˆ¬éƒ½ä¼šæ¯”è¾ƒç®€å•ï¼Œä¸æ˜¯å¾ˆé€‚åˆåˆå­¦è€…ï¼Œæˆ‘åœ¨å­¦ä¹ çš„æ—¶å€™ä¹Ÿä¼šå‚è€ƒåˆ«äººçš„æ–‡ç« ï¼Œä½†æ˜¯ä¹Ÿå¸Œæœ›è‡ªå·±èƒ½ç‹¬ç«‹çš„é˜…è¯»å®˜æ–¹æ–‡æ¡£å­¦ä¹ æœ€æ–°çš„çŸ¥è¯†ã€‚ä¹Ÿå¸Œæœ›æœ‰å¤§ä½¬èƒ½å‘Šè¯‰å­¦ä¹ è‹±æ–‡çš„æ–¹å¼ï¼ï¼ï¼ æ•™ç¨‹æºç Githubåœ°å€ï¼šhttps://github.com/lixhubei/SpringCloudEnglishæ•™ç¨‹æºç Giteeåœ°å€ï¼šhttps://gitee.com/Lixhbs/SpringCloudEnglish ç¯å¢ƒ Spring Boot: v2.0.4 Spring Cloud: Finchley SR1 IDEA JDK 1.8 è¯´æ˜ç›®å‰ç½‘ä¸ŠSpring Cloudç³»åˆ—æ•™ç¨‹è¿˜æ˜¯æ¯”è¾ƒä¸°å¯Œçš„ï¼Œä¾‹å¦‚ï¼šç¨‹åºå‘˜DD - Spring CloudåŸºç¡€æ•™ç¨‹ã€æ–¹å¿—æœ‹ - å²ä¸Šæœ€ç®€å•çš„ SpringCloud æ•™ç¨‹ç­‰å¤§ä½¬çš„ç³»åˆ—æ–‡ç« ã€‚ ä¸Šé¢ä¸¤ä½å¤§ä½¬çš„æ•™ç¨‹è®©æˆ‘é€æ¸çš„äº†è§£å¹¶è®¤è¯†äº†Spring Cloudï¼Œå­¦ä¹ ä»»ä½•ä¸€é¡¹æŠ€èƒ½è¿˜æ˜¯å¸Œæœ›èƒ½ç†è§£çš„é€é€çš„ï¼Œæ‰€ä»¥æ ¹æ®ç»ˆæå­¦ä¹ æ³•â€”â€”è´¹æ›¼æŠ€å·§æˆ‘å°†æˆ‘æ‰€äº†è§£çš„Spring Cloudå†™ä¸‹æ¥ã€‚ ç”±äºè‹±è¯­å¯¹ç¨‹åºå‘˜æ˜¯éå¸¸é‡è¦çš„,å¯ä»¥çœ‹ä¸‹è¿™ä½å¤§ä½¬çš„æ–‡ç« è€ç å†œæ•™ä½ å­¦è‹±è¯­ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä¹Ÿå¼€å§‹æˆ‘é˜…è¯»è‹±æ–‡æ–‡æ¡£çš„ç¬¬ä¸€æ­¥ï¼Œå¦‚æœå¤§å®¶æœ‰å¥½çš„å­¦ä¹ æ–¹æ³•å¯ä»¥å’Œæˆ‘äº¤æµã€‚ä»¥å‰ä¹Ÿæœ‰æ— æ•°æ¬¡å­¦ä¹ è‹±è¯­çš„å†²åŠ¨ï¼Œæ¯æ¬¡éƒ½æ‹¿èµ·å„ç§èƒŒå•è¯çš„APPè‹¦å­¦ä¸€ä¸¤å‘¨ï¼Œç„¶å¹¶åµï¼ŒSpring Cloudç³»åˆ—æ•™ç¨‹ï¼Œæˆ‘ä¼šä»¥å®˜æ–¹è‹±æ–‡æ–‡æ¡£ä¸ºä¸»ï¼Œå’Œå¤§å®¶ä¸€èµ·å»æ­å»ºSpring Cloudæ¡†æ¶ã€‚ Spring Cloud ç®€ä»‹ä¸ªäººç†è§£ä¸ºå¤šä¸ªåŠŸèƒ½ç»„æˆçš„ä¸€ä¸ªå¾®æœåŠ¡è§£å†³æ–¹æ¡ˆçš„ä½“ç³»ï¼Œé‡Œé¢åŒ…æ‹¬æœåŠ¡å‘ç°ã€æœåŠ¡æ¶ˆè´¹ã€è·¯ç”±ã€æ–­è·¯å™¨ç­‰ç­‰å·¥å…·ï¼Œçœ‹å‘å¸ƒçš„ç‰ˆæœ¬å°±èƒ½çœ‹å‡ºï¼ŒSpring Cloud ä¸æ˜¯æŸä¸€ç§æŠ€æœ¯ï¼Œè€Œæ˜¯é›†å¾ˆå¤šä¸œè¥¿ä¸ºä¸€ä½“çš„ï¼Œå½“æŸäº›åŠŸèƒ½å‘å¸ƒäº†ç‰ˆæœ¬åï¼ŒSpring Cloudæ‰ä¼šè·Ÿç€å‘å¸ƒç‰ˆæœ¬ã€‚ ä¸ºä»€ä¹ˆå»çœ‹è‹±æ–‡æ–‡æ¡£ä¸ºä»€ä¹ˆå»çœ‹è‹±æ–‡æ–‡æ¡£ï¼Œå°±åªæœ‰ä¸€ä¸ªåŸå› ï¼Œå› ä¸ºæœ€æ–°çš„æŠ€æœ¯éƒ½æ˜¯è‹±æ–‡ç‰ˆçš„ã€‚æ€ä¹ˆå»å­¦ï¼Œæˆ‘ä¹‹å‰æœ‰çœ‹è¿‡ä¸€ä¸ªäººçš„ï¼ˆçªç„¶å¿˜è®°åå­—äº†ï¼Œæƒ³èµ·æ¥å†ä¸ä¸Šæ¥ï¼‰æœ‰ä¸ªé€ææ³•ï¼Œä½†æ˜¯è¦æœ‰ä¸€å®šçš„è‹±è¯­åŸºç¡€ï¼Œç”±äºæˆ‘ç®—æ˜¯æ²¡æœ‰åŸºç¡€çš„æ‰€ä»¥æˆ‘æƒ³ç»“åˆè¿™ä¸ªé€ææ³•ï¼Œç„¶åè‡ªå·±ç¢ç£¨ä¸‹å¦‚ä½•å»å­¦ï¼Œå› ä¸ºæŠ€æœ¯æ–‡ç« å’Œå…¶ä»–çš„æ–‡ç« æœ‰ç‚¹ä¸ä¸€æ ·ï¼ŒæŠ€æœ¯æ–‡ç« é‡Œé¢æœ‰å¾ˆå¤šçš„ä¸“ä¸šæœ¯è¯­,ä½†æ˜¯è¿™äº›æœ¯è¯­æ˜¯æœ‰é™çš„ï¼Œæ‰€ä»¥çœ‹å¾—å¤šäº†å°±åº”è¯¥å°±ä¼šäº†ã€‚æˆ‘ä»¬è¿™ç§åº”è¯¥å±äºå“‘å·´è‹±è¯­ï¼ ç›®å½• ã€Spring Cloudã€‘ç›®å½•ç¯‡ æˆ‘æ˜¯ã€Œç…®é…’æ³›èˆŸã€ ã€Spring Cloudã€‘ç¬¬ä¸€ç¯‡ Service Discovery | æœåŠ¡å‘ç° - Eureka ã€Spring Cloudã€‘ç¬¬äºŒç¯‡ Circuit Breaker | æ–­è·¯å™¨ - Hystrix ã€Spring Cloudã€‘ç¬¬ä¸‰ç¯‡ Client Side Load Balancer | è´Ÿè½½å‡è¡¡ - Ribbon ã€Spring cloudã€‘ç¬¬å››ç¯‡ Router and Filter | è·¯ç”±å’Œè¿‡æ»¤å™¨ - Zuul æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼Œè·Ÿæˆ‘ç•™è¨€ã€‚","categories":[{"name":"Spring Cloud","slug":"Spring-Cloud","permalink":"https://lixhbs.gitee.io/blog/categories/Spring-Cloud/"}],"tags":[{"name":"Spring Cloud","slug":"Spring-Cloud","permalink":"https://lixhbs.gitee.io/blog/tags/Spring-Cloud/"}]},{"title":"Spring Boot | ä½¿ç”¨Spring Initializrå¿«é€Ÿåˆ›å»º","slug":"Spring-Boot-SI","date":"2018-10-16T03:23:08.000Z","updated":"2018-12-20T03:56:22.589Z","comments":true,"path":"Spring-Boot-SI/","link":"","permalink":"https://lixhbs.gitee.io/blog/Spring-Boot-SI/","excerpt":"ç®€å•å¿«é€Ÿæ­å»ºå¯åŠ¨Spring Booté¡¹ç›®","text":"ç®€å•å¿«é€Ÿæ­å»ºå¯åŠ¨Spring Booté¡¹ç›® æ•™ç¨‹æºç Githubåœ°å€æ•™ç¨‹æºç Giteeåœ°å€ Create New Prject | åˆ›å»ºæ–°é¡¹ç›® é€‰æ‹© Spring Initializr å¡«å¥½ä¿¡æ¯é€‰æ‹©ä¸‹ä¸€æ­¥ å¯ä»¥é€‰æ‹©ä¸€äº›å·¥å…· åˆ›å»ºå¥½åé¡¹ç›®ä¼šå¼€å§‹åˆå§‹åŒ–ï¼Œç­‰å¾…ä¸€ä¸‹ ä¿®æ”¹å¯åŠ¨ç±» SpringBootSiApplication 123456789101112131415161718192021package com.cyinfotech.springbootsi;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;@SpringBootApplication@RestControllerpublic class SpringBootSiApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(SpringBootSiApplication.class, args); &#125; @RequestMapping(\"/\") public String getIndex () &#123; return \"Hello Spring Boot\"; &#125;&#125; åˆå§‹åŒ–å®Œæˆåå³ä¸Šè§’å¯åŠ¨|è°ƒè¯•é¡¹ç›® å¯åŠ¨ä¿¡æ¯ é¡µé¢è®¿é—® â€˜http://localhost:8080/&#39; æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼Œè·Ÿæˆ‘ç•™è¨€ã€‚","categories":[],"tags":[{"name":"Spring Boot","slug":"Spring-Boot","permalink":"https://lixhbs.gitee.io/blog/tags/Spring-Boot/"}]}]}